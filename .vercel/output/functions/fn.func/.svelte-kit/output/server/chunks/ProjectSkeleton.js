import { c as create_ssr_component, d as add_attribute, e as escape, a as subscribe, o as onDestroy, v as validate_component } from "./ssr.js";
import "@sveltejs/kit/internal";
import "./exports.js";
import "./utils.js";
import "@sveltejs/kit/internal/server";
import "./state.svelte.js";
import { projectStore } from "./projectStore.js";
import { w as writable } from "./index.js";
function createPlaybackStore() {
  const { subscribe: subscribe2, set, update } = writable({
    currentTime: 0,
    playingNodes: /* @__PURE__ */ new Set()
  });
  const nodeLastSeen = /* @__PURE__ */ new Map();
  const NODE_PERSISTENCE_MS = 150;
  return {
    subscribe: subscribe2,
    set,
    update,
    updatePlayback: (time, eventIds) => {
      const now = Date.now();
      update((state) => {
        const newPlayingNodes = /* @__PURE__ */ new Set();
        for (const nodeId of state.playingNodes) {
          const lastSeen = nodeLastSeen.get(nodeId);
          if (lastSeen !== void 0 && now - lastSeen < NODE_PERSISTENCE_MS) {
            newPlayingNodes.add(nodeId);
          } else {
            nodeLastSeen.delete(nodeId);
          }
        }
        for (const eventId of eventIds) {
          newPlayingNodes.add(eventId);
          nodeLastSeen.set(eventId, now);
        }
        return {
          currentTime: time,
          playingNodes: newPlayingNodes
        };
      });
    },
    clear: () => {
      nodeLastSeen.clear();
      set({
        currentTime: 0,
        playingNodes: /* @__PURE__ */ new Set()
      });
    }
  };
}
const playbackStore = createPlaybackStore();
function createSelectionStore() {
  const { subscribe: subscribe2, set, update } = writable({
    selectedNodes: /* @__PURE__ */ new Set(),
    selectedTrackId: null,
    selectedPatternId: null,
    selectedInstrumentId: null,
    selectedNodeId: null,
    isRoot: false
  });
  return {
    subscribe: subscribe2,
    selectNode: (nodeId, trackId, isRoot, multiSelect = false, patternId = null, instrumentId = null) => {
      update((state) => {
        const newSelectedNodes = multiSelect ? new Set(state.selectedNodes) : /* @__PURE__ */ new Set();
        newSelectedNodes.add(nodeId);
        return {
          selectedNodes: newSelectedNodes,
          selectedTrackId: trackId,
          selectedPatternId: patternId,
          selectedInstrumentId: instrumentId,
          selectedNodeId: nodeId,
          isRoot
        };
      });
    },
    selectMultipleNodes: (nodeIds, trackId, isRoot = false, patternId = null, instrumentId = null) => {
      update((state) => {
        const newSelectedNodes = new Set(nodeIds);
        return {
          selectedNodes: newSelectedNodes,
          selectedTrackId: trackId,
          selectedPatternId: patternId,
          selectedInstrumentId: instrumentId,
          selectedNodeId: newSelectedNodes.size === 1 ? Array.from(newSelectedNodes)[0] : null,
          isRoot
        };
      });
    },
    clearSelection: () => {
      set({
        selectedNodes: /* @__PURE__ */ new Set(),
        selectedTrackId: null,
        selectedPatternId: null,
        selectedInstrumentId: null,
        selectedNodeId: null,
        isRoot: false
      });
    },
    isSelected: (nodeId) => {
      let selected = false;
      subscribe2((state) => {
        selected = state.selectedNodes.has(nodeId);
      })();
      return selected;
    }
  };
}
const selectionStore = createSelectionStore();
function createViewStore() {
  const { subscribe: subscribe2, set, update } = writable("arrangement");
  let currentPatternId = null;
  return {
    subscribe: subscribe2,
    set,
    update,
    toggle: () => {
      update((mode) => mode === "arrangement" ? "pattern" : "arrangement");
    },
    setArrangement: () => set("arrangement"),
    setPattern: () => set("pattern"),
    setCurrentPatternId: (id) => {
      currentPatternId = id;
    },
    getCurrentPatternId: () => currentPatternId
  };
}
const viewStore = createViewStore();
function createEngineStore() {
  const { subscribe: subscribe2, set } = writable(null);
  return {
    subscribe: subscribe2,
    set,
    updateTrack: async (trackId, updates) => {
      let engine = null;
      subscribe2((e) => engine = e)();
      if (engine) {
        if (updates.settings) {
          engine.updateTrackSettings(trackId, updates.settings);
        }
        if (updates.volume !== void 0) {
          engine.updateTrackVolume(trackId, updates.volume);
        }
        if (updates.pan !== void 0) {
          engine.updateTrackPan(trackId, updates.pan);
        }
        if (updates.mute !== void 0) {
          engine.updateTrackMute(trackId, updates.mute);
        }
        if (updates.solo !== void 0) {
          engine.updateTrackSolo(trackId, updates.solo);
        }
        if (updates.instrumentType) {
          const { projectStore: projectStore2 } = await import("./projectStore.js");
          let project;
          projectStore2.subscribe((p) => project = p)();
          if (project) {
            let track = project.standaloneInstruments?.find((t) => t.id === trackId);
            if (!track && trackId.startsWith("__pattern_")) {
              const withoutPrefix = trackId.substring("__pattern_".length);
              const parts = withoutPrefix.split("_");
              if (parts.length >= 2) {
                const patternId = parts[0];
                const instrumentId = parts.slice(1).join("_");
                const pattern = project.patterns?.find((p) => p.id === patternId);
                if (pattern) {
                  const instruments = pattern.instruments && Array.isArray(pattern.instruments) && pattern.instruments.length > 0 ? pattern.instruments : pattern.instrumentType && pattern.patternTree ? [{
                    id: pattern.id,
                    instrumentType: pattern.instrumentType,
                    patternTree: pattern.patternTree,
                    settings: pattern.settings || {},
                    instrumentSettings: pattern.instrumentSettings,
                    color: pattern.color || "#7ab8ff",
                    volume: pattern.volume ?? 1,
                    pan: pattern.pan ?? 0,
                    mute: pattern.mute,
                    solo: pattern.solo
                  }] : [];
                  track = instruments.find((inst) => inst.id === instrumentId);
                  if (track) {
                    track = {
                      id: trackId,
                      projectId: pattern.projectId,
                      instrumentType: updates.instrumentType,
                      patternTree: track.patternTree,
                      settings: updates.settings || track.settings || {},
                      instrumentSettings: updates.instrumentSettings || track.instrumentSettings,
                      volume: track.volume ?? 1,
                      pan: track.pan ?? 0,
                      color: track.color || "#7ab8ff",
                      mute: track.mute ?? false,
                      solo: track.solo ?? false
                    };
                  }
                }
              }
            }
            if (track) {
              engine.updateTrack(trackId, { ...track, ...updates });
            }
          }
        }
        if (updates.patternTree) {
          engine.updatePatternTree(trackId, updates.patternTree);
        }
      }
    }
  };
}
const engineStore = createEngineStore();
const css$6 = {
  code: '.export-dialog-overlay.svelte-s7zu5d.svelte-s7zu5d{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0, 0, 0, 0.7);display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(4px)}.export-dialog.svelte-s7zu5d.svelte-s7zu5d{background:#1f1f1f;border:1px solid rgba(255, 255, 255, 0.1);border-radius:8px;width:90%;max-width:500px;max-height:90vh;display:flex;flex-direction:column;box-shadow:0 8px 32px rgba(0, 0, 0, 0.5)}.export-dialog-header.svelte-s7zu5d.svelte-s7zu5d{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid rgba(255, 255, 255, 0.1)}.export-dialog-header.svelte-s7zu5d h2.svelte-s7zu5d{margin:0;font-size:18px;font-weight:600;color:#e8e8e8}.close-button.svelte-s7zu5d.svelte-s7zu5d{background:transparent;border:none;color:#b8b8b8;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all 0.2s ease}.close-button.svelte-s7zu5d.svelte-s7zu5d:hover:not(:disabled){background:rgba(255, 255, 255, 0.1);color:#e8e8e8}.close-button.svelte-s7zu5d.svelte-s7zu5d:disabled{opacity:0.3;cursor:not-allowed}.export-dialog-content.svelte-s7zu5d.svelte-s7zu5d{padding:24px;overflow-y:auto;flex:1}.export-error.svelte-s7zu5d.svelte-s7zu5d{display:flex;align-items:center;gap:8px;padding:12px;background:rgba(255, 68, 68, 0.1);border:1px solid rgba(255, 68, 68, 0.3);border-radius:6px;color:#ff6b6b;font-size:13px;margin-bottom:20px}.export-error.svelte-s7zu5d svg.svelte-s7zu5d{flex-shrink:0}.export-section.svelte-s7zu5d.svelte-s7zu5d{margin-bottom:24px}.export-section.svelte-s7zu5d.svelte-s7zu5d:last-child{margin-bottom:0}.export-label.svelte-s7zu5d.svelte-s7zu5d{display:block;font-size:13px;font-weight:600;color:#b8b8b8;margin-bottom:12px;text-transform:uppercase;letter-spacing:0.5px}.export-options.svelte-s7zu5d.svelte-s7zu5d{display:flex;flex-direction:column;gap:8px}.export-option.svelte-s7zu5d.svelte-s7zu5d{display:flex;align-items:center;gap:12px;padding:12px;background:#2d2d2d;border:1px solid rgba(255, 255, 255, 0.1);border-radius:6px;cursor:pointer;transition:all 0.2s ease}.export-option.svelte-s7zu5d.svelte-s7zu5d:hover:not(:has(input:disabled)){background:#333333;border-color:rgba(255, 255, 255, 0.2)}.export-option.svelte-s7zu5d input[type="radio"].svelte-s7zu5d{margin:0;cursor:pointer;accent-color:#00ff88}.export-option.svelte-s7zu5d.svelte-s7zu5d:has(input:checked){background:#2d4d2d;border-color:#00ff88}.export-option.svelte-s7zu5d.svelte-s7zu5d:has(input:disabled){opacity:0.5;cursor:not-allowed}.option-content.svelte-s7zu5d.svelte-s7zu5d{display:flex;flex-direction:column;gap:4px;flex:1}.option-title.svelte-s7zu5d.svelte-s7zu5d{font-size:14px;font-weight:500;color:#e8e8e8}.option-description.svelte-s7zu5d.svelte-s7zu5d{font-size:12px;color:#b8b8b8}.custom-range-inputs.svelte-s7zu5d.svelte-s7zu5d{display:flex;gap:12px}.range-input-group.svelte-s7zu5d.svelte-s7zu5d{flex:1;display:flex;flex-direction:column;gap:6px}.range-input-group.svelte-s7zu5d label.svelte-s7zu5d{font-size:12px;color:#b8b8b8}.range-input-group.svelte-s7zu5d .number-input-wrapper.svelte-s7zu5d{position:relative;display:flex;align-items:center;width:100%}.range-number-input.svelte-s7zu5d.svelte-s7zu5d{width:100%;background:#2d2d2d;border:1px solid rgba(255, 255, 255, 0.1);border-radius:6px;padding:8px 28px 8px 12px;color:#e8e8e8;font-size:14px;transition:all 0.2s ease;-moz-appearance:textfield}.range-number-input.svelte-s7zu5d.svelte-s7zu5d::-webkit-outer-spin-button,.range-number-input.svelte-s7zu5d.svelte-s7zu5d::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.range-number-input.svelte-s7zu5d.svelte-s7zu5d:focus{outline:none;border-color:#00ff88;background:#333333}.range-number-input.svelte-s7zu5d.svelte-s7zu5d:disabled{opacity:0.5;cursor:not-allowed}.range-input-group.svelte-s7zu5d .number-input-arrows.svelte-s7zu5d{position:absolute;right:4px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:2px;pointer-events:none}.range-input-group.svelte-s7zu5d .arrow-button.svelte-s7zu5d{background:transparent;border:none;color:#b8b8b8;cursor:pointer;padding:2px;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;border-radius:2px;width:16px;height:12px;pointer-events:auto}.range-input-group.svelte-s7zu5d .arrow-button.svelte-s7zu5d:hover:not(:disabled){color:#e8e8e8;background:rgba(255, 255, 255, 0.1)}.range-input-group.svelte-s7zu5d .arrow-button.svelte-s7zu5d:active:not(:disabled){color:#7ab8ff;background:rgba(122, 184, 255, 0.2);transform:scale(0.9)}.range-input-group.svelte-s7zu5d .arrow-button.svelte-s7zu5d:disabled{opacity:0.4;cursor:not-allowed;background:transparent;color:#5a5a5a}.range-input-group.svelte-s7zu5d .arrow-button svg.svelte-s7zu5d{width:10px;height:10px}.range-info.svelte-s7zu5d.svelte-s7zu5d{margin-top:8px;font-size:12px;color:#b8b8b8}.filename-input.svelte-s7zu5d.svelte-s7zu5d{width:100%;background:#2d2d2d;border:1px solid rgba(255, 255, 255, 0.1);border-radius:6px;padding:10px 12px;color:#e8e8e8;font-size:14px;transition:all 0.2s ease}.filename-input.svelte-s7zu5d.svelte-s7zu5d:focus{outline:none;border-color:#00ff88;background:#333333}.filename-input.svelte-s7zu5d.svelte-s7zu5d:disabled{opacity:0.5;cursor:not-allowed}.format-selector.svelte-s7zu5d.svelte-s7zu5d{display:flex;gap:8px}.format-option.svelte-s7zu5d.svelte-s7zu5d{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;background:#2d2d2d;border:1px solid rgba(255, 255, 255, 0.1);border-radius:6px;cursor:pointer;transition:all 0.2s ease;font-size:13px;color:#e8e8e8}.format-option.svelte-s7zu5d.svelte-s7zu5d:hover:not(:has(input:disabled)){background:#333333;border-color:rgba(255, 255, 255, 0.2)}.format-option.svelte-s7zu5d input[type="radio"].svelte-s7zu5d{margin:0;cursor:pointer;accent-color:#00ff88}.format-option.svelte-s7zu5d.svelte-s7zu5d:has(input:checked){background:#2d4d2d;border-color:#00ff88}.format-option.svelte-s7zu5d.svelte-s7zu5d:has(input:disabled){opacity:0.5;cursor:not-allowed}.export-info.svelte-s7zu5d.svelte-s7zu5d{display:flex;flex-direction:column;gap:8px;padding:12px;background:#2d2d2d;border-radius:6px}.info-item.svelte-s7zu5d.svelte-s7zu5d{display:flex;justify-content:space-between;align-items:center}.info-label.svelte-s7zu5d.svelte-s7zu5d{font-size:13px;color:#b8b8b8}.info-value.svelte-s7zu5d.svelte-s7zu5d{font-size:13px;color:#e8e8e8;font-weight:500}.export-progress-section.svelte-s7zu5d.svelte-s7zu5d{margin-top:20px;padding-top:20px;border-top:1px solid rgba(255, 255, 255, 0.1)}.export-progress-bar.svelte-s7zu5d.svelte-s7zu5d{width:100%;height:6px;background:#2d2d2d;border-radius:3px;overflow:hidden;margin-bottom:8px}.export-progress-fill.svelte-s7zu5d.svelte-s7zu5d{height:100%;background:#00ff88;border-radius:3px;transition:width 0.1s ease}.export-progress-text.svelte-s7zu5d.svelte-s7zu5d{text-align:center;font-size:12px;color:#b8b8b8}.export-dialog-footer.svelte-s7zu5d.svelte-s7zu5d{display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:20px 24px;border-top:1px solid rgba(255, 255, 255, 0.1)}.export-button-cancel.svelte-s7zu5d.svelte-s7zu5d,.export-button-submit.svelte-s7zu5d.svelte-s7zu5d{padding:10px 20px;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease;border:none}.export-button-cancel.svelte-s7zu5d.svelte-s7zu5d{background:#2d2d2d;color:#e8e8e8;border:1px solid rgba(255, 255, 255, 0.1)}.export-button-cancel.svelte-s7zu5d.svelte-s7zu5d:hover:not(:disabled){background:#333333;border-color:rgba(255, 255, 255, 0.2)}.export-button-submit.svelte-s7zu5d.svelte-s7zu5d{background:#00ff88;color:#1a1a1a;font-weight:600}.export-button-submit.svelte-s7zu5d.svelte-s7zu5d:hover:not(:disabled){background:#00cc6a}.export-button-cancel.svelte-s7zu5d.svelte-s7zu5d:disabled,.export-button-submit.svelte-s7zu5d.svelte-s7zu5d:disabled{opacity:0.5;cursor:not-allowed}',
  map: '{"version":3,"file":"ExportDialog.svelte","sources":["ExportDialog.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { projectStore } from \\"$lib/stores/projectStore\\";\\nimport { recordProject, exportBuffer } from \\"$lib/audio/utils/audioExport\\";\\nexport let isOpen = false;\\nexport let onClose;\\nlet project;\\nprojectStore.subscribe((p) => project = p);\\n$: bpm = project?.bpm ?? 120;\\n$: timeline = project?.timeline;\\n$: hasTimeline = timeline && timeline.clips && timeline.clips.length > 0;\\nlet exportRange = hasTimeline ? \\"full\\" : \\"custom\\";\\nlet exportFormat = \\"wav\\";\\nlet customStartBeat = 0;\\nlet customEndBeat = 16;\\nlet filename = \\"\\";\\nlet hasCustomStart = false;\\nlet hasCustomEnd = false;\\n$: timelineLength = timeline?.totalLength || 16;\\nlet isEditingStart = false;\\nlet isEditingEnd = false;\\n$: if (timeline && timelineLength > 0 && !isEditingEnd && !hasCustomEnd) {\\n  if (customEndBeat > timelineLength || customEndBeat === 16) {\\n    customEndBeat = timelineLength;\\n  }\\n}\\nfunction validateStartBeat(value) {\\n  const max = timelineLength > 0 ? Math.min(timelineLength - 0.25, customEndBeat - 0.25) : customEndBeat - 0.25;\\n  return Math.max(0, Math.min(value, max));\\n}\\nfunction validateEndBeat(value) {\\n  const max = timelineLength > 0 ? timelineLength : Infinity;\\n  return Math.max(customStartBeat + 0.25, Math.min(value, max));\\n}\\n$: durationInBeats = (() => {\\n  if (exportRange === \\"full\\") {\\n    return timelineLength;\\n  } else {\\n    return customEndBeat - customStartBeat;\\n  }\\n})();\\n$: durationInSeconds = durationInBeats * 60 / bpm;\\n$: durationMinutes = Math.floor(durationInSeconds / 60);\\n$: durationSeconds = Math.floor(durationInSeconds % 60);\\n$: durationDisplay = durationInSeconds < 60 ? `${durationInSeconds.toFixed(1)}s` : `${durationMinutes}:${durationSeconds.toString().padStart(2, \\"0\\")}`;\\n$: if (!filename && project) {\\n  const projectName = project.name || \\"untitled\\";\\n  const timestamp = (/* @__PURE__ */ new Date()).toISOString().slice(0, 10).replace(/-/g, \\"\\");\\n  const extension = exportFormat === \\"wav\\" ? \\"wav\\" : exportFormat === \\"mp3\\" ? \\"mp3\\" : exportFormat === \\"ogg\\" ? \\"ogg\\" : \\"wav\\";\\n  filename = `${projectName}-${timestamp}.${extension}`;\\n}\\n$: if (filename && project) {\\n  const baseName = filename.replace(/\\\\.(wav|ogg|mp3)$/i, \\"\\");\\n  const extension = exportFormat === \\"wav\\" ? \\"wav\\" : exportFormat === \\"mp3\\" ? \\"mp3\\" : exportFormat === \\"ogg\\" ? \\"ogg\\" : \\"wav\\";\\n  if (!filename.endsWith(`.${extension}`)) {\\n    filename = `${baseName}.${extension}`;\\n  }\\n}\\nlet isExporting = false;\\nlet exportProgress = 0;\\nlet exportError = null;\\nasync function handleExport() {\\n  if (!project || !project.standaloneInstruments || project.standaloneInstruments.length === 0) {\\n    exportError = \\"No project to export\\";\\n    return;\\n  }\\n  if (isExporting) return;\\n  isExporting = true;\\n  exportProgress = 0;\\n  exportError = null;\\n  try {\\n    let durationInBeats2;\\n    let timelineToUse = null;\\n    if (exportRange === \\"full\\") {\\n      durationInBeats2 = timelineLength;\\n      timelineToUse = timeline;\\n    } else if (exportRange === \\"custom\\") {\\n      if (timeline) {\\n        const customTimeline = {\\n          ...timeline,\\n          tracks: timeline?.tracks || [],\\n          clips: (timeline?.clips || []).filter((clip) => {\\n            const clipEnd = clip.startBeat + clip.duration;\\n            return clipEnd > customStartBeat && clip.startBeat < customEndBeat;\\n          }).map((clip) => {\\n            const newStartBeat = Math.max(0, clip.startBeat - customStartBeat);\\n            const clipStartInRange = Math.max(customStartBeat, clip.startBeat);\\n            const clipEndInRange = Math.min(customEndBeat, clip.startBeat + clip.duration);\\n            const newDuration = clipEndInRange - clipStartInRange;\\n            return {\\n              ...clip,\\n              startBeat: newStartBeat,\\n              duration: Math.max(0, newDuration)\\n            };\\n          }),\\n          effects: (timeline?.effects || []).filter((effect) => {\\n            const effectEnd = effect.startBeat + effect.duration;\\n            return effectEnd > customStartBeat && effect.startBeat < customEndBeat;\\n          }).map((effect) => {\\n            const newStartBeat = Math.max(0, effect.startBeat - customStartBeat);\\n            const effectStartInRange = Math.max(customStartBeat, effect.startBeat);\\n            const effectEndInRange = Math.min(customEndBeat, effect.startBeat + effect.duration);\\n            const newDuration = effectEndInRange - effectStartInRange;\\n            return {\\n              ...effect,\\n              startBeat: newStartBeat,\\n              duration: Math.max(0, newDuration)\\n            };\\n          }),\\n          envelopes: (timeline?.envelopes || []).filter((envelope) => {\\n            const envelopeEnd = envelope.startBeat + envelope.duration;\\n            return envelopeEnd > customStartBeat && envelope.startBeat < customEndBeat;\\n          }).map((envelope) => {\\n            const newStartBeat = Math.max(0, envelope.startBeat - customStartBeat);\\n            const envelopeStartInRange = Math.max(customStartBeat, envelope.startBeat);\\n            const envelopeEndInRange = Math.min(customEndBeat, envelope.startBeat + envelope.duration);\\n            const newDuration = envelopeEndInRange - envelopeStartInRange;\\n            return {\\n              ...envelope,\\n              startBeat: newStartBeat,\\n              duration: Math.max(0, newDuration)\\n            };\\n          }),\\n          totalLength: customEndBeat - customStartBeat\\n        };\\n        durationInBeats2 = customEndBeat - customStartBeat;\\n        timelineToUse = customTimeline;\\n      } else {\\n        durationInBeats2 = customEndBeat - customStartBeat;\\n        timelineToUse = null;\\n      }\\n    } else {\\n      durationInBeats2 = patternLength;\\n      timelineToUse = null;\\n    }\\n    const updateProgress = (progress) => {\\n      exportProgress = progress;\\n    };\\n    const audioBuffer = await recordProject(\\n      project.standaloneInstruments,\\n      bpm,\\n      project.baseMeterTrackId,\\n      durationInBeats2,\\n      updateProgress,\\n      timelineToUse,\\n      project.patterns,\\n      project.effects,\\n      project.envelopes,\\n      project.automation\\n    );\\n    const baseFilename = filename.replace(/\\\\.(wav|ogg|mp3)$/i, \\"\\");\\n    const extension = exportFormat === \\"wav\\" ? \\"wav\\" : exportFormat === \\"mp3\\" ? \\"mp3\\" : exportFormat === \\"ogg\\" ? \\"ogg\\" : \\"wav\\";\\n    const finalFilename = `${baseFilename}.${extension}`;\\n    await exportBuffer(audioBuffer, finalFilename, exportFormat);\\n    setTimeout(() => {\\n      onClose();\\n      isExporting = false;\\n      exportProgress = 0;\\n    }, 500);\\n  } catch (error) {\\n    console.error(\\"Export failed:\\", error);\\n    exportError = error instanceof Error ? error.message : String(error);\\n    isExporting = false;\\n  }\\n}\\nfunction handleClose() {\\n  if (!isExporting) {\\n    onClose();\\n  }\\n}\\n$: if (exportRange === \\"custom\\" && timeline && !isEditingEnd && !isEditingStart && !hasCustomEnd) {\\n  if (customEndBeat < timelineLength && customEndBeat === 16) {\\n    customEndBeat = timelineLength;\\n  }\\n}\\n<\/script>\\r\\n\\r\\n{#if isOpen}\\r\\n\\t<div \\r\\n\\t\\tclass=\\"export-dialog-overlay\\" \\r\\n\\t\\trole=\\"presentation\\"\\r\\n\\t\\ton:click={handleClose} \\r\\n\\t\\ton:keydown={(e) => {\\r\\n\\t\\t\\tif (e.key === \'Escape\') {\\r\\n\\t\\t\\t\\te.preventDefault();\\r\\n\\t\\t\\t\\thandleClose();\\r\\n\\t\\t\\t}\\r\\n\\t\\t}}\\r\\n\\t>\\r\\n\\t\\t<div class=\\"export-dialog\\" on:click|stopPropagation role=\\"dialog\\" aria-modal=\\"true\\" aria-label=\\"Export audio dialog\\">\\r\\n\\t\\t\\t<div class=\\"export-dialog-header\\">\\r\\n\\t\\t\\t\\t<h2>Export Audio</h2>\\r\\n\\t\\t\\t\\t<button class=\\"close-button\\" on:click={handleClose} disabled={isExporting} title=\\"Close\\">\\r\\n\\t\\t\\t\\t\\t<svg width=\\"16\\" height=\\"16\\" viewBox=\\"0 0 16 16\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\r\\n\\t\\t\\t\\t\\t\\t<path d=\\"M12 4L4 12M4 4L12 12\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\r\\n\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<div class=\\"export-dialog-content\\">\\r\\n\\t\\t\\t\\t{#if exportError}\\r\\n\\t\\t\\t\\t\\t<div class=\\"export-error\\">\\r\\n\\t\\t\\t\\t\\t\\t<svg width=\\"16\\" height=\\"16\\" viewBox=\\"0 0 16 16\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\"M8 4V8M8 12H8.01\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\r\\n\\t\\t\\t\\t\\t\\t\\t<circle cx=\\"8\\" cy=\\"8\\" r=\\"7\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\"/>\\r\\n\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t<span>{exportError}</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t<div class=\\"export-section\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\"export-label\\">Export Range</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\"export-options\\">\\r\\n\\t\\t\\t\\t\\t\\t{#if hasTimeline}\\r\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\"export-option\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\"radio\\" bind:group={exportRange} value=\\"full\\" disabled={isExporting} />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"option-content\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\"option-title\\">Full Timeline</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\"option-description\\">{timelineLength} beats ({durationDisplay})</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\t\\t<label class=\\"export-option\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\"radio\\" bind:group={exportRange} value=\\"custom\\" disabled={isExporting} />\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\"option-content\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\"option-title\\">Custom Range</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\"option-description\\">Select specific beats</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t{#if exportRange === \'custom\'}\\r\\n\\t\\t\\t\\t\\t<div class=\\"export-section\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\"export-label\\">Custom Range (beats)</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\"custom-range-inputs\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\"range-input-group\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\"custom-start-beat\\">Start</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"number-input-wrapper\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tid=\\"custom-start-beat\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype=\\"number\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbind:value={customStartBeat}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ton:focus={() => {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tisEditingStart = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\thasCustomStart = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ton:blur={() => {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tisEditingStart = false;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomStartBeat = validateStartBeat(customStartBeat);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Ensure end beat is still valid after start changes\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tif (customEndBeat <= customStartBeat) {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomEndBeat = customStartBeat + 0.25;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\thasCustomEnd = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmin=\\"0\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmax={timelineLength > 0 ? timelineLength - 0.25 : undefined}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tstep=\\"0.25\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isExporting}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"range-number-input\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"number-input-arrows\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype=\\"button\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"arrow-button arrow-up\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ton:click={() => {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\thasCustomStart = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newValue = Math.min(\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttimelineLength > 0 ? timelineLength - 0.25 : Infinity,\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomEndBeat - 0.25,\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomStartBeat + 0.25\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomStartBeat = validateStartBeat(newValue);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isExporting}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttitle=\\"Increase start beat\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<svg width=\\"10\\" height=\\"10\\" viewBox=\\"0 0 10 10\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M5 2L8 6H2L5 2Z\\" fill=\\"currentColor\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype=\\"button\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"arrow-button arrow-down\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ton:click={() => {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\thasCustomStart = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newValue = Math.max(0, customStartBeat - 0.25);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomStartBeat = validateStartBeat(newValue);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isExporting}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttitle=\\"Decrease start beat\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<svg width=\\"10\\" height=\\"10\\" viewBox=\\"0 0 10 10\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M5 8L2 4H8L5 8Z\\" fill=\\"currentColor\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\"range-input-group\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\"custom-end-beat\\">End</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"number-input-wrapper\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tid=\\"custom-end-beat\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype=\\"number\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbind:value={customEndBeat}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ton:focus={() => {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tisEditingEnd = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\thasCustomEnd = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\ton:blur={() => {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tisEditingEnd = false;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomEndBeat = validateEndBeat(customEndBeat);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmin={customStartBeat + 0.25}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmax={timelineLength > 0 ? timelineLength : undefined}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tstep=\\"0.25\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isExporting}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"range-number-input\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\"number-input-arrows\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype=\\"button\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"arrow-button arrow-up\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ton:click={() => {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\thasCustomEnd = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst max = timelineLength > 0 ? timelineLength : Infinity;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newValue = Math.min(max, customEndBeat + 0.25);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomEndBeat = validateEndBeat(newValue);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isExporting}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttitle=\\"Increase end beat\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<svg width=\\"10\\" height=\\"10\\" viewBox=\\"0 0 10 10\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M5 2L8 6H2L5 2Z\\" fill=\\"currentColor\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttype=\\"button\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"arrow-button arrow-down\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ton:click={() => {\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\thasCustomEnd = true;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newValue = Math.max(customStartBeat + 0.25, customEndBeat - 0.25);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tcustomEndBeat = validateEndBeat(newValue);\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdisabled={isExporting}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttitle=\\"Decrease end beat\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<svg width=\\"10\\" height=\\"10\\" viewBox=\\"0 0 10 10\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M5 8L2 4H8L5 8Z\\" fill=\\"currentColor\\" />\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</svg>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\"range-info\\">\\r\\n\\t\\t\\t\\t\\t\\t\\tDuration: {durationInBeats.toFixed(2)} beats ({durationDisplay})\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t<div class=\\"export-section\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\"export-label\\">Format</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\"format-selector\\" role=\\"radiogroup\\" aria-label=\\"Export format\\">\\r\\n\\t\\t\\t\\t\\t\\t<label class=\\"format-option\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\"radio\\" bind:group={exportFormat} value=\\"wav\\" disabled={isExporting} />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>WAV (Lossless)</span>\\r\\n\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t<label class=\\"format-option\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\"radio\\" bind:group={exportFormat} value=\\"mp3\\" disabled={isExporting} />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>MP3</span>\\r\\n\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t<label class=\\"format-option\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\"radio\\" bind:group={exportFormat} value=\\"ogg\\" disabled={isExporting} />\\r\\n\\t\\t\\t\\t\\t\\t\\t<span>OGG Vorbis</span>\\r\\n\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t<div class=\\"export-section\\">\\r\\n\\t\\t\\t\\t\\t<label class=\\"export-label\\" for=\\"filename-input\\">Filename</label>\\r\\n\\t\\t\\t\\t\\t<input \\r\\n\\t\\t\\t\\t\\t\\tid=\\"filename-input\\"\\r\\n\\t\\t\\t\\t\\t\\ttype=\\"text\\" \\r\\n\\t\\t\\t\\t\\t\\tbind:value={filename} \\r\\n\\t\\t\\t\\t\\t\\tplaceholder=\\"export.wav\\"\\r\\n\\t\\t\\t\\t\\t\\tdisabled={isExporting}\\r\\n\\t\\t\\t\\t\\t\\tclass=\\"filename-input\\"\\r\\n\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t<div class=\\"export-section\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\"export-info\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\"info-item\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"info-label\\">Duration:</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"info-value\\">{durationDisplay}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\"info-item\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"info-label\\">BPM:</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"info-value\\">{bpm}</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\"info-item\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"info-label\\">Format:</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\"info-value\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t{exportFormat === \'wav\' ? \'WAV (44.1kHz, 16-bit)\' : \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t exportFormat === \'mp3\' ? \'MP3\' :\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t exportFormat === \'ogg\' ? \'OGG Vorbis\' : \'WAV\'}\\r\\n\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t{#if isExporting}\\r\\n\\t\\t\\t\\t\\t<div class=\\"export-progress-section\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\"export-progress-bar\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\"export-progress-fill\\" style=\\"width: {exportProgress * 100}%\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\"export-progress-text\\">\\r\\n\\t\\t\\t\\t\\t\\t\\tExporting... {Math.round(exportProgress * 100)}%\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t{/if}\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t<div class=\\"export-dialog-footer\\">\\r\\n\\t\\t\\t\\t<button class=\\"export-button-cancel\\" on:click={handleClose} disabled={isExporting}>\\r\\n\\t\\t\\t\\t\\tCancel\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t<button \\r\\n\\t\\t\\t\\t\\tclass=\\"export-button-submit\\" \\r\\n\\t\\t\\t\\t\\ton:click={handleExport} \\r\\n\\t\\t\\t\\t\\tdisabled={isExporting || !filename.trim()}\\r\\n\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t{isExporting ? \'Exporting...\' : \'Export\'}\\r\\n\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n{/if}\\r\\n\\r\\n<style>\\r\\n\\t.export-dialog-overlay {\\r\\n\\t\\tposition: fixed;\\r\\n\\t\\ttop: 0;\\r\\n\\t\\tleft: 0;\\r\\n\\t\\tright: 0;\\r\\n\\t\\tbottom: 0;\\r\\n\\t\\tbackground: rgba(0, 0, 0, 0.7);\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\tz-index: 10000;\\r\\n\\t\\tbackdrop-filter: blur(4px);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-dialog {\\r\\n\\t\\tbackground: #1f1f1f;\\r\\n\\t\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t\\tborder-radius: 8px;\\r\\n\\t\\twidth: 90%;\\r\\n\\t\\tmax-width: 500px;\\r\\n\\t\\tmax-height: 90vh;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tbox-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-dialog-header {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\t\\tpadding: 20px 24px;\\r\\n\\t\\tborder-bottom: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-dialog-header h2 {\\r\\n\\t\\tmargin: 0;\\r\\n\\t\\tfont-size: 18px;\\r\\n\\t\\tfont-weight: 600;\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.close-button {\\r\\n\\t\\tbackground: transparent;\\r\\n\\t\\tborder: none;\\r\\n\\t\\tcolor: #b8b8b8;\\r\\n\\t\\tcursor: pointer;\\r\\n\\t\\tpadding: 4px;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t\\ttransition: all 0.2s ease;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.close-button:hover:not(:disabled) {\\r\\n\\t\\tbackground: rgba(255, 255, 255, 0.1);\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.close-button:disabled {\\r\\n\\t\\topacity: 0.3;\\r\\n\\t\\tcursor: not-allowed;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-dialog-content {\\r\\n\\t\\tpadding: 24px;\\r\\n\\t\\toverflow-y: auto;\\r\\n\\t\\tflex: 1;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-error {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tgap: 8px;\\r\\n\\t\\tpadding: 12px;\\r\\n\\t\\tbackground: rgba(255, 68, 68, 0.1);\\r\\n\\t\\tborder: 1px solid rgba(255, 68, 68, 0.3);\\r\\n\\t\\tborder-radius: 6px;\\r\\n\\t\\tcolor: #ff6b6b;\\r\\n\\t\\tfont-size: 13px;\\r\\n\\t\\tmargin-bottom: 20px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-error svg {\\r\\n\\t\\tflex-shrink: 0;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-section {\\r\\n\\t\\tmargin-bottom: 24px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-section:last-child {\\r\\n\\t\\tmargin-bottom: 0;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-label {\\r\\n\\t\\tdisplay: block;\\r\\n\\t\\tfont-size: 13px;\\r\\n\\t\\tfont-weight: 600;\\r\\n\\t\\tcolor: #b8b8b8;\\r\\n\\t\\tmargin-bottom: 12px;\\r\\n\\t\\ttext-transform: uppercase;\\r\\n\\t\\tletter-spacing: 0.5px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-options {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 8px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-option {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tgap: 12px;\\r\\n\\t\\tpadding: 12px;\\r\\n\\t\\tbackground: #2d2d2d;\\r\\n\\t\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t\\tborder-radius: 6px;\\r\\n\\t\\tcursor: pointer;\\r\\n\\t\\ttransition: all 0.2s ease;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-option:hover:not(:has(input:disabled)) {\\r\\n\\t\\tbackground: #333333;\\r\\n\\t\\tborder-color: rgba(255, 255, 255, 0.2);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-option input[type=\\"radio\\"] {\\r\\n\\t\\tmargin: 0;\\r\\n\\t\\tcursor: pointer;\\r\\n\\t\\taccent-color: #00ff88;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-option:has(input:checked) {\\r\\n\\t\\tbackground: #2d4d2d;\\r\\n\\t\\tborder-color: #00ff88;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-option:has(input:disabled) {\\r\\n\\t\\topacity: 0.5;\\r\\n\\t\\tcursor: not-allowed;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.option-content {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 4px;\\r\\n\\t\\tflex: 1;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.option-title {\\r\\n\\t\\tfont-size: 14px;\\r\\n\\t\\tfont-weight: 500;\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.option-description {\\r\\n\\t\\tfont-size: 12px;\\r\\n\\t\\tcolor: #b8b8b8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.custom-range-inputs {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tgap: 12px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group {\\r\\n\\t\\tflex: 1;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 6px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group label {\\r\\n\\t\\tfont-size: 12px;\\r\\n\\t\\tcolor: #b8b8b8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group .number-input-wrapper {\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\twidth: 100%;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-number-input {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\tbackground: #2d2d2d;\\r\\n\\t\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t\\tborder-radius: 6px;\\r\\n\\t\\tpadding: 8px 28px 8px 12px;\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t\\tfont-size: 14px;\\r\\n\\t\\ttransition: all 0.2s ease;\\r\\n\\t\\t-moz-appearance: textfield;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-number-input::-webkit-outer-spin-button,\\r\\n\\t.range-number-input::-webkit-inner-spin-button {\\r\\n\\t\\t-webkit-appearance: none;\\r\\n\\t\\tmargin: 0;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-number-input:focus {\\r\\n\\t\\toutline: none;\\r\\n\\t\\tborder-color: #00ff88;\\r\\n\\t\\tbackground: #333333;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-number-input:disabled {\\r\\n\\t\\topacity: 0.5;\\r\\n\\t\\tcursor: not-allowed;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group .number-input-arrows {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tright: 4px;\\r\\n\\t\\ttop: 50%;\\r\\n\\t\\ttransform: translateY(-50%);\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 2px;\\r\\n\\t\\tpointer-events: none;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group .arrow-button {\\r\\n\\t\\tbackground: transparent;\\r\\n\\t\\tborder: none;\\r\\n\\t\\tcolor: #b8b8b8;\\r\\n\\t\\tcursor: pointer;\\r\\n\\t\\tpadding: 2px;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\ttransition: all 0.2s ease;\\r\\n\\t\\tborder-radius: 2px;\\r\\n\\t\\twidth: 16px;\\r\\n\\t\\theight: 12px;\\r\\n\\t\\tpointer-events: auto;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group .arrow-button:hover:not(:disabled) {\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t\\tbackground: rgba(255, 255, 255, 0.1);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group .arrow-button:active:not(:disabled) {\\r\\n\\t\\tcolor: #7ab8ff;\\r\\n\\t\\tbackground: rgba(122, 184, 255, 0.2);\\r\\n\\t\\ttransform: scale(0.9);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group .arrow-button:disabled {\\r\\n\\t\\topacity: 0.4;\\r\\n\\t\\tcursor: not-allowed;\\r\\n\\t\\tbackground: transparent;\\r\\n\\t\\tcolor: #5a5a5a;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-input-group .arrow-button svg {\\r\\n\\t\\twidth: 10px;\\r\\n\\t\\theight: 10px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.range-info {\\r\\n\\t\\tmargin-top: 8px;\\r\\n\\t\\tfont-size: 12px;\\r\\n\\t\\tcolor: #b8b8b8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.filename-input {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\tbackground: #2d2d2d;\\r\\n\\t\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t\\tborder-radius: 6px;\\r\\n\\t\\tpadding: 10px 12px;\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t\\tfont-size: 14px;\\r\\n\\t\\ttransition: all 0.2s ease;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.filename-input:focus {\\r\\n\\t\\toutline: none;\\r\\n\\t\\tborder-color: #00ff88;\\r\\n\\t\\tbackground: #333333;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.filename-input:disabled {\\r\\n\\t\\topacity: 0.5;\\r\\n\\t\\tcursor: not-allowed;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.format-selector {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tgap: 8px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.format-option {\\r\\n\\t\\tflex: 1;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\tgap: 8px;\\r\\n\\t\\tpadding: 10px 12px;\\r\\n\\t\\tbackground: #2d2d2d;\\r\\n\\t\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t\\tborder-radius: 6px;\\r\\n\\t\\tcursor: pointer;\\r\\n\\t\\ttransition: all 0.2s ease;\\r\\n\\t\\tfont-size: 13px;\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.format-option:hover:not(:has(input:disabled)) {\\r\\n\\t\\tbackground: #333333;\\r\\n\\t\\tborder-color: rgba(255, 255, 255, 0.2);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.format-option input[type=\\"radio\\"] {\\r\\n\\t\\tmargin: 0;\\r\\n\\t\\tcursor: pointer;\\r\\n\\t\\taccent-color: #00ff88;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.format-option:has(input:checked) {\\r\\n\\t\\tbackground: #2d4d2d;\\r\\n\\t\\tborder-color: #00ff88;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.format-option:has(input:disabled) {\\r\\n\\t\\topacity: 0.5;\\r\\n\\t\\tcursor: not-allowed;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-info {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 8px;\\r\\n\\t\\tpadding: 12px;\\r\\n\\t\\tbackground: #2d2d2d;\\r\\n\\t\\tborder-radius: 6px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.info-item {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\t\\talign-items: center;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.info-label {\\r\\n\\t\\tfont-size: 13px;\\r\\n\\t\\tcolor: #b8b8b8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.info-value {\\r\\n\\t\\tfont-size: 13px;\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t\\tfont-weight: 500;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-progress-section {\\r\\n\\t\\tmargin-top: 20px;\\r\\n\\t\\tpadding-top: 20px;\\r\\n\\t\\tborder-top: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-progress-bar {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 6px;\\r\\n\\t\\tbackground: #2d2d2d;\\r\\n\\t\\tborder-radius: 3px;\\r\\n\\t\\toverflow: hidden;\\r\\n\\t\\tmargin-bottom: 8px;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-progress-fill {\\r\\n\\t\\theight: 100%;\\r\\n\\t\\tbackground: #00ff88;\\r\\n\\t\\tborder-radius: 3px;\\r\\n\\t\\ttransition: width 0.1s ease;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-progress-text {\\r\\n\\t\\ttext-align: center;\\r\\n\\t\\tfont-size: 12px;\\r\\n\\t\\tcolor: #b8b8b8;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-dialog-footer {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: flex-end;\\r\\n\\t\\tgap: 12px;\\r\\n\\t\\tpadding: 20px 24px;\\r\\n\\t\\tborder-top: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-button-cancel,\\r\\n\\t.export-button-submit {\\r\\n\\t\\tpadding: 10px 20px;\\r\\n\\t\\tborder-radius: 6px;\\r\\n\\t\\tfont-size: 14px;\\r\\n\\t\\tfont-weight: 500;\\r\\n\\t\\tcursor: pointer;\\r\\n\\t\\ttransition: all 0.2s ease;\\r\\n\\t\\tborder: none;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-button-cancel {\\r\\n\\t\\tbackground: #2d2d2d;\\r\\n\\t\\tcolor: #e8e8e8;\\r\\n\\t\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-button-cancel:hover:not(:disabled) {\\r\\n\\t\\tbackground: #333333;\\r\\n\\t\\tborder-color: rgba(255, 255, 255, 0.2);\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-button-submit {\\r\\n\\t\\tbackground: #00ff88;\\r\\n\\t\\tcolor: #1a1a1a;\\r\\n\\t\\tfont-weight: 600;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-button-submit:hover:not(:disabled) {\\r\\n\\t\\tbackground: #00cc6a;\\r\\n\\t}\\r\\n\\t\\r\\n\\t.export-button-cancel:disabled,\\r\\n\\t.export-button-submit:disabled {\\r\\n\\t\\topacity: 0.5;\\r\\n\\t\\tcursor: not-allowed;\\r\\n\\t}\\r\\n</style>\\r\\n\\r\\n"],"names":[],"mappings":"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"}'
};
const ExportDialog = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let bpm;
  let timeline;
  let hasTimeline;
  let timelineLength;
  let durationInBeats;
  let durationInSeconds;
  let durationMinutes;
  let durationSeconds;
  let durationDisplay;
  let { isOpen = false } = $$props;
  let { onClose } = $$props;
  let project;
  projectStore.subscribe((p) => project = p);
  let exportRange = hasTimeline ? "full" : "custom";
  let customStartBeat = 0;
  let customEndBeat = 16;
  let filename = "";
  if ($$props.isOpen === void 0 && $$bindings.isOpen && isOpen !== void 0) $$bindings.isOpen(isOpen);
  if ($$props.onClose === void 0 && $$bindings.onClose && onClose !== void 0) $$bindings.onClose(onClose);
  $$result.css.add(css$6);
  bpm = project?.bpm ?? 120;
  timeline = project?.timeline;
  hasTimeline = timeline && timeline.clips && timeline.clips.length > 0;
  timelineLength = timeline?.totalLength || 16;
  {
    if (timeline && timelineLength > 0 && true && true) {
      if (customEndBeat > timelineLength || customEndBeat === 16) {
        customEndBeat = timelineLength;
      }
    }
  }
  {
    if (exportRange === "custom" && timeline && true && true && true) {
      if (customEndBeat < timelineLength && customEndBeat === 16) {
        customEndBeat = timelineLength;
      }
    }
  }
  durationInBeats = (() => {
    if (exportRange === "full") {
      return timelineLength;
    } else {
      return customEndBeat - customStartBeat;
    }
  })();
  durationInSeconds = durationInBeats * 60 / bpm;
  durationMinutes = Math.floor(durationInSeconds / 60);
  durationSeconds = Math.floor(durationInSeconds % 60);
  durationDisplay = durationInSeconds < 60 ? `${durationInSeconds.toFixed(1)}s` : `${durationMinutes}:${durationSeconds.toString().padStart(2, "0")}`;
  {
    if (!filename && project) {
      const projectName = project.name || "untitled";
      const timestamp = /* @__PURE__ */ (/* @__PURE__ */ new Date()).toISOString().slice(0, 10).replace(/-/g, "");
      const extension = "wav";
      filename = `${projectName}-${timestamp}.${extension}`;
    }
  }
  {
    if (filename && project) {
      const baseName = filename.replace(/\.(wav|ogg|mp3)$/i, "");
      const extension = "wav";
      if (!filename.endsWith(`.${extension}`)) {
        filename = `${baseName}.${extension}`;
      }
    }
  }
  return `${isOpen ? `<div class="export-dialog-overlay svelte-s7zu5d" role="presentation"><div class="export-dialog svelte-s7zu5d" role="dialog" aria-modal="true" aria-label="Export audio dialog"><div class="export-dialog-header svelte-s7zu5d"><h2 class="svelte-s7zu5d" data-svelte-h="svelte-sw0w1y">Export Audio</h2> <button class="close-button svelte-s7zu5d" ${""} title="Close"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div> <div class="export-dialog-content svelte-s7zu5d">${``} <div class="export-section svelte-s7zu5d"><div class="export-label svelte-s7zu5d" data-svelte-h="svelte-h5agz5">Export Range</div> <div class="export-options svelte-s7zu5d">${hasTimeline ? `<label class="export-option svelte-s7zu5d"><input type="radio" value="full" ${""} class="svelte-s7zu5d"${"full" === exportRange ? add_attribute("checked", true, 1) : ""}> <div class="option-content svelte-s7zu5d"><span class="option-title svelte-s7zu5d" data-svelte-h="svelte-2lbufr">Full Timeline</span> <span class="option-description svelte-s7zu5d">${escape(timelineLength)} beats (${escape(durationDisplay)})</span></div></label>` : ``} <label class="export-option svelte-s7zu5d"><input type="radio" value="custom" ${""} class="svelte-s7zu5d"${"custom" === exportRange ? add_attribute("checked", true, 1) : ""}> <div class="option-content svelte-s7zu5d" data-svelte-h="svelte-t4japk"><span class="option-title svelte-s7zu5d">Custom Range</span> <span class="option-description svelte-s7zu5d">Select specific beats</span></div></label></div></div> ${exportRange === "custom" ? `<div class="export-section svelte-s7zu5d"><div class="export-label svelte-s7zu5d" data-svelte-h="svelte-76utfc">Custom Range (beats)</div> <div class="custom-range-inputs svelte-s7zu5d"><div class="range-input-group svelte-s7zu5d"><label for="custom-start-beat" class="svelte-s7zu5d" data-svelte-h="svelte-hpz28l">Start</label> <div class="number-input-wrapper svelte-s7zu5d"><input id="custom-start-beat" type="number" min="0"${add_attribute("max", timelineLength > 0 ? timelineLength - 0.25 : void 0, 0)} step="0.25" ${""} class="range-number-input svelte-s7zu5d"${add_attribute("value", customStartBeat, 0)}> <div class="number-input-arrows svelte-s7zu5d"><button type="button" class="arrow-button arrow-up svelte-s7zu5d" ${""} title="Increase start beat"><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-s7zu5d"><path d="M5 2L8 6H2L5 2Z" fill="currentColor"></path></svg></button> <button type="button" class="arrow-button arrow-down svelte-s7zu5d" ${""} title="Decrease start beat"><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-s7zu5d"><path d="M5 8L2 4H8L5 8Z" fill="currentColor"></path></svg></button></div></div></div> <div class="range-input-group svelte-s7zu5d"><label for="custom-end-beat" class="svelte-s7zu5d" data-svelte-h="svelte-1xoa7t9">End</label> <div class="number-input-wrapper svelte-s7zu5d"><input id="custom-end-beat" type="number"${add_attribute("min", customStartBeat + 0.25, 0)}${add_attribute("max", timelineLength > 0 ? timelineLength : void 0, 0)} step="0.25" ${""} class="range-number-input svelte-s7zu5d"${add_attribute("value", customEndBeat, 0)}> <div class="number-input-arrows svelte-s7zu5d"><button type="button" class="arrow-button arrow-up svelte-s7zu5d" ${""} title="Increase end beat"><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-s7zu5d"><path d="M5 2L8 6H2L5 2Z" fill="currentColor"></path></svg></button> <button type="button" class="arrow-button arrow-down svelte-s7zu5d" ${""} title="Decrease end beat"><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-s7zu5d"><path d="M5 8L2 4H8L5 8Z" fill="currentColor"></path></svg></button></div></div></div></div> <div class="range-info svelte-s7zu5d">Duration: ${escape(durationInBeats.toFixed(2))} beats (${escape(durationDisplay)})</div></div>` : ``} <div class="export-section svelte-s7zu5d"><div class="export-label svelte-s7zu5d" data-svelte-h="svelte-h1o7cl">Format</div> <div class="format-selector svelte-s7zu5d" role="radiogroup" aria-label="Export format"><label class="format-option svelte-s7zu5d"><input type="radio" value="wav" ${""} class="svelte-s7zu5d"${add_attribute("checked", true, 1)}> <span data-svelte-h="svelte-m52szp">WAV (Lossless)</span></label> <label class="format-option svelte-s7zu5d"><input type="radio" value="mp3" ${""} class="svelte-s7zu5d"${""}> <span data-svelte-h="svelte-1ybxcx8">MP3</span></label> <label class="format-option svelte-s7zu5d"><input type="radio" value="ogg" ${""} class="svelte-s7zu5d"${""}> <span data-svelte-h="svelte-1nhf45o">OGG Vorbis</span></label></div></div> <div class="export-section svelte-s7zu5d"><label class="export-label svelte-s7zu5d" for="filename-input" data-svelte-h="svelte-te977l">Filename</label> <input id="filename-input" type="text" placeholder="export.wav" ${""} class="filename-input svelte-s7zu5d"${add_attribute("value", filename, 0)}></div> <div class="export-section svelte-s7zu5d"><div class="export-info svelte-s7zu5d"><div class="info-item svelte-s7zu5d"><span class="info-label svelte-s7zu5d" data-svelte-h="svelte-du4i06">Duration:</span> <span class="info-value svelte-s7zu5d">${escape(durationDisplay)}</span></div> <div class="info-item svelte-s7zu5d"><span class="info-label svelte-s7zu5d" data-svelte-h="svelte-108c4vr">BPM:</span> <span class="info-value svelte-s7zu5d">${escape(bpm)}</span></div> <div class="info-item svelte-s7zu5d"><span class="info-label svelte-s7zu5d" data-svelte-h="svelte-e657cj">Format:</span> <span class="info-value svelte-s7zu5d">${escape(
    "WAV (44.1kHz, 16-bit)"
  )}</span></div></div></div> ${``}</div> <div class="export-dialog-footer svelte-s7zu5d"><button class="export-button-cancel svelte-s7zu5d" ${""}>Cancel</button> <button class="export-button-submit svelte-s7zu5d" ${!filename.trim() ? "disabled" : ""}>${escape("Export")}</button></div></div></div>` : ``}`;
});
const css$5 = {
  code: ".toolbar.svelte-1w9eo4a.svelte-1w9eo4a{position:fixed;top:0;left:0;right:0;height:60px;background:#252525;border-bottom:1px solid rgba(255, 255, 255, 0.1);display:flex;align-items:center;justify-content:space-between;padding:0 20px;z-index:1000;backdrop-filter:blur(10px)}.toolbar-left.svelte-1w9eo4a.svelte-1w9eo4a,.toolbar-center.svelte-1w9eo4a.svelte-1w9eo4a,.toolbar-right.svelte-1w9eo4a.svelte-1w9eo4a{display:flex;align-items:center;gap:20px;flex:1}.toolbar-center.svelte-1w9eo4a.svelte-1w9eo4a{justify-content:center}.toolbar-right.svelte-1w9eo4a.svelte-1w9eo4a{justify-content:flex-end}.play-button.svelte-1w9eo4a.svelte-1w9eo4a{min-width:44px;width:44px;height:44px;background:#2d2d2d;color:#e8e8e8;border:1px solid rgba(255, 255, 255, 0.1);border-radius:6px;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;padding:0}.play-button.svelte-1w9eo4a.svelte-1w9eo4a:hover{background:#333333;border-color:rgba(255, 255, 255, 0.2)}.play-button.svelte-1w9eo4a svg.svelte-1w9eo4a{width:16px;height:16px;flex-shrink:0}.bpm-control.svelte-1w9eo4a.svelte-1w9eo4a{display:flex;align-items:center;gap:8px;color:#b8b8b8;font-size:13px}.bpm-control.svelte-1w9eo4a label.svelte-1w9eo4a{font-weight:500;color:#b8b8b8}.number-input-wrapper.svelte-1w9eo4a.svelte-1w9eo4a{position:relative;display:flex;align-items:center}.bpm-control.svelte-1w9eo4a input.svelte-1w9eo4a,.base-meter-control.svelte-1w9eo4a input.svelte-1w9eo4a{width:70px;background:#2d2d2d;color:#e8e8e8;border:1px solid rgba(255, 255, 255, 0.1);border-radius:4px;padding:6px 28px 6px 8px;font-size:13px;text-align:center;transition:all 0.2s ease;-moz-appearance:textfield}.bpm-control.svelte-1w9eo4a input.svelte-1w9eo4a::-webkit-outer-spin-button,.bpm-control.svelte-1w9eo4a input.svelte-1w9eo4a::-webkit-inner-spin-button,.base-meter-control.svelte-1w9eo4a input.svelte-1w9eo4a::-webkit-outer-spin-button,.base-meter-control.svelte-1w9eo4a input.svelte-1w9eo4a::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.bpm-control.svelte-1w9eo4a input.svelte-1w9eo4a:focus,.base-meter-control.svelte-1w9eo4a input.svelte-1w9eo4a:focus{outline:none;border-color:#7ab8ff;background:#333333}.number-input-arrows.svelte-1w9eo4a.svelte-1w9eo4a{position:absolute;right:4px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:2px;pointer-events:none}.arrow-button.svelte-1w9eo4a.svelte-1w9eo4a{background:transparent;border:none;color:#b8b8b8;cursor:pointer;padding:2px;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;pointer-events:auto;border-radius:2px;width:16px;height:12px}.arrow-button.svelte-1w9eo4a.svelte-1w9eo4a:hover{color:#e8e8e8;background:rgba(255, 255, 255, 0.1)}.arrow-button.svelte-1w9eo4a.svelte-1w9eo4a:active{color:#7ab8ff;background:rgba(122, 184, 255, 0.2);transform:scale(0.9)}.arrow-button.svelte-1w9eo4a svg.svelte-1w9eo4a{width:10px;height:10px}.base-meter-control.svelte-1w9eo4a.svelte-1w9eo4a{display:flex;align-items:center;gap:8px;color:#b8b8b8;font-size:13px}.base-meter-control.svelte-1w9eo4a label.svelte-1w9eo4a{font-weight:500;color:#b8b8b8}.undo-redo-controls.svelte-1w9eo4a.svelte-1w9eo4a{display:flex;align-items:center;gap:4px;background:#2d2d2d;border:1px solid rgba(255, 255, 255, 0.1);border-radius:6px;padding:2px}.undo-button.svelte-1w9eo4a.svelte-1w9eo4a,.redo-button.svelte-1w9eo4a.svelte-1w9eo4a{background:transparent;color:#b8b8b8;border:none;border-radius:4px;padding:0;width:36px;height:36px;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;position:relative}.undo-button.svelte-1w9eo4a.svelte-1w9eo4a:hover:not(:disabled),.redo-button.svelte-1w9eo4a.svelte-1w9eo4a:hover:not(:disabled){background:#333333;color:#e8e8e8}.undo-button.svelte-1w9eo4a.svelte-1w9eo4a:active:not(:disabled),.redo-button.svelte-1w9eo4a.svelte-1w9eo4a:active:not(:disabled){background:#3a3a3a;transform:scale(0.95)}.undo-button.svelte-1w9eo4a.svelte-1w9eo4a:disabled,.redo-button.svelte-1w9eo4a.svelte-1w9eo4a:disabled{opacity:0.3;cursor:not-allowed}.undo-button.svelte-1w9eo4a svg.svelte-1w9eo4a,.redo-button.svelte-1w9eo4a svg.svelte-1w9eo4a{width:16px;height:16px}.export-button.svelte-1w9eo4a.svelte-1w9eo4a{background:#2d2d2d;color:#e8e8e8;border:1px solid rgba(255, 255, 255, 0.1);border-radius:6px;padding:8px 16px;cursor:pointer;font-weight:500;font-size:13px;transition:all 0.2s ease;display:flex;align-items:center;gap:6px}.export-button.svelte-1w9eo4a.svelte-1w9eo4a:hover{background:#333333;border-color:rgba(255, 255, 255, 0.2);color:#00ff88}.export-button.svelte-1w9eo4a.svelte-1w9eo4a:active{background:#3a3a3a;transform:scale(0.98)}.export-button.svelte-1w9eo4a svg.svelte-1w9eo4a{width:16px;height:16px;flex-shrink:0}.mute-solo-controls.svelte-1w9eo4a.svelte-1w9eo4a{display:flex;align-items:center;gap:6px;background:rgba(255, 255, 255, 0.05);border:1px solid rgba(255, 255, 255, 0.1);border-radius:8px;padding:4px}.mute-solo-controls.svelte-1w9eo4a .track-mute.svelte-1w9eo4a,.mute-solo-controls.svelte-1w9eo4a .track-solo.svelte-1w9eo4a{background:rgba(255, 255, 255, 0.08);color:#d0d0d0;border:1px solid rgba(255, 255, 255, 0.15);border-radius:6px;width:32px;height:32px;cursor:pointer;font-size:13px;font-weight:700;line-height:1;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;box-shadow:0 1px 3px rgba(0, 0, 0, 0.2)}.mute-solo-controls.svelte-1w9eo4a .track-mute.svelte-1w9eo4a:hover,.mute-solo-controls.svelte-1w9eo4a .track-solo.svelte-1w9eo4a:hover{background:rgba(255, 255, 255, 0.12);border-color:rgba(255, 255, 255, 0.25);color:#ffffff;transform:translateY(-1px);box-shadow:0 2px 6px rgba(0, 0, 0, 0.3)}.mute-solo-controls.svelte-1w9eo4a .track-mute.svelte-1w9eo4a:active,.mute-solo-controls.svelte-1w9eo4a .track-solo.svelte-1w9eo4a:active{transform:translateY(0);box-shadow:0 1px 2px rgba(0, 0, 0, 0.2)}.mute-solo-controls.svelte-1w9eo4a .track-mute.active.svelte-1w9eo4a{background:rgba(255, 107, 107, 0.25);color:#ff6b6b;border-color:rgba(255, 107, 107, 0.6);box-shadow:0 0 12px rgba(255, 107, 107, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3)}.mute-solo-controls.svelte-1w9eo4a .track-solo.active.svelte-1w9eo4a{background:rgba(255, 193, 7, 0.25);color:#ffc107;border-color:rgba(255, 193, 7, 0.6);box-shadow:0 0 12px rgba(255, 193, 7, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3)}.mute-solo-controls.svelte-1w9eo4a .track-mute.active.svelte-1w9eo4a:hover{background:rgba(255, 107, 107, 0.35);border-color:rgba(255, 107, 107, 0.8);box-shadow:0 0 16px rgba(255, 107, 107, 0.5), 0 2px 6px rgba(0, 0, 0, 0.3)}.mute-solo-controls.svelte-1w9eo4a .track-solo.active.svelte-1w9eo4a:hover{background:rgba(255, 193, 7, 0.35);border-color:rgba(255, 193, 7, 0.8);box-shadow:0 0 16px rgba(255, 193, 7, 0.5), 0 2px 6px rgba(0, 0, 0, 0.3)}.view-toggle.svelte-1w9eo4a.svelte-1w9eo4a{background:transparent;border:none;color:#b8b8b8;padding:12px 24px;cursor:pointer;font-size:13px;font-weight:500;transition:all 0.2s ease;border-bottom:2px solid transparent;position:relative}.view-toggle.svelte-1w9eo4a.svelte-1w9eo4a:hover{color:#e8e8e8;background:rgba(255, 255, 255, 0.05)}.view-toggle.active.svelte-1w9eo4a.svelte-1w9eo4a{color:#7ab8ff;border-bottom-color:#7ab8ff;background:rgba(122, 184, 255, 0.1)}",
  map: `{"version":3,"file":"Toolbar.svelte","sources":["Toolbar.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount, onDestroy } from \\"svelte\\";\\nimport { goto } from \\"$app/navigation\\";\\nimport { page } from \\"$app/stores\\";\\nimport { projectStore } from \\"$lib/stores/projectStore\\";\\nimport { engineStore } from \\"$lib/stores/engineStore\\";\\nimport { playbackStore } from \\"$lib/stores/playbackStore\\";\\nimport { selectionStore } from \\"$lib/stores/selectionStore\\";\\nimport { viewStore } from \\"$lib/stores/viewStore\\";\\nimport { EngineWorklet } from \\"$lib/audio/engine/EngineWorklet\\";\\nimport { updateEnginePatternTree, createUpdateContext } from \\"$lib/utils/patternTreeUpdater\\";\\nimport ExportDialog from \\"$lib/components/ExportDialog.svelte\\";\\nlet engine = null;\\nlet isPlaying = false;\\nlet transportState = \\"stop\\";\\nlet canUndo = false;\\nlet canRedo = false;\\nlet isMuted = false;\\nlet isSoloed = false;\\n$: project = $projectStore;\\n$: selection = $selectionStore;\\n$: viewMode = $viewStore;\\n$: bpm = project?.bpm ?? 120;\\n$: selectedTrack = project?.standaloneInstruments?.find((i) => i.id === selection.selectedTrackId);\\n$: selectedPattern = selection.selectedPatternId ? project?.patterns?.find((p) => p.id === selection.selectedPatternId) : null;\\n$: selectedInstrument = (() => {\\n  if (!project || !selectedPattern || !selection.selectedInstrumentId) return null;\\n  const _updatedAt = selectedPattern.updatedAt;\\n  const _instruments = selectedPattern.instruments;\\n  return projectStore.getPatternInstruments(selectedPattern).find((inst) => inst.id === selection.selectedInstrumentId);\\n})();\\n$: {\\n  const _project = project;\\n  const _selectedPattern = selectedPattern;\\n  const _selectedInstrument = selectedInstrument;\\n  const _selectedTrack = selectedTrack;\\n  if (_selectedTrack) {\\n    isMuted = _selectedTrack.mute ?? false;\\n    isSoloed = _selectedTrack.solo ?? false;\\n  } else if (_selectedPattern && _selectedInstrument) {\\n    isMuted = _selectedInstrument.mute ?? false;\\n    isSoloed = _selectedInstrument.solo ?? false;\\n  } else if (_selectedPattern) {\\n    isMuted = _selectedPattern.mute ?? false;\\n    isSoloed = _selectedPattern.solo ?? false;\\n  } else {\\n    isMuted = false;\\n    isSoloed = false;\\n  }\\n}\\nprojectStore.subscribeHistory((state) => {\\n  canUndo = state.canUndo;\\n  canRedo = state.canRedo;\\n});\\nonMount(() => {\\n  (async () => {\\n    engine = new EngineWorklet();\\n    await engine.initialize();\\n    await engine.resume();\\n    engineStore.set(engine);\\n    engine.onPlaybackUpdate((time, eventIds) => {\\n      playbackStore.updatePlayback(time, eventIds);\\n    });\\n  })();\\n  const handleReload = async () => {\\n    if (engine) {\\n      await new Promise((resolve) => setTimeout(resolve, 10));\\n      let project2;\\n      projectStore.subscribe((p) => project2 = p)();\\n      if (project2) {\\n        const currentViewMode = $viewStore;\\n        const wasPlaying = transportState === \\"play\\" && isPlaying;\\n        if (wasPlaying) {\\n          transportState = \\"play\\";\\n          isPlaying = true;\\n        }\\n        if (currentViewMode === \\"arrangement\\" && project2.timeline && project2.timeline.clips && project2.timeline.clips.length > 0) {\\n          await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, project2.timeline, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n          if (wasPlaying) {\\n            transportState = \\"stop\\";\\n            isPlaying = false;\\n            engine.setTransport(\\"stop\\", 0);\\n            transportState = \\"play\\";\\n            isPlaying = true;\\n            engine.setTransport(\\"play\\", 0);\\n          }\\n        } else {\\n          const currentPath = window.location.pathname;\\n          const patternMatch = currentPath.match(/\\\\/project\\\\/[^/]+\\\\/pattern\\\\/([^/]+)/);\\n          if (patternMatch && project2.patterns) {\\n            const patternId = patternMatch[1];\\n            const pattern = project2.patterns.find((p) => p.id === patternId);\\n            if (pattern) {\\n              const { projectStore: projectStore2 } = await import(\\"$lib/stores/projectStore\\");\\n              const patternInstruments = projectStore2.getPatternInstruments(pattern);\\n              const tracksForEngine = patternInstruments.map((inst) => ({\\n                id: \`__pattern_\${pattern.id}_\${inst.id}\`,\\n                // Unique ID for each instrument\\n                projectId: pattern.projectId,\\n                instrumentType: inst.instrumentType || \\"kick\\",\\n                patternTree: inst.patternTree,\\n                settings: inst.settings || {},\\n                instrumentSettings: inst.instrumentSettings || {},\\n                volume: inst.volume ?? 1,\\n                pan: inst.pan ?? 0,\\n                color: inst.color,\\n                mute: inst.mute ?? false,\\n                solo: inst.solo ?? false\\n              }));\\n              await engine.loadProject(tracksForEngine, bpm, tracksForEngine[0]?.id, void 0, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n              if (wasPlaying) {\\n                transportState = \\"play\\";\\n                isPlaying = true;\\n                engine.setTransport(\\"play\\");\\n              }\\n            } else {\\n              await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, void 0, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n              if (wasPlaying) {\\n                transportState = \\"play\\";\\n                isPlaying = true;\\n                engine.setTransport(\\"play\\");\\n              }\\n            }\\n          } else {\\n            await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, void 0, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n            if (wasPlaying) {\\n              transportState = \\"play\\";\\n              isPlaying = true;\\n              engine.setTransport(\\"play\\");\\n            }\\n          }\\n        }\\n      }\\n    }\\n  };\\n  window.addEventListener(\\"reloadProject\\", handleReload);\\n  const handleKeyDown = (e) => {\\n    if (e.key === \\" \\" && !(e.target instanceof HTMLInputElement) && !(e.target instanceof HTMLTextAreaElement)) {\\n      e.preventDefault();\\n      togglePlayback();\\n      return;\\n    }\\n    if ((e.ctrlKey || e.metaKey) && e.key === \\"z\\" && !e.shiftKey) {\\n      e.preventDefault();\\n      handleUndo();\\n    }\\n    if ((e.ctrlKey || e.metaKey) && (e.key === \\"y\\" || e.key === \\"z\\" && e.shiftKey)) {\\n      e.preventDefault();\\n      handleRedo();\\n    }\\n  };\\n  window.addEventListener(\\"keydown\\", handleKeyDown);\\n  return () => {\\n    window.removeEventListener(\\"reloadProject\\", handleReload);\\n    window.removeEventListener(\\"keydown\\", handleKeyDown);\\n  };\\n});\\nonDestroy(() => {\\n  engine?.destroy();\\n});\\nlet lastBpmUpdate = 0;\\n$: if (engine && project?.bpm && project.bpm !== lastBpmUpdate) {\\n  lastBpmUpdate = project.bpm;\\n  engine.setTempo(project.bpm);\\n}\\nlet lastViewMode = null;\\n$: if (engine && $viewStore && lastViewMode !== $viewStore) {\\n  (async () => {\\n    lastViewMode = $viewStore;\\n    await new Promise((resolve) => setTimeout(resolve, 100));\\n    let project2;\\n    projectStore.subscribe((p) => project2 = p)();\\n    if (project2) {\\n      const currentViewMode = $viewStore;\\n      if (currentViewMode === \\"arrangement\\" && project2.timeline && project2.timeline.clips && project2.timeline.clips.length > 0) {\\n        const patternIds = new Set(project2.timeline.clips.map((c) => c.patternId));\\n        for (const patternId of patternIds) {\\n          const pattern = project2.patterns?.find((p) => p.id === patternId);\\n          if (pattern) {\\n            const tempTrackId = \`__pattern_\${patternId}\`;\\n            const tempInstrument = project2.standaloneInstruments?.find((i) => i.id === tempTrackId);\\n            if (!tempInstrument) {\\n              const { projectStore: projectStore2 } = await import(\\"$lib/stores/projectStore\\");\\n              const newTempInstrument = {\\n                id: tempTrackId,\\n                projectId: pattern.projectId,\\n                instrumentType: pattern.instrumentType || \\"kick\\",\\n                patternTree: pattern.patternTree,\\n                settings: pattern.settings || {},\\n                instrumentSettings: pattern.instrumentSettings || {},\\n                volume: pattern.volume ?? 1,\\n                pan: pattern.pan ?? 0,\\n                color: pattern.color || \\"#00ffff\\",\\n                mute: pattern.mute ?? false,\\n                solo: pattern.solo ?? false\\n              };\\n              projectStore2.addStandaloneInstrument(newTempInstrument);\\n              projectStore2.subscribe((p) => project2 = p)();\\n            }\\n          }\\n        }\\n        projectStore.subscribe((p) => project2 = p)();\\n        await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, project2.timeline, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n        if (isPlaying) {\\n          transportState = \\"stop\\";\\n          engine.setTransport(\\"stop\\", 0);\\n          transportState = \\"play\\";\\n          engine.setTransport(\\"play\\", 0);\\n        }\\n      } else {\\n        await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, void 0, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n        if (isPlaying) {\\n          transportState = \\"play\\";\\n          engine.setTransport(\\"play\\");\\n        }\\n      }\\n    }\\n  })();\\n}\\nasync function togglePlayback() {\\n  if (!engine) return;\\n  await engine.resume();\\n  isPlaying = !isPlaying;\\n  transportState = isPlaying ? \\"play\\" : \\"stop\\";\\n  engine.setTransport(transportState);\\n  if (!isPlaying) {\\n    playbackStore.clear();\\n  }\\n  if (isPlaying) {\\n    let project2;\\n    projectStore.subscribe((p) => project2 = p)();\\n    if (project2) {\\n      const currentViewMode = $viewStore;\\n      if (currentViewMode === \\"arrangement\\" && project2.timeline && project2.timeline.clips && project2.timeline.clips.length > 0) {\\n        await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, project2.timeline, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n        transportState = \\"stop\\";\\n        isPlaying = false;\\n        engine.setTransport(\\"stop\\", 0);\\n        transportState = \\"play\\";\\n        isPlaying = true;\\n        engine.setTransport(\\"play\\", 0);\\n      } else {\\n        const currentPath = window.location.pathname;\\n        const patternMatch = currentPath.match(/\\\\/project\\\\/[^/]+\\\\/pattern\\\\/([^/]+)/);\\n        if (patternMatch && project2.patterns) {\\n          const patternId = patternMatch[1];\\n          const pattern = project2.patterns.find((p) => p.id === patternId);\\n          if (pattern) {\\n            let patternInstruments = [];\\n            if (pattern.instruments && Array.isArray(pattern.instruments) && pattern.instruments.length > 0) {\\n              patternInstruments = pattern.instruments;\\n            } else if (pattern.instrumentType && pattern.patternTree) {\\n              patternInstruments = [{\\n                id: pattern.id,\\n                instrumentType: pattern.instrumentType,\\n                patternTree: pattern.patternTree,\\n                settings: pattern.settings || {},\\n                instrumentSettings: pattern.instrumentSettings,\\n                color: pattern.color || \\"#7ab8ff\\",\\n                volume: pattern.volume ?? 1,\\n                pan: pattern.pan ?? 0,\\n                mute: pattern.mute,\\n                solo: pattern.solo\\n              }];\\n            }\\n            const patternTracks = patternInstruments.map((instrument, index) => ({\\n              id: \`__pattern_\${pattern.id}_\${instrument.id}\`,\\n              projectId: pattern.projectId,\\n              instrumentType: instrument.instrumentType || \\"kick\\",\\n              patternTree: instrument.patternTree,\\n              settings: instrument.settings || {},\\n              instrumentSettings: instrument.instrumentSettings || {},\\n              volume: instrument.volume ?? 1,\\n              pan: instrument.pan ?? 0,\\n              color: instrument.color || \\"#7ab8ff\\",\\n              mute: (pattern.mute ?? false) || (instrument.mute ?? false),\\n              solo: instrument.solo ?? false\\n            }));\\n            const allTracks = [...project2.standaloneInstruments || [], ...patternTracks];\\n            await engine.loadProject(allTracks, bpm, patternTracks[0]?.id || project2.baseMeterTrackId, void 0, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n            transportState = \\"play\\";\\n            isPlaying = true;\\n            engine.setTransport(\\"play\\");\\n          } else {\\n            await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, void 0, project2.patterns, project2.effects, project2.envelopes, project2.automation);\\n            transportState = \\"play\\";\\n            isPlaying = true;\\n            engine.setTransport(\\"play\\");\\n          }\\n        } else {\\n          await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, void 0, project2.patterns, project2.effects, project2.envelopes);\\n          engine.setTransport(\\"play\\");\\n        }\\n      }\\n    }\\n  }\\n}\\nfunction addNewTrack() {\\n  if (!project) {\\n    console.error(\\"Cannot add standalone instrument: No project exists\\", project);\\n    return;\\n  }\\n  const currentPath = typeof window !== \\"undefined\\" ? window.location.pathname : \\"\\";\\n  const patternMatch = currentPath.match(/\\\\/project\\\\/[^/]+\\\\/pattern\\\\/([^/]+)/);\\n  if (patternMatch) {\\n    try {\\n      const newInstrument = projectStore.createNewStandaloneInstrument(project.id, \\"kick\\");\\n      console.log(\\"Created new standalone instrument:\\", newInstrument.id);\\n      projectStore.addStandaloneInstrument(newInstrument);\\n      console.log(\\"Standalone instrument added, project should now have\\", (project.standaloneInstruments?.length || 0) + 1, \\"instruments\\");\\n    } catch (error) {\\n      console.error(\\"Error creating standalone instrument:\\", error);\\n    }\\n  } else {\\n    try {\\n      const newInstrument = projectStore.createNewStandaloneInstrument(project.id, \\"kick\\");\\n      console.log(\\"Created new standalone instrument:\\", newInstrument.id);\\n      projectStore.addStandaloneInstrument(newInstrument);\\n      console.log(\\"Standalone instrument added, project should now have\\", (project.standaloneInstruments?.length || 0) + 1, \\"instruments\\");\\n    } catch (error) {\\n      console.error(\\"Error creating standalone instrument:\\", error);\\n    }\\n  }\\n}\\nasync function handleUndo() {\\n  if (!canUndo) return;\\n  const undone = projectStore.undo();\\n  if (undone && engine && isPlaying) {\\n    let project2;\\n    projectStore.subscribe((p) => project2 = p)();\\n    if (project2) {\\n      await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, project2.timeline, project2.patterns, project2.effects, project2.envelopes);\\n    }\\n  }\\n  window.dispatchEvent(new CustomEvent(\\"reloadProject\\"));\\n}\\nasync function handleRedo() {\\n  if (!canRedo) return;\\n  const redone = projectStore.redo();\\n  if (redone && engine && isPlaying) {\\n    let project2;\\n    projectStore.subscribe((p) => project2 = p)();\\n    if (project2) {\\n      await engine.loadProject(project2.standaloneInstruments || [], bpm, project2.baseMeterTrackId, project2.timeline, project2.patterns, project2.effects, project2.envelopes);\\n    }\\n  }\\n  window.dispatchEvent(new CustomEvent(\\"reloadProject\\"));\\n}\\nfunction toggleMute() {\\n  if (selectedPattern && selection.selectedInstrumentId) {\\n    const currentMuteState = selectedInstrument?.mute ?? false;\\n    const newMuteState = !currentMuteState;\\n    projectStore.updatePatternInstrument(selectedPattern.id, selection.selectedInstrumentId, { mute: newMuteState });\\n    if (engine) {\\n      const patternTrackId = \`__pattern_\${selectedPattern.id}_\${selection.selectedInstrumentId}\`;\\n      engine.updateTrackMute(patternTrackId, newMuteState);\\n    }\\n  } else if (selectedTrack) {\\n    const currentMuteState = selectedTrack.mute ?? false;\\n    const newMuteState = !currentMuteState;\\n    projectStore.updateStandaloneInstrument(selectedTrack.id, { mute: newMuteState });\\n    if (engine) {\\n      engine.updateTrackMute(selectedTrack.id, newMuteState);\\n    }\\n  }\\n}\\nfunction toggleSolo() {\\n  if (selectedPattern && selection.selectedInstrumentId) {\\n    const currentSoloState = selectedInstrument?.solo ?? false;\\n    const newSoloState = !currentSoloState;\\n    if (newSoloState && engine) {\\n      const patternInstruments = projectStore.getPatternInstruments(selectedPattern);\\n      for (const instrument of patternInstruments) {\\n        if (instrument.id !== selection.selectedInstrumentId && instrument.solo) {\\n          projectStore.updatePatternInstrument(selectedPattern.id, instrument.id, { solo: false });\\n          const patternTrackId = \`__pattern_\${selectedPattern.id}_\${instrument.id}\`;\\n          engine.updateTrackSolo(patternTrackId, false);\\n        }\\n      }\\n    }\\n    projectStore.updatePatternInstrument(selectedPattern.id, selection.selectedInstrumentId, { solo: newSoloState });\\n    if (engine) {\\n      const patternTrackId = \`__pattern_\${selectedPattern.id}_\${selection.selectedInstrumentId}\`;\\n      engine.updateTrackSolo(patternTrackId, newSoloState);\\n    }\\n  } else if (selectedTrack) {\\n    const currentSoloState = selectedTrack.solo ?? false;\\n    const newSoloState = !currentSoloState;\\n    if (newSoloState && project && engine) {\\n      for (const instrument of project.standaloneInstruments || []) {\\n        if (instrument.id !== selectedTrack.id && instrument.solo) {\\n          projectStore.updateStandaloneInstrument(instrument.id, { solo: false });\\n          engine.updateTrackSolo(instrument.id, false);\\n        }\\n      }\\n    }\\n    projectStore.updateStandaloneInstrument(selectedTrack.id, { solo: newSoloState });\\n    if (engine) {\\n      engine.updateTrackSolo(selectedTrack.id, newSoloState);\\n    }\\n  }\\n}\\nlet showExportDialog = false;\\nfunction handleExport() {\\n  showExportDialog = true;\\n}\\nfunction closeExportDialog() {\\n  showExportDialog = false;\\n}\\n<\/script>\\n\\n<div class=\\"toolbar\\">\\n\\t<div class=\\"toolbar-left\\">\\n\\t\\t{#if viewMode === 'arrangement' || (typeof window !== 'undefined' && window.location.pathname.match(/\\\\/project\\\\/[^/]+\\\\/pattern\\\\/([^/]+)/))}\\n\\t\\t\\t<div class=\\"bpm-control\\">\\n\\t\\t\\t\\t<label for=\\"bpm-input\\">BPM</label>\\n\\t\\t\\t\\t<div class=\\"number-input-wrapper\\">\\n\\t\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\t\\tid=\\"bpm-input\\"\\n\\t\\t\\t\\t\\t\\ttype=\\"number\\"\\n\\t\\t\\t\\t\\t\\tbind:value={bpm}\\n\\t\\t\\t\\t\\t\\tmin=\\"20\\"\\n\\t\\t\\t\\t\\t\\tmax=\\"500\\"\\n\\t\\t\\t\\t\\t\\ton:input={() => {\\n\\t\\t\\t\\t\\t\\t\\t// Update project store immediately when BPM changes\\n\\t\\t\\t\\t\\t\\t\\tprojectStore.update((p) => {\\n\\t\\t\\t\\t\\t\\t\\t\\tif (p) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tp.bpm = bpm;\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\treturn p;\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t// Update engine tempo immediately\\n\\t\\t\\t\\t\\t\\t\\tif (engine) {\\n\\t\\t\\t\\t\\t\\t\\t\\tengine.setTempo(bpm);\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t<div class=\\"number-input-arrows\\">\\n\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\ttype=\\"button\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"arrow-button arrow-up\\"\\n\\t\\t\\t\\t\\t\\t\\ton:click={() => {\\n\\t\\t\\t\\t\\t\\t\\t\\tconst newBpm = Math.min(500, bpm + 1);\\n\\t\\t\\t\\t\\t\\t\\t\\tbpm = newBpm;\\n\\t\\t\\t\\t\\t\\t\\t\\tprojectStore.update((p) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (p) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tp.bpm = newBpm;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn p;\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\tif (engine) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tengine.setTempo(newBpm);\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\ttitle=\\"Increase BPM\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\"10\\" height=\\"10\\" viewBox=\\"0 0 10 10\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M5 2L8 6H2L5 2Z\\" fill=\\"currentColor\\"/>\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\ttype=\\"button\\"\\n\\t\\t\\t\\t\\t\\t\\tclass=\\"arrow-button arrow-down\\"\\n\\t\\t\\t\\t\\t\\t\\ton:click={() => {\\n\\t\\t\\t\\t\\t\\t\\t\\tconst newBpm = Math.max(20, bpm - 1);\\n\\t\\t\\t\\t\\t\\t\\t\\tbpm = newBpm;\\n\\t\\t\\t\\t\\t\\t\\t\\tprojectStore.update((p) => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (p) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tp.bpm = newBpm;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\treturn p;\\n\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\tif (engine) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tengine.setTempo(newBpm);\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\ttitle=\\"Decrease BPM\\"\\n\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t<svg width=\\"10\\" height=\\"10\\" viewBox=\\"0 0 10 10\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M5 8L2 4H8L5 8Z\\" fill=\\"currentColor\\"/>\\n\\t\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\t\\t{#if typeof window !== 'undefined' && window.location.pathname.match(/\\\\/project\\\\/[^/]+\\\\/pattern\\\\/([^/]+)/)}\\n\\t\\t\\t{@const patternMatch = window.location.pathname.match(/\\\\/project\\\\/[^/]+\\\\/pattern\\\\/([^/]+)/)}\\n\\t\\t\\t{@const currentPattern = patternMatch ? project?.patterns?.find((p) => p.id === patternMatch[1]) : null}\\n\\t\\t\\t{#if currentPattern}\\n\\t\\t\\t\\t<div class=\\"base-meter-control\\">\\n\\t\\t\\t\\t\\t<label for=\\"base-meter-input\\">Base Meter</label>\\n\\t\\t\\t\\t\\t<div class=\\"number-input-wrapper\\">\\n\\t\\t\\t\\t\\t\\t<input\\n\\t\\t\\t\\t\\t\\t\\tid=\\"base-meter-input\\"\\n\\t\\t\\t\\t\\t\\t\\ttype=\\"number\\"\\n\\t\\t\\t\\t\\t\\t\\tvalue={currentPattern.baseMeter || 4}\\n\\t\\t\\t\\t\\t\\t\\tmin=\\"1\\"\\n\\t\\t\\t\\t\\t\\t\\tmax=\\"32\\"\\n\\t\\t\\t\\t\\t\\t\\ton:change={(e) => {\\n\\t\\t\\t\\t\\t\\t\\t\\tconst baseMeter = parseInt(e.currentTarget.value) || 4;\\n\\t\\t\\t\\t\\t\\t\\t\\tif (currentPattern) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t// Update only the baseMeter property - root node divisions remain independent\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t// Base meter (X) and root division (Y) are separate: meter = Y/X\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tprojectStore.updatePattern(currentPattern.id, { \\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbaseMeter\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t// Small delay to ensure store update completes, then reload project\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\twindow.dispatchEvent(new CustomEvent('reloadProject'));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}, 50);\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\ttitle=\\"Base meter (denominator X in Y/X time signature). Root node division (Y) is independent.\\"\\n\\t\\t\\t\\t\\t\\t/>\\n\\t\\t\\t\\t\\t\\t<div class=\\"number-input-arrows\\">\\n\\t\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\t\\ttype=\\"button\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"arrow-button arrow-up\\"\\n\\t\\t\\t\\t\\t\\t\\t\\ton:click={() => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tconst currentBaseMeter = currentPattern.baseMeter || 4;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newBaseMeter = Math.min(32, currentBaseMeter + 1);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (currentPattern) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Update only the baseMeter property - root node divisions remain independent\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tprojectStore.updatePattern(currentPattern.id, { \\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbaseMeter: newBaseMeter\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Small delay to ensure store update completes, then reload project\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\twindow.dispatchEvent(new CustomEvent('reloadProject'));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}, 50);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle=\\"Increase Base Meter\\"\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t<svg width=\\"10\\" height=\\"10\\" viewBox=\\"0 0 10 10\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M5 2L8 6H2L5 2Z\\" fill=\\"currentColor\\"/>\\n\\t\\t\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\t\\t\\t\\ttype=\\"button\\"\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\"arrow-button arrow-down\\"\\n\\t\\t\\t\\t\\t\\t\\t\\ton:click={() => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tconst currentBaseMeter = currentPattern.baseMeter || 4;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tconst newBaseMeter = Math.max(1, currentBaseMeter - 1);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tif (currentPattern) {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Update only the baseMeter property - root node divisions remain independent\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tprojectStore.updatePattern(currentPattern.id, { \\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbaseMeter: newBaseMeter\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t// Small delay to ensure store update completes, then reload project\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\twindow.dispatchEvent(new CustomEvent('reloadProject'));\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t}, 50);\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle=\\"Decrease Base Meter\\"\\n\\t\\t\\t\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t\\t\\t\\t<svg width=\\"10\\" height=\\"10\\" viewBox=\\"0 0 10 10\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<path d=\\"M5 8L2 4H8L5 8Z\\" fill=\\"currentColor\\"/>\\n\\t\\t\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t{/if}\\n\\t\\t{/if}\\n\\t\\t{#if (typeof window !== 'undefined' && window.location.pathname.match(/\\\\/project\\\\/[^/]+\\\\/pattern\\\\/([^/]+)/)) && selection.isRoot && selectedPattern && selection.selectedInstrumentId}\\n\\t\\t\\t<div class=\\"mute-solo-controls\\">\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\tclass=\\"track-mute {isMuted ? 'active' : ''}\\"\\n\\t\\t\\t\\t\\ton:click={toggleMute}\\n\\t\\t\\t\\t\\ttitle={isMuted ? 'Unmute track' : 'Mute track'}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\tM\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\tclass=\\"track-solo {isSoloed ? 'active' : ''}\\"\\n\\t\\t\\t\\t\\ton:click={toggleSolo}\\n\\t\\t\\t\\t\\ttitle={isSoloed ? 'Unsolo track' : 'Solo track'}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\tS\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\t</div>\\n\\n\\t<div class=\\"toolbar-center\\">\\n\\t\\t<button \\n\\t\\t\\tclass=\\"view-toggle {viewMode === 'arrangement' ? 'active' : ''}\\"\\n\\t\\t\\ton:click={async () => {\\n\\t\\t\\t\\tconst { loadingStore } = await import('$lib/stores/loadingStore');\\n\\t\\t\\t\\tloadingStore.startLoading('Switching to arrangement view...');\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t// If we're in pattern editor, navigate to arrangement view\\n\\t\\t\\t\\tconst currentPath = typeof window !== 'undefined' ? window.location.pathname : '';\\n\\t\\t\\t\\tconst patternMatch = currentPath.match(/\\\\/project\\\\/([^/]+)\\\\/pattern\\\\/([^/]+)/);\\n\\t\\t\\t\\tif (patternMatch) {\\n\\t\\t\\t\\t\\tconst projectId = patternMatch[1];\\n\\t\\t\\t\\t\\tconst patternId = patternMatch[2];\\n\\t\\t\\t\\t\\t// Store pattern ID for later return\\n\\t\\t\\t\\t\\tviewStore.setCurrentPatternId(patternId);\\n\\t\\t\\t\\t\\t// Navigate to arrangement view\\n\\t\\t\\t\\t\\tawait goto(\`/project/\${projectId}\`);\\n\\t\\t\\t\\t\\tviewStore.setArrangement();\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tviewStore.setArrangement();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t// Stop loading after a short delay to allow page to render\\n\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\tloadingStore.stopLoading();\\n\\t\\t\\t\\t}, 200);\\n\\t\\t\\t}}\\n\\t\\t\\ttitle=\\"Arrangement View\\"\\n\\t\\t>\\n\\t\\t\\tArrangement\\n\\t\\t</button>\\n\\t\\t<button class=\\"play-button\\" on:click={togglePlayback} title={isPlaying ? 'Pause' : 'Play'}>\\n\\t\\t\\t{#if isPlaying}\\n\\t\\t\\t\\t<!-- Pause icon -->\\n\\t\\t\\t\\t<svg width=\\"16\\" height=\\"16\\" viewBox=\\"0 0 16 16\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t<rect x=\\"5\\" y=\\"3\\" width=\\"2\\" height=\\"10\\" fill=\\"currentColor\\"/>\\n\\t\\t\\t\\t\\t<rect x=\\"9\\" y=\\"3\\" width=\\"2\\" height=\\"10\\" fill=\\"currentColor\\"/>\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t{:else}\\n\\t\\t\\t\\t<!-- Play icon -->\\n\\t\\t\\t\\t<svg width=\\"16\\" height=\\"16\\" viewBox=\\"0 0 16 16\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t<path d=\\"M5 3L13 8L5 13V3Z\\" fill=\\"currentColor\\"/>\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t{/if}\\n\\t\\t</button>\\n\\t\\t<button \\n\\t\\t\\tclass=\\"view-toggle {viewMode === 'pattern' ? 'active' : ''}\\"\\n\\t\\t\\ton:click={async () => {\\n\\t\\t\\t\\tconst { loadingStore } = await import('$lib/stores/loadingStore');\\n\\t\\t\\t\\tloadingStore.startLoading('Switching to pattern view...');\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tconst currentPath = typeof window !== 'undefined' ? window.location.pathname : '';\\n\\t\\t\\t\\tconst projectMatch = currentPath.match(/\\\\/project\\\\/([^/]+)/);\\n\\t\\t\\t\\tif (projectMatch) {\\n\\t\\t\\t\\t\\tconst projectId = projectMatch[1];\\n\\t\\t\\t\\t\\t// Always navigate to pattern list view (not pattern editor)\\n\\t\\t\\t\\t\\t// If we're in pattern editor, navigate back to project page\\n\\t\\t\\t\\t\\tconst patternMatch = currentPath.match(/\\\\/project\\\\/([^/]+)\\\\/pattern\\\\/([^/]+)/);\\n\\t\\t\\t\\t\\tif (patternMatch) {\\n\\t\\t\\t\\t\\t\\t// We're in pattern editor, navigate to project page\\n\\t\\t\\t\\t\\t\\tawait goto(\`/project/\${projectId}\`);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t// Set view mode to pattern (shows pattern list)\\n\\t\\t\\t\\t\\tviewStore.setPattern();\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tviewStore.setPattern();\\n\\t\\t\\t\\t\\twindow.dispatchEvent(new CustomEvent('switchToPatternView'));\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t// Stop loading after a short delay to allow page to render\\n\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\tloadingStore.stopLoading();\\n\\t\\t\\t\\t}, 200);\\n\\t\\t\\t}}\\n\\t\\t\\ttitle=\\"Pattern View\\"\\n\\t\\t>\\n\\t\\t\\tPatterns\\n\\t\\t</button>\\n\\t</div>\\n\\n\\t<div class=\\"toolbar-right\\">\\n\\t\\t{#if viewMode === 'arrangement' || (typeof window !== 'undefined' && window.location.pathname.match(/\\\\/project\\\\/[^/]+\\\\/pattern\\\\/([^/]+)/))}\\n\\t\\t\\t<div class=\\"undo-redo-controls\\">\\n\\t\\t\\t\\t<button \\n\\t\\t\\t\\t\\tclass=\\"undo-button\\" \\n\\t\\t\\t\\t\\ton:click={handleUndo}\\n\\t\\t\\t\\t\\tdisabled={!canUndo}\\n\\t\\t\\t\\t\\ttitle=\\"Undo (Ctrl+Z)\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<svg width=\\"16\\" height=\\"16\\" viewBox=\\"0 0 16 16\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t\\t<path d=\\"M2 8C2 10.2091 3.79086 12 6 12H12\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\n\\t\\t\\t\\t\\t\\t<path d=\\"M5 5L2 8L5 11\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\n\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t<button \\n\\t\\t\\t\\t\\tclass=\\"redo-button\\" \\n\\t\\t\\t\\t\\ton:click={handleRedo}\\n\\t\\t\\t\\t\\tdisabled={!canRedo}\\n\\t\\t\\t\\t\\ttitle=\\"Redo (Ctrl+Shift+Z or Ctrl+Y)\\"\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<svg width=\\"16\\" height=\\"16\\" viewBox=\\"0 0 16 16\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t\\t<path d=\\"M14 8C14 5.79086 12.2091 4 10 4H4\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\n\\t\\t\\t\\t\\t\\t<path d=\\"M11 11L14 8L11 5\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\n\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t</div>\\n\\t\\t{/if}\\n\\t\\t{#if viewMode === 'arrangement'}\\n\\t\\t\\t<button class=\\"export-button\\" on:click={handleExport} title=\\"Export to WAV\\">\\n\\t\\t\\t\\t<svg width=\\"16\\" height=\\"16\\" viewBox=\\"0 0 16 16\\" fill=\\"none\\" xmlns=\\"http://www.w3.org/2000/svg\\">\\n\\t\\t\\t\\t\\t<path d=\\"M8 2V10M8 10L5 7M8 10L11 7\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\n\\t\\t\\t\\t\\t<path d=\\"M2 12V13C2 14.1046 2.89543 15 4 15H12C13.1046 15 14 14.1046 14 13V12\\" stroke=\\"currentColor\\" stroke-width=\\"1.5\\" stroke-linecap=\\"round\\" stroke-linejoin=\\"round\\"/>\\n\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\tExport\\n\\t\\t\\t</button>\\n\\t\\t{/if}\\n\\t</div>\\n</div>\\n\\n<ExportDialog isOpen={showExportDialog} onClose={closeExportDialog} />\\n\\n<style>.toolbar {\\r\\n\\tposition: fixed;\\r\\n\\ttop: 0;\\r\\n\\tleft: 0;\\r\\n\\tright: 0;\\r\\n\\theight: 60px;\\r\\n\\tbackground: #252525;\\r\\n\\tborder-bottom: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: space-between;\\r\\n\\tpadding: 0 20px;\\r\\n\\tz-index: 1000;\\r\\n\\tbackdrop-filter: blur(10px);\\r\\n}\\r\\n\\r\\n.toolbar-left,\\r\\n.toolbar-center,\\r\\n.toolbar-right {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tgap: 20px;\\r\\n\\tflex: 1;\\r\\n}\\r\\n\\r\\n.toolbar-center {\\r\\n\\tjustify-content: center;\\r\\n}\\r\\n\\r\\n.toolbar-right {\\r\\n\\tjustify-content: flex-end;\\r\\n}\\r\\n\\r\\n.play-button {\\r\\n\\tmin-width: 44px;\\r\\n\\twidth: 44px;\\r\\n\\theight: 44px;\\r\\n\\tbackground: #2d2d2d;\\r\\n\\tcolor: #e8e8e8;\\r\\n\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\tborder-radius: 6px;\\r\\n\\tcursor: pointer;\\r\\n\\ttransition: all 0.2s ease;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\tpadding: 0;\\r\\n}\\r\\n\\r\\n.play-button:hover {\\r\\n\\tbackground: #333333;\\r\\n\\tborder-color: rgba(255, 255, 255, 0.2);\\r\\n}\\r\\n\\r\\n.play-button svg {\\r\\n\\twidth: 16px;\\r\\n\\theight: 16px;\\r\\n\\tflex-shrink: 0;\\r\\n}\\r\\n\\r\\n.bpm-control {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tgap: 8px;\\r\\n\\tcolor: #b8b8b8;\\r\\n\\tfont-size: 13px;\\r\\n}\\r\\n\\r\\n.bpm-control label {\\r\\n\\tfont-weight: 500;\\r\\n\\tcolor: #b8b8b8;\\r\\n}\\r\\n\\r\\n.number-input-wrapper {\\r\\n\\tposition: relative;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n}\\r\\n\\r\\n.bpm-control input,\\r\\n.base-meter-control input {\\r\\n\\twidth: 70px;\\r\\n\\tbackground: #2d2d2d;\\r\\n\\tcolor: #e8e8e8;\\r\\n\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\tborder-radius: 4px;\\r\\n\\tpadding: 6px 28px 6px 8px;\\r\\n\\tfont-size: 13px;\\r\\n\\ttext-align: center;\\r\\n\\ttransition: all 0.2s ease;\\r\\n\\t-moz-appearance: textfield;\\r\\n}\\r\\n\\r\\n.bpm-control input::-webkit-outer-spin-button,\\r\\n.bpm-control input::-webkit-inner-spin-button,\\r\\n.base-meter-control input::-webkit-outer-spin-button,\\r\\n.base-meter-control input::-webkit-inner-spin-button {\\r\\n\\t-webkit-appearance: none;\\r\\n\\tmargin: 0;\\r\\n}\\r\\n\\r\\n.bpm-control input:focus,\\r\\n.base-meter-control input:focus {\\r\\n\\toutline: none;\\r\\n\\tborder-color: #7ab8ff;\\r\\n\\tbackground: #333333;\\r\\n}\\r\\n\\r\\n.number-input-arrows {\\r\\n\\tposition: absolute;\\r\\n\\tright: 4px;\\r\\n\\ttop: 50%;\\r\\n\\ttransform: translateY(-50%);\\r\\n\\tdisplay: flex;\\r\\n\\tflex-direction: column;\\r\\n\\tgap: 2px;\\r\\n\\tpointer-events: none;\\r\\n}\\r\\n\\r\\n.arrow-button {\\r\\n\\tbackground: transparent;\\r\\n\\tborder: none;\\r\\n\\tcolor: #b8b8b8;\\r\\n\\tcursor: pointer;\\r\\n\\tpadding: 2px;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\ttransition: all 0.2s ease;\\r\\n\\tpointer-events: auto;\\r\\n\\tborder-radius: 2px;\\r\\n\\twidth: 16px;\\r\\n\\theight: 12px;\\r\\n}\\r\\n\\r\\n.arrow-button:hover {\\r\\n\\tcolor: #e8e8e8;\\r\\n\\tbackground: rgba(255, 255, 255, 0.1);\\r\\n}\\r\\n\\r\\n.arrow-button:active {\\r\\n\\tcolor: #7ab8ff;\\r\\n\\tbackground: rgba(122, 184, 255, 0.2);\\r\\n\\ttransform: scale(0.9);\\r\\n}\\r\\n\\r\\n.arrow-button svg {\\r\\n\\twidth: 10px;\\r\\n\\theight: 10px;\\r\\n}\\r\\n\\r\\n.base-meter-control {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tgap: 8px;\\r\\n\\tcolor: #b8b8b8;\\r\\n\\tfont-size: 13px;\\r\\n}\\r\\n\\r\\n.base-meter-control label {\\r\\n\\tfont-weight: 500;\\r\\n\\tcolor: #b8b8b8;\\r\\n}\\r\\n\\r\\n.undo-redo-controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tgap: 4px;\\r\\n\\tbackground: #2d2d2d;\\r\\n\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\tborder-radius: 6px;\\r\\n\\tpadding: 2px;\\r\\n}\\r\\n\\r\\n.undo-button,\\r\\n.redo-button {\\r\\n\\tbackground: transparent;\\r\\n\\tcolor: #b8b8b8;\\r\\n\\tborder: none;\\r\\n\\tborder-radius: 4px;\\r\\n\\tpadding: 0;\\r\\n\\twidth: 36px;\\r\\n\\theight: 36px;\\r\\n\\tcursor: pointer;\\r\\n\\ttransition: all 0.2s ease;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\tposition: relative;\\r\\n}\\r\\n\\r\\n.undo-button:hover:not(:disabled),\\r\\n.redo-button:hover:not(:disabled) {\\r\\n\\tbackground: #333333;\\r\\n\\tcolor: #e8e8e8;\\r\\n}\\r\\n\\r\\n.undo-button:active:not(:disabled),\\r\\n.redo-button:active:not(:disabled) {\\r\\n\\tbackground: #3a3a3a;\\r\\n\\ttransform: scale(0.95);\\r\\n}\\r\\n\\r\\n.undo-button:disabled,\\r\\n.redo-button:disabled {\\r\\n\\topacity: 0.3;\\r\\n\\tcursor: not-allowed;\\r\\n}\\r\\n\\r\\n.undo-button svg,\\r\\n.redo-button svg {\\r\\n\\twidth: 16px;\\r\\n\\theight: 16px;\\r\\n}\\r\\n\\r\\n.export-button {\\r\\n\\tbackground: #2d2d2d;\\r\\n\\tcolor: #e8e8e8;\\r\\n\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\tborder-radius: 6px;\\r\\n\\tpadding: 8px 16px;\\r\\n\\tcursor: pointer;\\r\\n\\tfont-weight: 500;\\r\\n\\tfont-size: 13px;\\r\\n\\ttransition: all 0.2s ease;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tgap: 6px;\\r\\n}\\r\\n\\r\\n.export-button:hover {\\r\\n\\tbackground: #333333;\\r\\n\\tborder-color: rgba(255, 255, 255, 0.2);\\r\\n\\tcolor: #00ff88;\\r\\n}\\r\\n\\r\\n.export-button:active {\\r\\n\\tbackground: #3a3a3a;\\r\\n\\ttransform: scale(0.98);\\r\\n}\\r\\n\\r\\n.export-button svg {\\r\\n\\twidth: 16px;\\r\\n\\theight: 16px;\\r\\n\\tflex-shrink: 0;\\r\\n}\\r\\n\\r\\n.mute-solo-controls {\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tgap: 6px;\\r\\n\\tbackground: rgba(255, 255, 255, 0.05);\\r\\n\\tborder: 1px solid rgba(255, 255, 255, 0.1);\\r\\n\\tborder-radius: 8px;\\r\\n\\tpadding: 4px;\\r\\n}\\r\\n\\r\\n.mute-solo-controls .track-mute,\\r\\n.mute-solo-controls .track-solo {\\r\\n\\tbackground: rgba(255, 255, 255, 0.08);\\r\\n\\tcolor: #d0d0d0;\\r\\n\\tborder: 1px solid rgba(255, 255, 255, 0.15);\\r\\n\\tborder-radius: 6px;\\r\\n\\twidth: 32px;\\r\\n\\theight: 32px;\\r\\n\\tcursor: pointer;\\r\\n\\tfont-size: 13px;\\r\\n\\tfont-weight: 700;\\r\\n\\tline-height: 1;\\r\\n\\tdisplay: flex;\\r\\n\\talign-items: center;\\r\\n\\tjustify-content: center;\\r\\n\\ttransition: all 0.2s ease;\\r\\n\\tbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.mute-solo-controls .track-mute:hover,\\r\\n.mute-solo-controls .track-solo:hover {\\r\\n\\tbackground: rgba(255, 255, 255, 0.12);\\r\\n\\tborder-color: rgba(255, 255, 255, 0.25);\\r\\n\\tcolor: #ffffff;\\r\\n\\ttransform: translateY(-1px);\\r\\n\\tbox-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.mute-solo-controls .track-mute:active,\\r\\n.mute-solo-controls .track-solo:active {\\r\\n\\ttransform: translateY(0);\\r\\n\\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.mute-solo-controls .track-mute.active {\\r\\n\\tbackground: rgba(255, 107, 107, 0.25);\\r\\n\\tcolor: #ff6b6b;\\r\\n\\tborder-color: rgba(255, 107, 107, 0.6);\\r\\n\\tbox-shadow: 0 0 12px rgba(255, 107, 107, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.mute-solo-controls .track-solo.active {\\r\\n\\tbackground: rgba(255, 193, 7, 0.25);\\r\\n\\tcolor: #ffc107;\\r\\n\\tborder-color: rgba(255, 193, 7, 0.6);\\r\\n\\tbox-shadow: 0 0 12px rgba(255, 193, 7, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.mute-solo-controls .track-mute.active:hover {\\r\\n\\tbackground: rgba(255, 107, 107, 0.35);\\r\\n\\tborder-color: rgba(255, 107, 107, 0.8);\\r\\n\\tbox-shadow: 0 0 16px rgba(255, 107, 107, 0.5), 0 2px 6px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.mute-solo-controls .track-solo.active:hover {\\r\\n\\tbackground: rgba(255, 193, 7, 0.35);\\r\\n\\tborder-color: rgba(255, 193, 7, 0.8);\\r\\n\\tbox-shadow: 0 0 16px rgba(255, 193, 7, 0.5), 0 2px 6px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.view-toggle {\\r\\n\\tbackground: transparent;\\r\\n\\tborder: none;\\r\\n\\tcolor: #b8b8b8;\\r\\n\\tpadding: 12px 24px;\\r\\n\\tcursor: pointer;\\r\\n\\tfont-size: 13px;\\r\\n\\tfont-weight: 500;\\r\\n\\ttransition: all 0.2s ease;\\r\\n\\tborder-bottom: 2px solid transparent;\\r\\n\\tposition: relative;\\r\\n}\\r\\n\\r\\n.view-toggle:hover {\\r\\n\\tcolor: #e8e8e8;\\r\\n\\tbackground: rgba(255, 255, 255, 0.05);\\r\\n}\\r\\n\\r\\n.view-toggle.active {\\r\\n\\tcolor: #7ab8ff;\\r\\n\\tborder-bottom-color: #7ab8ff;\\r\\n\\tbackground: rgba(122, 184, 255, 0.1);\\r\\n}\\n</style>\\n\\n"],"names":[],"mappings":"AAmsBO,sCAAS,CACf,QAAQ,CAAE,KAAK,CACf,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,CAAC,CACR,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACjD,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,aAAa,CAC9B,OAAO,CAAE,CAAC,CAAC,IAAI,CACf,OAAO,CAAE,IAAI,CACb,eAAe,CAAE,KAAK,IAAI,CAC3B,CAEA,2CAAa,CACb,6CAAe,CACf,4CAAe,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,IAAI,CACT,IAAI,CAAE,CACP,CAEA,6CAAgB,CACf,eAAe,CAAE,MAClB,CAEA,4CAAe,CACd,eAAe,CAAE,QAClB,CAEA,0CAAa,CACZ,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1C,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CACzB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,OAAO,CAAE,CACV,CAEA,0CAAY,MAAO,CAClB,UAAU,CAAE,OAAO,CACnB,YAAY,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CACtC,CAEA,2BAAY,CAAC,kBAAI,CAChB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,CACd,CAEA,0CAAa,CACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,GAAG,CACR,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,IACZ,CAEA,2BAAY,CAAC,oBAAM,CAClB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OACR,CAEA,mDAAsB,CACrB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MACd,CAEA,2BAAY,CAAC,oBAAK,CAClB,kCAAmB,CAAC,oBAAM,CACzB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,OAAO,CACnB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1C,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CACzB,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,MAAM,CAClB,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CACzB,eAAe,CAAE,SAClB,CAEA,2BAAY,CAAC,oBAAK,2BAA2B,CAC7C,2BAAY,CAAC,oBAAK,2BAA2B,CAC7C,kCAAmB,CAAC,oBAAK,2BAA2B,CACpD,kCAAmB,CAAC,oBAAK,2BAA4B,CACpD,kBAAkB,CAAE,IAAI,CACxB,MAAM,CAAE,CACT,CAEA,2BAAY,CAAC,oBAAK,MAAM,CACxB,kCAAmB,CAAC,oBAAK,MAAO,CAC/B,OAAO,CAAE,IAAI,CACb,YAAY,CAAE,OAAO,CACrB,UAAU,CAAE,OACb,CAEA,kDAAqB,CACpB,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,GAAG,CACV,GAAG,CAAE,GAAG,CACR,SAAS,CAAE,WAAW,IAAI,CAAC,CAC3B,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,GAAG,CACR,cAAc,CAAE,IACjB,CAEA,2CAAc,CACb,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,GAAG,CACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CACzB,cAAc,CAAE,IAAI,CACpB,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IACT,CAEA,2CAAa,MAAO,CACnB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CACpC,CAEA,2CAAa,OAAQ,CACpB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACpC,SAAS,CAAE,MAAM,GAAG,CACrB,CAEA,4BAAa,CAAC,kBAAI,CACjB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IACT,CAEA,iDAAoB,CACnB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,GAAG,CACR,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,IACZ,CAEA,kCAAmB,CAAC,oBAAM,CACzB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OACR,CAEA,iDAAoB,CACnB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,GAAG,CACR,UAAU,CAAE,OAAO,CACnB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1C,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,GACV,CAEA,0CAAY,CACZ,0CAAa,CACZ,UAAU,CAAE,WAAW,CACvB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,CAAC,CACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CACzB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,QAAQ,CAAE,QACX,CAEA,0CAAY,MAAM,KAAK,SAAS,CAAC,CACjC,0CAAY,MAAM,KAAK,SAAS,CAAE,CACjC,UAAU,CAAE,OAAO,CACnB,KAAK,CAAE,OACR,CAEA,0CAAY,OAAO,KAAK,SAAS,CAAC,CAClC,0CAAY,OAAO,KAAK,SAAS,CAAE,CAClC,UAAU,CAAE,OAAO,CACnB,SAAS,CAAE,MAAM,IAAI,CACtB,CAEA,0CAAY,SAAS,CACrB,0CAAY,SAAU,CACrB,OAAO,CAAE,GAAG,CACZ,MAAM,CAAE,WACT,CAEA,2BAAY,CAAC,kBAAG,CAChB,2BAAY,CAAC,kBAAI,CAChB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IACT,CAEA,4CAAe,CACd,UAAU,CAAE,OAAO,CACnB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1C,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,GAAG,CAAC,IAAI,CACjB,MAAM,CAAE,OAAO,CACf,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CACzB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,GACN,CAEA,4CAAc,MAAO,CACpB,UAAU,CAAE,OAAO,CACnB,YAAY,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACtC,KAAK,CAAE,OACR,CAEA,4CAAc,OAAQ,CACrB,UAAU,CAAE,OAAO,CACnB,SAAS,CAAE,MAAM,IAAI,CACtB,CAEA,6BAAc,CAAC,kBAAI,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,WAAW,CAAE,CACd,CAEA,iDAAoB,CACnB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,GAAG,CACR,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CACrC,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC1C,aAAa,CAAE,GAAG,CAClB,OAAO,CAAE,GACV,CAEA,kCAAmB,CAAC,0BAAW,CAC/B,kCAAmB,CAAC,0BAAY,CAC/B,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CACrC,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAC3C,aAAa,CAAE,GAAG,CAClB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,OAAO,CACf,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,CAChB,WAAW,CAAE,CAAC,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CACzB,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CACxC,CAEA,kCAAmB,CAAC,0BAAW,MAAM,CACrC,kCAAmB,CAAC,0BAAW,MAAO,CACrC,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CACrC,YAAY,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CACvC,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,WAAW,IAAI,CAAC,CAC3B,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CACxC,CAEA,kCAAmB,CAAC,0BAAW,OAAO,CACtC,kCAAmB,CAAC,0BAAW,OAAQ,CACtC,SAAS,CAAE,WAAW,CAAC,CAAC,CACxB,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CACxC,CAEA,kCAAmB,CAAC,WAAW,sBAAQ,CACtC,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CACrC,KAAK,CAAE,OAAO,CACd,YAAY,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACtC,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAC3E,CAEA,kCAAmB,CAAC,WAAW,sBAAQ,CACtC,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CACnC,KAAK,CAAE,OAAO,CACd,YAAY,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACpC,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CACzE,CAEA,kCAAmB,CAAC,WAAW,sBAAO,MAAO,CAC5C,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CACrC,YAAY,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CACtC,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAC3E,CAEA,kCAAmB,CAAC,WAAW,sBAAO,MAAO,CAC5C,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CACnC,YAAY,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CACpC,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CACzE,CAEA,0CAAa,CACZ,UAAU,CAAE,WAAW,CACvB,MAAM,CAAE,IAAI,CACZ,KAAK,CAAE,OAAO,CACd,OAAO,CAAE,IAAI,CAAC,IAAI,CAClB,MAAM,CAAE,OAAO,CACf,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,GAAG,CAChB,UAAU,CAAE,GAAG,CAAC,IAAI,CAAC,IAAI,CACzB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,WAAW,CACpC,QAAQ,CAAE,QACX,CAEA,0CAAY,MAAO,CAClB,KAAK,CAAE,OAAO,CACd,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CACrC,CAEA,YAAY,qCAAQ,CACnB,KAAK,CAAE,OAAO,CACd,mBAAmB,CAAE,OAAO,CAC5B,UAAU,CAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CACpC"}`
};
const Toolbar = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let project;
  let selection;
  let viewMode;
  let bpm;
  let selectedTrack;
  let selectedPattern;
  let selectedInstrument;
  let $viewStore, $$unsubscribe_viewStore;
  let $selectionStore, $$unsubscribe_selectionStore;
  let $projectStore, $$unsubscribe_projectStore;
  $$unsubscribe_viewStore = subscribe(viewStore, (value) => $viewStore = value);
  $$unsubscribe_selectionStore = subscribe(selectionStore, (value) => $selectionStore = value);
  $$unsubscribe_projectStore = subscribe(projectStore, (value) => $projectStore = value);
  let canUndo = false;
  let canRedo = false;
  let isMuted = false;
  let isSoloed = false;
  projectStore.subscribeHistory((state) => {
    canUndo = state.canUndo;
    canRedo = state.canRedo;
  });
  onDestroy(() => {
  });
  let showExportDialog = false;
  function closeExportDialog() {
    showExportDialog = false;
  }
  $$result.css.add(css$5);
  project = $projectStore;
  selection = $selectionStore;
  viewMode = $viewStore;
  bpm = project?.bpm ?? 120;
  selectedTrack = project?.standaloneInstruments?.find((i) => i.id === selection.selectedTrackId);
  selectedPattern = selection.selectedPatternId ? project?.patterns?.find((p) => p.id === selection.selectedPatternId) : null;
  selectedInstrument = (() => {
    if (!project || !selectedPattern || !selection.selectedInstrumentId) return null;
    selectedPattern.updatedAt;
    selectedPattern.instruments;
    return projectStore.getPatternInstruments(selectedPattern).find((inst) => inst.id === selection.selectedInstrumentId);
  })();
  {
    {
      const _selectedPattern = selectedPattern;
      const _selectedInstrument = selectedInstrument;
      const _selectedTrack = selectedTrack;
      if (_selectedTrack) {
        isMuted = _selectedTrack.mute ?? false;
        isSoloed = _selectedTrack.solo ?? false;
      } else if (_selectedPattern && _selectedInstrument) {
        isMuted = _selectedInstrument.mute ?? false;
        isSoloed = _selectedInstrument.solo ?? false;
      } else if (_selectedPattern) {
        isMuted = _selectedPattern.mute ?? false;
        isSoloed = _selectedPattern.solo ?? false;
      } else {
        isMuted = false;
        isSoloed = false;
      }
    }
  }
  $$unsubscribe_viewStore();
  $$unsubscribe_selectionStore();
  $$unsubscribe_projectStore();
  return `<div class="toolbar svelte-1w9eo4a"><div class="toolbar-left svelte-1w9eo4a">${viewMode === "arrangement" || typeof window !== "undefined" && window.location.pathname.match(/\/project\/[^/]+\/pattern\/([^/]+)/) ? `<div class="bpm-control svelte-1w9eo4a"><label for="bpm-input" class="svelte-1w9eo4a" data-svelte-h="svelte-mchvk7">BPM</label> <div class="number-input-wrapper svelte-1w9eo4a"><input id="bpm-input" type="number" min="20" max="500" class="svelte-1w9eo4a"${add_attribute("value", bpm, 0)}> <div class="number-input-arrows svelte-1w9eo4a"><button type="button" class="arrow-button arrow-up svelte-1w9eo4a" title="Increase BPM" data-svelte-h="svelte-16uvtlc"><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1w9eo4a"><path d="M5 2L8 6H2L5 2Z" fill="currentColor"></path></svg></button> <button type="button" class="arrow-button arrow-down svelte-1w9eo4a" title="Decrease BPM" data-svelte-h="svelte-rlu3hy"><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1w9eo4a"><path d="M5 8L2 4H8L5 8Z" fill="currentColor"></path></svg></button></div></div></div>` : ``} ${typeof window !== "undefined" && window.location.pathname.match(/\/project\/[^/]+\/pattern\/([^/]+)/) ? (() => {
    let patternMatch = window.location.pathname.match(/\/project\/[^/]+\/pattern\/([^/]+)/), currentPattern = patternMatch ? project?.patterns?.find((p) => p.id === patternMatch[1]) : null;
    return `  ${currentPattern ? `<div class="base-meter-control svelte-1w9eo4a"><label for="base-meter-input" class="svelte-1w9eo4a" data-svelte-h="svelte-1h9e1ga">Base Meter</label> <div class="number-input-wrapper svelte-1w9eo4a"><input id="base-meter-input" type="number"${add_attribute("value", currentPattern.baseMeter || 4, 0)} min="1" max="32" title="Base meter (denominator X in Y/X time signature). Root node division (Y) is independent." class="svelte-1w9eo4a"> <div class="number-input-arrows svelte-1w9eo4a"><button type="button" class="arrow-button arrow-up svelte-1w9eo4a" title="Increase Base Meter" data-svelte-h="svelte-d78la5"><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1w9eo4a"><path d="M5 2L8 6H2L5 2Z" fill="currentColor"></path></svg></button> <button type="button" class="arrow-button arrow-down svelte-1w9eo4a" title="Decrease Base Meter" data-svelte-h="svelte-1fcg3su"><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1w9eo4a"><path d="M5 8L2 4H8L5 8Z" fill="currentColor"></path></svg></button></div></div></div>` : ``}`;
  })() : ``} ${typeof window !== "undefined" && window.location.pathname.match(/\/project\/[^/]+\/pattern\/([^/]+)/) && selection.isRoot && selectedPattern && selection.selectedInstrumentId ? `<div class="mute-solo-controls svelte-1w9eo4a"><button class="${"track-mute " + escape(isMuted ? "active" : "", true) + " svelte-1w9eo4a"}"${add_attribute("title", isMuted ? "Unmute track" : "Mute track", 0)}>M</button> <button class="${"track-solo " + escape(isSoloed ? "active" : "", true) + " svelte-1w9eo4a"}"${add_attribute("title", isSoloed ? "Unsolo track" : "Solo track", 0)}>S</button></div>` : ``}</div> <div class="toolbar-center svelte-1w9eo4a"><button class="${"view-toggle " + escape(viewMode === "arrangement" ? "active" : "", true) + " svelte-1w9eo4a"}" title="Arrangement View">Arrangement</button> <button class="play-button svelte-1w9eo4a"${add_attribute("title", "Play", 0)}>${` <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1w9eo4a"><path d="M5 3L13 8L5 13V3Z" fill="currentColor"></path></svg>`}</button> <button class="${"view-toggle " + escape(viewMode === "pattern" ? "active" : "", true) + " svelte-1w9eo4a"}" title="Pattern View">Patterns</button></div> <div class="toolbar-right svelte-1w9eo4a">${viewMode === "arrangement" || typeof window !== "undefined" && window.location.pathname.match(/\/project\/[^/]+\/pattern\/([^/]+)/) ? `<div class="undo-redo-controls svelte-1w9eo4a"><button class="undo-button svelte-1w9eo4a" ${!canUndo ? "disabled" : ""} title="Undo (Ctrl+Z)"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1w9eo4a"><path d="M2 8C2 10.2091 3.79086 12 6 12H12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 5L2 8L5 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button> <button class="redo-button svelte-1w9eo4a" ${!canRedo ? "disabled" : ""} title="Redo (Ctrl+Shift+Z or Ctrl+Y)"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1w9eo4a"><path d="M14 8C14 5.79086 12.2091 4 10 4H4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11 11L14 8L11 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button></div>` : ``} ${viewMode === "arrangement" ? `<button class="export-button svelte-1w9eo4a" title="Export to WAV" data-svelte-h="svelte-opt4pr"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-1w9eo4a"><path d="M8 2V10M8 10L5 7M8 10L11 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 12V13C2 14.1046 2.89543 15 4 15H12C13.1046 15 14 14.1046 14 13V12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
				Export</button>` : ``}</div></div> ${validate_component(ExportDialog, "ExportDialog").$$render(
    $$result,
    {
      isOpen: showExportDialog,
      onClose: closeExportDialog
    },
    {},
    {}
  )}`;
});
function createCanvasStore() {
  const { subscribe: subscribe2, set, update } = writable({
    x: 0,
    y: 0,
    zoom: 1
  });
  return {
    subscribe: subscribe2,
    set,
    update,
    pan: (dx, dy) => {
      update((viewport) => ({
        ...viewport,
        x: viewport.x + dx,
        y: viewport.y + dy
      }));
    },
    zoom: (delta, screenX, screenY) => {
      update((viewport) => {
        const oldZoom = viewport.zoom;
        const newZoom = Math.max(0.1, Math.min(5, viewport.zoom + delta));
        if (screenX !== void 0 && screenY !== void 0) {
          const worldX = screenX / oldZoom + viewport.x;
          const worldY = screenY / oldZoom + viewport.y;
          return {
            x: worldX - screenX / newZoom,
            y: worldY - screenY / newZoom,
            zoom: newZoom
          };
        }
        return { ...viewport, zoom: newZoom };
      });
    },
    reset: () => {
      set({ x: 0, y: 0, zoom: 1 });
    }
  };
}
const canvasStore = createCanvasStore();
const NumericInput = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { id } = $$props;
  let { value = 0 } = $$props;
  let { min = void 0 } = $$props;
  let { max = void 0 } = $$props;
  let { step = void 0 } = $$props;
  let { placeholder = void 0 } = $$props;
  let { title = void 0 } = $$props;
  let { disabled = false } = $$props;
  let { onInput = void 0 } = $$props;
  if ($$props.id === void 0 && $$bindings.id && id !== void 0) $$bindings.id(id);
  if ($$props.value === void 0 && $$bindings.value && value !== void 0) $$bindings.value(value);
  if ($$props.min === void 0 && $$bindings.min && min !== void 0) $$bindings.min(min);
  if ($$props.max === void 0 && $$bindings.max && max !== void 0) $$bindings.max(max);
  if ($$props.step === void 0 && $$bindings.step && step !== void 0) $$bindings.step(step);
  if ($$props.placeholder === void 0 && $$bindings.placeholder && placeholder !== void 0) $$bindings.placeholder(placeholder);
  if ($$props.title === void 0 && $$bindings.title && title !== void 0) $$bindings.title(title);
  if ($$props.disabled === void 0 && $$bindings.disabled && disabled !== void 0) $$bindings.disabled(disabled);
  if ($$props.onInput === void 0 && $$bindings.onInput && onInput !== void 0) $$bindings.onInput(onInput);
  return `<div class="numeric-input-wrapper"><input${add_attribute("id", id, 0)} type="number"${add_attribute("min", min, 0)}${add_attribute("max", max, 0)}${add_attribute("step", step, 0)}${add_attribute("placeholder", placeholder, 0)}${add_attribute("title", title, 0)} ${disabled ? "disabled" : ""}${add_attribute("value", value, 0)} class="numeric-input"> <div class="numeric-input-arrows"><button type="button" class="numeric-arrow-button arrow-up" title="Increase value" ${disabled ? "disabled" : ""}><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 2L8 6H2L5 2Z" fill="currentColor"></path></svg></button> <button type="button" class="numeric-arrow-button arrow-down" title="Decrease value" ${disabled ? "disabled" : ""}><svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 8L2 4H8L5 8Z" fill="currentColor"></path></svg></button></div></div>`;
});
function createSynthPluginStore() {
  const { subscribe: subscribe2, set, update } = writable([]);
  return {
    subscribe: subscribe2,
    openWindow: (window2) => {
      console.log("synthPluginStore.openWindow called with:", window2);
      update((windows) => {
        const existingIndex = windows.findIndex((w) => w.id === window2.id);
        if (existingIndex >= 0) {
          const newWindows2 = [...windows];
          newWindows2[existingIndex] = window2;
          console.log("Replaced existing window, new windows:", newWindows2);
          return newWindows2;
        }
        const newWindows = [...windows, window2];
        console.log("Added new window, total windows:", newWindows.length, newWindows);
        return newWindows;
      });
    },
    closeWindow: (windowId) => {
      update((windows) => windows.filter((w) => w.id !== windowId));
    },
    closeAll: () => {
      set([]);
    }
  };
}
const synthPluginStore = createSynthPluginStore();
function createAutomationStore() {
  const { subscribe: subscribe2, set, update } = writable([]);
  return {
    subscribe: subscribe2,
    openWindow: (window2) => {
      update((windows) => {
        return [window2];
      });
    },
    closeWindow: (windowId) => {
      update((windows) => windows.filter((w) => w.id !== windowId));
    },
    closeAll: () => {
      set([]);
    }
  };
}
const automationStore = createAutomationStore();
const MIN_VALUE = 0.01;
const ParamControl = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  const fallbackId = `param-${Math.random().toString(36).slice(2)}`;
  let { id = fallbackId } = $$props;
  let { label } = $$props;
  let { value } = $$props;
  let { min } = $$props;
  let { max } = $$props;
  let { step } = $$props;
  let { onUpdate = void 0 } = $$props;
  let { onChange = void 0 } = $$props;
  let { resetValue = void 0 } = $$props;
  let { onReset = void 0 } = $$props;
  let { automationTargetType = null } = $$props;
  let { automationTargetId = null } = $$props;
  let { automationParameterKey = null } = $$props;
  let { automationTimelineInstanceId = null } = $$props;
  let { automationLabel = null } = $$props;
  let sliderElement;
  const effectiveMin = min === 0 ? MIN_VALUE : min;
  const handleUpdate = (val) => {
    const clampedVal = Math.max(effectiveMin, val);
    if (typeof onUpdate === "function") {
      onUpdate(clampedVal);
    }
    if (typeof onChange === "function") {
      onChange(clampedVal);
    }
  };
  onDestroy(() => {
  });
  if ($$props.id === void 0 && $$bindings.id && id !== void 0) $$bindings.id(id);
  if ($$props.label === void 0 && $$bindings.label && label !== void 0) $$bindings.label(label);
  if ($$props.value === void 0 && $$bindings.value && value !== void 0) $$bindings.value(value);
  if ($$props.min === void 0 && $$bindings.min && min !== void 0) $$bindings.min(min);
  if ($$props.max === void 0 && $$bindings.max && max !== void 0) $$bindings.max(max);
  if ($$props.step === void 0 && $$bindings.step && step !== void 0) $$bindings.step(step);
  if ($$props.onUpdate === void 0 && $$bindings.onUpdate && onUpdate !== void 0) $$bindings.onUpdate(onUpdate);
  if ($$props.onChange === void 0 && $$bindings.onChange && onChange !== void 0) $$bindings.onChange(onChange);
  if ($$props.resetValue === void 0 && $$bindings.resetValue && resetValue !== void 0) $$bindings.resetValue(resetValue);
  if ($$props.onReset === void 0 && $$bindings.onReset && onReset !== void 0) $$bindings.onReset(onReset);
  if ($$props.automationTargetType === void 0 && $$bindings.automationTargetType && automationTargetType !== void 0) $$bindings.automationTargetType(automationTargetType);
  if ($$props.automationTargetId === void 0 && $$bindings.automationTargetId && automationTargetId !== void 0) $$bindings.automationTargetId(automationTargetId);
  if ($$props.automationParameterKey === void 0 && $$bindings.automationParameterKey && automationParameterKey !== void 0) $$bindings.automationParameterKey(automationParameterKey);
  if ($$props.automationTimelineInstanceId === void 0 && $$bindings.automationTimelineInstanceId && automationTimelineInstanceId !== void 0) $$bindings.automationTimelineInstanceId(automationTimelineInstanceId);
  if ($$props.automationLabel === void 0 && $$bindings.automationLabel && automationLabel !== void 0) $$bindings.automationLabel(automationLabel);
  return `<div class="param"><div class="param-header"><label${add_attribute("for", id, 0)}>${escape(label)}</label> <div class="param-header-actions">${automationTargetType && automationTargetId && automationParameterKey ? `<button class="automation-btn" title="Open automation editor" data-svelte-h="svelte-2ufg47"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="2" cy="10" r="1.5" stroke="currentColor" stroke-width="1.5" fill="none"></circle><circle cx="10" cy="2" r="1.5" stroke="currentColor" stroke-width="1.5" fill="none"></circle><line x1="3.5" y1="10" x2="8.5" y2="2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></line></svg></button>` : ``} ${onReset && resetValue !== void 0 ? `<button class="reset-btn" data-svelte-h="svelte-1x3h04k">Reset</button>` : ``}</div></div> <div class="param-controls"><input${add_attribute("id", id, 0)} type="range"${add_attribute("min", effectiveMin, 0)}${add_attribute("max", max, 0)}${add_attribute("step", step, 0)}${add_attribute("value", Math.max(effectiveMin, value), 0)}${add_attribute("this", sliderElement, 0)}> ${validate_component(NumericInput, "NumericInput").$$render(
    $$result,
    {
      id: `${id}-number`,
      min: effectiveMin,
      max,
      step,
      value: Math.max(effectiveMin, value),
      onInput: handleUpdate
    },
    {},
    {}
  )}</div></div>`;
});
function createEditorModeStore() {
  const { subscribe: subscribe2, set, update } = writable("pitch");
  return {
    subscribe: subscribe2,
    set,
    update,
    setMode: (mode) => set(mode),
    toggle: () => update((current) => current === "pitch" ? "velocity" : "pitch")
  };
}
const editorModeStore = createEditorModeStore();
const css$4 = {
  code: ".canvas-skeleton.svelte-i3nqz9{width:100%;height:100%;background:#1a1a1a;position:relative;overflow:hidden}.skeleton-grid.svelte-i3nqz9{position:absolute;inset:0;background-image:linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),\r\n			linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);background-size:50px 50px;opacity:0.5}.skeleton-nodes.svelte-i3nqz9{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;gap:40px;flex-wrap:wrap}.skeleton-node.svelte-i3nqz9{width:36px;height:36px;border-radius:50%;background:linear-gradient(\r\n			90deg,\r\n			rgba(122, 184, 255, 0.1) 0%,\r\n			rgba(122, 184, 255, 0.2) 50%,\r\n			rgba(122, 184, 255, 0.1) 100%\r\n		);background-size:200% 100%;animation:svelte-i3nqz9-skeleton-shimmer 1.5s ease-in-out infinite;border:1px solid rgba(122, 184, 255, 0.2)}.skeleton-node-large.svelte-i3nqz9{width:100px;height:100px}@keyframes svelte-i3nqz9-skeleton-shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}",
  map: '{"version":3,"file":"CanvasSkeleton.svelte","sources":["CanvasSkeleton.svelte"],"sourcesContent":["<div class=\\"canvas-skeleton\\">\\r\\n\\t<div class=\\"skeleton-grid\\"></div>\\r\\n\\t<div class=\\"skeleton-nodes\\">\\r\\n\\t\\t<div class=\\"skeleton-node skeleton-node-large\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-node\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-node\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-node\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-node\\"></div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.canvas-skeleton {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t\\tbackground: #1a1a1a;\\r\\n\\t\\tposition: relative;\\r\\n\\t\\toverflow: hidden;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-grid {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tinset: 0;\\r\\n\\t\\tbackground-image: \\r\\n\\t\\t\\tlinear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),\\r\\n\\t\\t\\tlinear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);\\r\\n\\t\\tbackground-size: 50px 50px;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-nodes {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tinset: 0;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\tgap: 40px;\\r\\n\\t\\tflex-wrap: wrap;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-node {\\r\\n\\t\\twidth: 36px;\\r\\n\\t\\theight: 36px;\\r\\n\\t\\tborder-radius: 50%;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.1) 0%,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.2) 50%,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.1) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder: 1px solid rgba(122, 184, 255, 0.2);\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-node-large {\\r\\n\\t\\twidth: 100px;\\r\\n\\t\\theight: 100px;\\r\\n\\t}\\r\\n\\r\\n\\t@keyframes skeleton-shimmer {\\r\\n\\t\\t0% {\\r\\n\\t\\t\\tbackground-position: -200% 0;\\r\\n\\t\\t}\\r\\n\\t\\t100% {\\r\\n\\t\\t\\tbackground-position: 200% 0;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</style>\\r\\n\\r\\n"],"names":[],"mappings":"AAYC,8BAAiB,CAChB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,QAAQ,CAAE,QAAQ,CAClB,QAAQ,CAAE,MACX,CAEA,4BAAe,CACd,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,gBAAgB,CACf,gBAAgB,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;AACnE,GAAG,gBAAgB,KAAK,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,CACvE,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,OAAO,CAAE,GACV,CAEA,6BAAgB,CACf,QAAQ,CAAE,QAAQ,CAClB,KAAK,CAAE,CAAC,CACR,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,GAAG,CAAE,IAAI,CACT,SAAS,CAAE,IACZ,CAEA,4BAAe,CACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE;AACd,GAAG,KAAK,CAAC;AACT,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC;AAC/B,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI;AAChC,GAAG,CACD,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,SAAS,CAAE,8BAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CACrD,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAC1C,CAEA,kCAAqB,CACpB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KACT,CAEA,WAAW,8BAAiB,CAC3B,EAAG,CACF,mBAAmB,CAAE,KAAK,CAAC,CAC5B,CACA,IAAK,CACJ,mBAAmB,CAAE,IAAI,CAAC,CAC3B,CACD"}'
};
const CanvasSkeleton = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  $$result.css.add(css$4);
  return `<div class="canvas-skeleton svelte-i3nqz9" data-svelte-h="svelte-1yv41qp"><div class="skeleton-grid svelte-i3nqz9"></div> <div class="skeleton-nodes svelte-i3nqz9"><div class="skeleton-node skeleton-node-large svelte-i3nqz9"></div> <div class="skeleton-node svelte-i3nqz9"></div> <div class="skeleton-node svelte-i3nqz9"></div> <div class="skeleton-node svelte-i3nqz9"></div> <div class="skeleton-node svelte-i3nqz9"></div></div> </div>`;
});
const css$3 = {
  code: ".sidebar-skeleton.svelte-lbrrhm{width:100%;height:100%;background:#1a1a1a;padding:20px;display:flex;flex-direction:column;gap:24px}.skeleton-section.svelte-lbrrhm{display:flex;flex-direction:column;gap:12px}.skeleton-title.svelte-lbrrhm{width:60%;height:20px;background:linear-gradient(\r\n			90deg,\r\n			rgba(255, 255, 255, 0.05) 0%,\r\n			rgba(255, 255, 255, 0.1) 50%,\r\n			rgba(255, 255, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-lbrrhm-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:4px}.skeleton-controls.svelte-lbrrhm{display:flex;flex-direction:column;gap:8px}.skeleton-control.svelte-lbrrhm{width:100%;height:40px;background:linear-gradient(\r\n			90deg,\r\n			rgba(255, 255, 255, 0.05) 0%,\r\n			rgba(255, 255, 255, 0.1) 50%,\r\n			rgba(255, 255, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-lbrrhm-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:4px}.skeleton-list.svelte-lbrrhm{display:flex;flex-direction:column;gap:8px}.skeleton-item.svelte-lbrrhm{width:100%;height:60px;background:linear-gradient(\r\n			90deg,\r\n			rgba(255, 255, 255, 0.05) 0%,\r\n			rgba(255, 255, 255, 0.1) 50%,\r\n			rgba(255, 255, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-lbrrhm-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:4px}@keyframes svelte-lbrrhm-skeleton-shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}",
  map: '{"version":3,"file":"SidebarSkeleton.svelte","sources":["SidebarSkeleton.svelte"],"sourcesContent":["<div class=\\"sidebar-skeleton\\">\\r\\n\\t<div class=\\"skeleton-section\\">\\r\\n\\t\\t<div class=\\"skeleton-title\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-controls\\">\\r\\n\\t\\t\\t<div class=\\"skeleton-control\\"></div>\\r\\n\\t\\t\\t<div class=\\"skeleton-control\\"></div>\\r\\n\\t\\t\\t<div class=\\"skeleton-control\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\"skeleton-section\\">\\r\\n\\t\\t<div class=\\"skeleton-title\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-list\\">\\r\\n\\t\\t\\t<div class=\\"skeleton-item\\"></div>\\r\\n\\t\\t\\t<div class=\\"skeleton-item\\"></div>\\r\\n\\t\\t\\t<div class=\\"skeleton-item\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.sidebar-skeleton {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t\\tbackground: #1a1a1a;\\r\\n\\t\\tpadding: 20px;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 24px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-section {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 12px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-title {\\r\\n\\t\\twidth: 60%;\\r\\n\\t\\theight: 20px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-controls {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 8px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-control {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 40px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-list {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 8px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-item {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 60px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t@keyframes skeleton-shimmer {\\r\\n\\t\\t0% {\\r\\n\\t\\t\\tbackground-position: -200% 0;\\r\\n\\t\\t}\\r\\n\\t\\t100% {\\r\\n\\t\\t\\tbackground-position: 200% 0;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</style>\\r\\n\\r\\n"],"names":[],"mappings":"AAoBC,+BAAkB,CACjB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,OAAO,CAAE,IAAI,CACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IACN,CAEA,+BAAkB,CACjB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IACN,CAEA,6BAAgB,CACf,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE;AACd,GAAG,KAAK,CAAC;AACT,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI;AACjC,GAAG,CACD,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,SAAS,CAAE,8BAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CACrD,aAAa,CAAE,GAChB,CAEA,gCAAmB,CAClB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,GACN,CAEA,+BAAkB,CACjB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE;AACd,GAAG,KAAK,CAAC;AACT,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI;AACjC,GAAG,CACD,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,SAAS,CAAE,8BAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CACrD,aAAa,CAAE,GAChB,CAEA,4BAAe,CACd,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,GACN,CAEA,4BAAe,CACd,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE;AACd,GAAG,KAAK,CAAC;AACT,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI;AACjC,GAAG,CACD,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,SAAS,CAAE,8BAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CACrD,aAAa,CAAE,GAChB,CAEA,WAAW,8BAAiB,CAC3B,EAAG,CACF,mBAAmB,CAAE,KAAK,CAAC,CAC5B,CACA,IAAK,CACJ,mBAAmB,CAAE,IAAI,CAAC,CAC3B,CACD"}'
};
const SidebarSkeleton = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  $$result.css.add(css$3);
  return `<div class="sidebar-skeleton svelte-lbrrhm" data-svelte-h="svelte-1bnhzgd"><div class="skeleton-section svelte-lbrrhm"><div class="skeleton-title svelte-lbrrhm"></div> <div class="skeleton-controls svelte-lbrrhm"><div class="skeleton-control svelte-lbrrhm"></div> <div class="skeleton-control svelte-lbrrhm"></div> <div class="skeleton-control svelte-lbrrhm"></div></div></div> <div class="skeleton-section svelte-lbrrhm"><div class="skeleton-title svelte-lbrrhm"></div> <div class="skeleton-list svelte-lbrrhm"><div class="skeleton-item svelte-lbrrhm"></div> <div class="skeleton-item svelte-lbrrhm"></div> <div class="skeleton-item svelte-lbrrhm"></div></div></div> </div>`;
});
const css$2 = {
  code: ".timeline-skeleton.svelte-1b2yrl7{width:100%;height:100%;background:#1a1a1a;display:flex;flex-direction:column}.skeleton-ruler.svelte-1b2yrl7{height:40px;background:#222;border-bottom:1px solid #333;display:flex;align-items:center;padding:0 20px;gap:40px}.skeleton-ruler-mark.svelte-1b2yrl7{width:40px;height:16px;background:linear-gradient(\r\n			90deg,\r\n			rgba(255, 255, 255, 0.05) 0%,\r\n			rgba(255, 255, 255, 0.1) 50%,\r\n			rgba(255, 255, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-1b2yrl7-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:2px}.skeleton-tracks.svelte-1b2yrl7{flex:1;display:flex;flex-direction:column}.skeleton-track.svelte-1b2yrl7{display:flex;border-bottom:1px solid #333;min-height:80px}.skeleton-track-header.svelte-1b2yrl7{width:200px;background:#222;border-right:1px solid #333;display:flex;align-items:center;padding:0 16px}.skeleton-track-header.svelte-1b2yrl7::before{content:'';width:80%;height:20px;background:linear-gradient(\r\n			90deg,\r\n			rgba(255, 255, 255, 0.05) 0%,\r\n			rgba(255, 255, 255, 0.1) 50%,\r\n			rgba(255, 255, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-1b2yrl7-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:4px}.skeleton-track-content.svelte-1b2yrl7{flex:1;background:#1a1a1a;display:flex;align-items:center;padding:0 20px;gap:20px;position:relative}.skeleton-clip.svelte-1b2yrl7{width:120px;height:50px;background:linear-gradient(\r\n			90deg,\r\n			rgba(122, 184, 255, 0.1) 0%,\r\n			rgba(122, 184, 255, 0.2) 50%,\r\n			rgba(122, 184, 255, 0.1) 100%\r\n		);background-size:200% 100%;animation:svelte-1b2yrl7-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:4px;border:1px solid rgba(122, 184, 255, 0.2)}@keyframes svelte-1b2yrl7-skeleton-shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}",
  map: `{"version":3,"file":"TimelineSkeleton.svelte","sources":["TimelineSkeleton.svelte"],"sourcesContent":["<div class=\\"timeline-skeleton\\">\\r\\n\\t<div class=\\"skeleton-ruler\\">\\r\\n\\t\\t<div class=\\"skeleton-ruler-mark\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-ruler-mark\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-ruler-mark\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-ruler-mark\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-ruler-mark\\"></div>\\r\\n\\t</div>\\r\\n\\t<div class=\\"skeleton-tracks\\">\\r\\n\\t\\t<div class=\\"skeleton-track\\">\\r\\n\\t\\t\\t<div class=\\"skeleton-track-header\\"></div>\\r\\n\\t\\t\\t<div class=\\"skeleton-track-content\\">\\r\\n\\t\\t\\t\\t<div class=\\"skeleton-clip\\"></div>\\r\\n\\t\\t\\t\\t<div class=\\"skeleton-clip\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\"skeleton-track\\">\\r\\n\\t\\t\\t<div class=\\"skeleton-track-header\\"></div>\\r\\n\\t\\t\\t<div class=\\"skeleton-track-content\\">\\r\\n\\t\\t\\t\\t<div class=\\"skeleton-clip\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\"skeleton-track\\">\\r\\n\\t\\t\\t<div class=\\"skeleton-track-header\\"></div>\\r\\n\\t\\t\\t<div class=\\"skeleton-track-content\\"></div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.timeline-skeleton {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t\\tbackground: #1a1a1a;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-ruler {\\r\\n\\t\\theight: 40px;\\r\\n\\t\\tbackground: #222;\\r\\n\\t\\tborder-bottom: 1px solid #333;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tpadding: 0 20px;\\r\\n\\t\\tgap: 40px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-ruler-mark {\\r\\n\\t\\twidth: 40px;\\r\\n\\t\\theight: 16px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 2px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-tracks {\\r\\n\\t\\tflex: 1;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-track {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tborder-bottom: 1px solid #333;\\r\\n\\t\\tmin-height: 80px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-track-header {\\r\\n\\t\\twidth: 200px;\\r\\n\\t\\tbackground: #222;\\r\\n\\t\\tborder-right: 1px solid #333;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tpadding: 0 16px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-track-header::before {\\r\\n\\t\\tcontent: '';\\r\\n\\t\\twidth: 80%;\\r\\n\\t\\theight: 20px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-track-content {\\r\\n\\t\\tflex: 1;\\r\\n\\t\\tbackground: #1a1a1a;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tpadding: 0 20px;\\r\\n\\t\\tgap: 20px;\\r\\n\\t\\tposition: relative;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-clip {\\r\\n\\t\\twidth: 120px;\\r\\n\\t\\theight: 50px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.1) 0%,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.2) 50%,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.1) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t\\tborder: 1px solid rgba(122, 184, 255, 0.2);\\r\\n\\t}\\r\\n\\r\\n\\t@keyframes skeleton-shimmer {\\r\\n\\t\\t0% {\\r\\n\\t\\t\\tbackground-position: -200% 0;\\r\\n\\t\\t}\\r\\n\\t\\t100% {\\r\\n\\t\\t\\tbackground-position: 200% 0;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</style>\\r\\n\\r\\n"],"names":[],"mappings":"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"}`
};
const TimelineSkeleton = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  $$result.css.add(css$2);
  return `<div class="timeline-skeleton svelte-1b2yrl7" data-svelte-h="svelte-1tsso8v"><div class="skeleton-ruler svelte-1b2yrl7"><div class="skeleton-ruler-mark svelte-1b2yrl7"></div> <div class="skeleton-ruler-mark svelte-1b2yrl7"></div> <div class="skeleton-ruler-mark svelte-1b2yrl7"></div> <div class="skeleton-ruler-mark svelte-1b2yrl7"></div> <div class="skeleton-ruler-mark svelte-1b2yrl7"></div></div> <div class="skeleton-tracks svelte-1b2yrl7"><div class="skeleton-track svelte-1b2yrl7"><div class="skeleton-track-header svelte-1b2yrl7"></div> <div class="skeleton-track-content svelte-1b2yrl7"><div class="skeleton-clip svelte-1b2yrl7"></div> <div class="skeleton-clip svelte-1b2yrl7"></div></div></div> <div class="skeleton-track svelte-1b2yrl7"><div class="skeleton-track-header svelte-1b2yrl7"></div> <div class="skeleton-track-content svelte-1b2yrl7"><div class="skeleton-clip svelte-1b2yrl7"></div></div></div> <div class="skeleton-track svelte-1b2yrl7"><div class="skeleton-track-header svelte-1b2yrl7"></div> <div class="skeleton-track-content svelte-1b2yrl7"></div></div></div> </div>`;
});
const css$1 = {
  code: ".pattern-list-skeleton.svelte-r8pez8{width:100%;height:100%;background:#1a1a1a;padding:20px;display:flex;flex-direction:column;gap:24px}.skeleton-header.svelte-r8pez8{display:flex;align-items:center;justify-content:space-between;gap:16px}.skeleton-title.svelte-r8pez8{width:120px;height:28px;background:linear-gradient(\r\n			90deg,\r\n			rgba(255, 255, 255, 0.05) 0%,\r\n			rgba(255, 255, 255, 0.1) 50%,\r\n			rgba(255, 255, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-r8pez8-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:4px}.skeleton-button.svelte-r8pez8{width:140px;height:36px;background:linear-gradient(\r\n			90deg,\r\n			rgba(255, 255, 255, 0.05) 0%,\r\n			rgba(255, 255, 255, 0.1) 50%,\r\n			rgba(255, 255, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-r8pez8-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:4px}.skeleton-grid.svelte-r8pez8{display:grid;grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));gap:16px}.skeleton-card.svelte-r8pez8{aspect-ratio:4 / 3;background:linear-gradient(\r\n			90deg,\r\n			rgba(122, 184, 255, 0.05) 0%,\r\n			rgba(122, 184, 255, 0.1) 50%,\r\n			rgba(122, 184, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-r8pez8-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:8px;border:1px solid rgba(122, 184, 255, 0.1)}@keyframes svelte-r8pez8-skeleton-shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}",
  map: '{"version":3,"file":"PatternListSkeleton.svelte","sources":["PatternListSkeleton.svelte"],"sourcesContent":["<div class=\\"pattern-list-skeleton\\">\\r\\n\\t<div class=\\"skeleton-header\\">\\r\\n\\t\\t<div class=\\"skeleton-title\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-button\\"></div>\\r\\n\\t</div>\\r\\n\\t<div class=\\"skeleton-grid\\">\\r\\n\\t\\t<div class=\\"skeleton-card\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-card\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-card\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-card\\"></div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.pattern-list-skeleton {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100%;\\r\\n\\t\\tbackground: #1a1a1a;\\r\\n\\t\\tpadding: 20px;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tgap: 24px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-header {\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: space-between;\\r\\n\\t\\tgap: 16px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-title {\\r\\n\\t\\twidth: 120px;\\r\\n\\t\\theight: 28px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-button {\\r\\n\\t\\twidth: 140px;\\r\\n\\t\\theight: 36px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-grid {\\r\\n\\t\\tdisplay: grid;\\r\\n\\t\\tgrid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\\r\\n\\t\\tgap: 16px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-card {\\r\\n\\t\\taspect-ratio: 4 / 3;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(122, 184, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 8px;\\r\\n\\t\\tborder: 1px solid rgba(122, 184, 255, 0.1);\\r\\n\\t}\\r\\n\\r\\n\\t@keyframes skeleton-shimmer {\\r\\n\\t\\t0% {\\r\\n\\t\\t\\tbackground-position: -200% 0;\\r\\n\\t\\t}\\r\\n\\t\\t100% {\\r\\n\\t\\t\\tbackground-position: 200% 0;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</style>\\r\\n\\r\\n"],"names":[],"mappings":"AAcC,oCAAuB,CACtB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,OAAO,CACnB,OAAO,CAAE,IAAI,CACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IACN,CAEA,8BAAiB,CAChB,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,aAAa,CAC9B,GAAG,CAAE,IACN,CAEA,6BAAgB,CACf,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE;AACd,GAAG,KAAK,CAAC;AACT,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI;AACjC,GAAG,CACD,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,SAAS,CAAE,8BAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CACrD,aAAa,CAAE,GAChB,CAEA,8BAAiB,CAChB,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE;AACd,GAAG,KAAK,CAAC;AACT,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI;AACjC,GAAG,CACD,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,SAAS,CAAE,8BAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CACrD,aAAa,CAAE,GAChB,CAEA,4BAAe,CACd,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,OAAO,SAAS,CAAC,CAAC,OAAO,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAC5D,GAAG,CAAE,IACN,CAEA,4BAAe,CACd,YAAY,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CACnB,UAAU,CAAE;AACd,GAAG,KAAK,CAAC;AACT,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI;AACjC,GAAG,CACD,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,SAAS,CAAE,8BAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CACrD,aAAa,CAAE,GAAG,CAClB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAC1C,CAEA,WAAW,8BAAiB,CAC3B,EAAG,CACF,mBAAmB,CAAE,KAAK,CAAC,CAC5B,CACA,IAAK,CACJ,mBAAmB,CAAE,IAAI,CAAC,CAC3B,CACD"}'
};
const PatternListSkeleton = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  $$result.css.add(css$1);
  return `<div class="pattern-list-skeleton svelte-r8pez8" data-svelte-h="svelte-7duwsv"><div class="skeleton-header svelte-r8pez8"><div class="skeleton-title svelte-r8pez8"></div> <div class="skeleton-button svelte-r8pez8"></div></div> <div class="skeleton-grid svelte-r8pez8"><div class="skeleton-card svelte-r8pez8"></div> <div class="skeleton-card svelte-r8pez8"></div> <div class="skeleton-card svelte-r8pez8"></div> <div class="skeleton-card svelte-r8pez8"></div></div> </div>`;
});
const css = {
  code: ".project-skeleton.svelte-1n03c9x{width:100%;height:100vh;display:flex;flex-direction:column;background:#1a1a1a}.skeleton-toolbar.svelte-1n03c9x{height:60px;background:#222;border-bottom:1px solid #333;display:flex;align-items:center;justify-content:center;gap:12px;padding:0 20px}.skeleton-toolbar-button.svelte-1n03c9x{width:80px;height:36px;background:linear-gradient(\r\n			90deg,\r\n			rgba(255, 255, 255, 0.05) 0%,\r\n			rgba(255, 255, 255, 0.1) 50%,\r\n			rgba(255, 255, 255, 0.05) 100%\r\n		);background-size:200% 100%;animation:svelte-1n03c9x-skeleton-shimmer 1.5s ease-in-out infinite;border-radius:4px}.skeleton-toolbar-button-large.svelte-1n03c9x{width:120px}.skeleton-main.svelte-1n03c9x{flex:1;display:flex;overflow:hidden}.skeleton-sidebar.svelte-1n03c9x{width:280px;border-right:1px solid #333}.skeleton-content.svelte-1n03c9x{flex:1;overflow:hidden}@keyframes svelte-1n03c9x-skeleton-shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}",
  map: `{"version":3,"file":"ProjectSkeleton.svelte","sources":["ProjectSkeleton.svelte"],"sourcesContent":["<script lang=\\"ts\\">import CanvasSkeleton from \\"./CanvasSkeleton.svelte\\";\\nimport SidebarSkeleton from \\"./SidebarSkeleton.svelte\\";\\nimport TimelineSkeleton from \\"./TimelineSkeleton.svelte\\";\\nimport PatternListSkeleton from \\"./PatternListSkeleton.svelte\\";\\nimport { viewStore } from \\"$lib/stores/viewStore\\";\\nexport let viewMode = null;\\nexport let isPatternEditor = false;\\n$: effectiveViewMode = viewMode ?? $viewStore;\\n<\/script>\\r\\n\\r\\n<div class=\\"project-skeleton\\">\\r\\n\\t<div class=\\"skeleton-toolbar\\">\\r\\n\\t\\t<div class=\\"skeleton-toolbar-button\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-toolbar-button\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-toolbar-button skeleton-toolbar-button-large\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-toolbar-button\\"></div>\\r\\n\\t\\t<div class=\\"skeleton-toolbar-button\\"></div>\\r\\n\\t</div>\\r\\n\\t<div class=\\"skeleton-main\\">\\r\\n\\t\\t<div class=\\"skeleton-sidebar\\">\\r\\n\\t\\t\\t<SidebarSkeleton />\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\"skeleton-content\\">\\r\\n\\t\\t\\t{#if effectiveViewMode === 'arrangement'}\\r\\n\\t\\t\\t\\t<TimelineSkeleton />\\r\\n\\t\\t\\t{:else if isPatternEditor}\\r\\n\\t\\t\\t\\t<CanvasSkeleton />\\r\\n\\t\\t\\t{:else}\\r\\n\\t\\t\\t\\t<PatternListSkeleton />\\r\\n\\t\\t\\t{/if}\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<style>\\r\\n\\t.project-skeleton {\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\theight: 100vh;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\tflex-direction: column;\\r\\n\\t\\tbackground: #1a1a1a;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-toolbar {\\r\\n\\t\\theight: 60px;\\r\\n\\t\\tbackground: #222;\\r\\n\\t\\tborder-bottom: 1px solid #333;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\talign-items: center;\\r\\n\\t\\tjustify-content: center;\\r\\n\\t\\tgap: 12px;\\r\\n\\t\\tpadding: 0 20px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-toolbar-button {\\r\\n\\t\\twidth: 80px;\\r\\n\\t\\theight: 36px;\\r\\n\\t\\tbackground: linear-gradient(\\r\\n\\t\\t\\t90deg,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 0%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.1) 50%,\\r\\n\\t\\t\\trgba(255, 255, 255, 0.05) 100%\\r\\n\\t\\t);\\r\\n\\t\\tbackground-size: 200% 100%;\\r\\n\\t\\tanimation: skeleton-shimmer 1.5s ease-in-out infinite;\\r\\n\\t\\tborder-radius: 4px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-toolbar-button-large {\\r\\n\\t\\twidth: 120px;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-main {\\r\\n\\t\\tflex: 1;\\r\\n\\t\\tdisplay: flex;\\r\\n\\t\\toverflow: hidden;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-sidebar {\\r\\n\\t\\twidth: 280px;\\r\\n\\t\\tborder-right: 1px solid #333;\\r\\n\\t}\\r\\n\\r\\n\\t.skeleton-content {\\r\\n\\t\\tflex: 1;\\r\\n\\t\\toverflow: hidden;\\r\\n\\t}\\r\\n\\r\\n\\t@keyframes skeleton-shimmer {\\r\\n\\t\\t0% {\\r\\n\\t\\t\\tbackground-position: -200% 0;\\r\\n\\t\\t}\\r\\n\\t\\t100% {\\r\\n\\t\\t\\tbackground-position: 200% 0;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n</style>\\r\\n\\r\\n"],"names":[],"mappings":"AAmCC,gCAAkB,CACjB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,KAAK,CACb,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,UAAU,CAAE,OACb,CAEA,gCAAkB,CACjB,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE,IAAI,CAChB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CAC7B,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,CACvB,GAAG,CAAE,IAAI,CACT,OAAO,CAAE,CAAC,CAAC,IACZ,CAEA,uCAAyB,CACxB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,UAAU,CAAE;AACd,GAAG,KAAK,CAAC;AACT,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;AAChC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI;AACjC,GAAG,CACD,eAAe,CAAE,IAAI,CAAC,IAAI,CAC1B,SAAS,CAAE,+BAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CACrD,aAAa,CAAE,GAChB,CAEA,6CAA+B,CAC9B,KAAK,CAAE,KACR,CAEA,6BAAe,CACd,IAAI,CAAE,CAAC,CACP,OAAO,CAAE,IAAI,CACb,QAAQ,CAAE,MACX,CAEA,gCAAkB,CACjB,KAAK,CAAE,KAAK,CACZ,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,IACzB,CAEA,gCAAkB,CACjB,IAAI,CAAE,CAAC,CACP,QAAQ,CAAE,MACX,CAEA,WAAW,+BAAiB,CAC3B,EAAG,CACF,mBAAmB,CAAE,KAAK,CAAC,CAC5B,CACA,IAAK,CACJ,mBAAmB,CAAE,IAAI,CAAC,CAC3B,CACD"}`
};
const ProjectSkeleton = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let effectiveViewMode;
  let $viewStore, $$unsubscribe_viewStore;
  $$unsubscribe_viewStore = subscribe(viewStore, (value) => $viewStore = value);
  let { viewMode = null } = $$props;
  let { isPatternEditor = false } = $$props;
  if ($$props.viewMode === void 0 && $$bindings.viewMode && viewMode !== void 0) $$bindings.viewMode(viewMode);
  if ($$props.isPatternEditor === void 0 && $$bindings.isPatternEditor && isPatternEditor !== void 0) $$bindings.isPatternEditor(isPatternEditor);
  $$result.css.add(css);
  effectiveViewMode = viewMode ?? $viewStore;
  $$unsubscribe_viewStore();
  return `<div class="project-skeleton svelte-1n03c9x"><div class="skeleton-toolbar svelte-1n03c9x" data-svelte-h="svelte-mabtkb"><div class="skeleton-toolbar-button svelte-1n03c9x"></div> <div class="skeleton-toolbar-button svelte-1n03c9x"></div> <div class="skeleton-toolbar-button skeleton-toolbar-button-large svelte-1n03c9x"></div> <div class="skeleton-toolbar-button svelte-1n03c9x"></div> <div class="skeleton-toolbar-button svelte-1n03c9x"></div></div> <div class="skeleton-main svelte-1n03c9x"><div class="skeleton-sidebar svelte-1n03c9x">${validate_component(SidebarSkeleton, "SidebarSkeleton").$$render($$result, {}, {}, {})}</div> <div class="skeleton-content svelte-1n03c9x">${effectiveViewMode === "arrangement" ? `${validate_component(TimelineSkeleton, "TimelineSkeleton").$$render($$result, {}, {}, {})}` : `${isPatternEditor ? `${validate_component(CanvasSkeleton, "CanvasSkeleton").$$render($$result, {}, {}, {})}` : `${validate_component(PatternListSkeleton, "PatternListSkeleton").$$render($$result, {}, {}, {})}`}`}</div></div> </div>`;
});
export {
  NumericInput as N,
  ParamControl as P,
  Toolbar as T,
  automationStore as a,
  ProjectSkeleton as b,
  canvasStore as c,
  editorModeStore as d,
  engineStore as e,
  synthPluginStore as f,
  playbackStore as p,
  selectionStore as s,
  viewStore as v
};
