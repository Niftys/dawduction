function o2(T,Y){for(var G=0;G<Y.length;G++){const D=Y[G];if(typeof D!="string"&&!Array.isArray(D)){for(const r0 in D)if(r0!=="default"&&!(r0 in T)){const U=Object.getOwnPropertyDescriptor(D,r0);U&&Object.defineProperty(T,r0,U.get?U:{enumerable:!0,get:()=>D[r0]})}}}return Object.freeze(Object.defineProperty(T,Symbol.toStringTag,{value:"Module"}))}var xe={};function h2(T){return new Int8Array(T)}function u2(T){return new Int16Array(T)}function Ya(T){return new Int32Array(T)}function $a(T){return new Float32Array(T)}function f2(T){return new Float64Array(T)}function qa(T){if(T.length==1)return $a(T[0]);var Y=T[0];T=T.slice(1);for(var G=[],D=0;D<Y;D++)G.push(qa(T));return G}function Ga(T){if(T.length==1)return Ya(T[0]);var Y=T[0];T=T.slice(1);for(var G=[],D=0;D<Y;D++)G.push(Ga(T));return G}function Pa(T){if(T.length==1)return u2(T[0]);var Y=T[0];T=T.slice(1);for(var G=[],D=0;D<Y;D++)G.push(Pa(T));return G}function Da(T){if(T.length==1)return new Array(T[0]);var Y=T[0];T=T.slice(1);for(var G=[],D=0;D<Y;D++)G.push(Da(T));return G}var Za={};Za.fill=function(T,Y,G,D){if(arguments.length==2)for(var r0=0;r0<T.length;r0++)T[r0]=arguments[1];else for(var r0=Y;r0<G;r0++)T[r0]=D};var ce={};ce.arraycopy=function(T,Y,G,D,r0){for(var U=Y+r0;Y<U;)G[D++]=T[Y++]};ce.out={};ce.out.println=function(T){console.log(T)};ce.out.printf=function(){console.log.apply(console,arguments)};var pe={};pe.SQRT2=1.4142135623730951;pe.FAST_LOG10=function(T){return Math.log10(T)};pe.FAST_LOG10_X=function(T,Y){return Math.log10(T)*Y};function x1(T){this.ordinal=T}x1.short_block_allowed=new x1(0);x1.short_block_coupled=new x1(1);x1.short_block_dispensed=new x1(2);x1.short_block_forced=new x1(3);var Ka={};Ka.MAX_VALUE=34028235e31;function v1(T){this.ordinal=T}v1.vbr_off=new v1(0);v1.vbr_mt=new v1(1);v1.vbr_rh=new v1(2);v1.vbr_abr=new v1(3);v1.vbr_mtrh=new v1(4);v1.vbr_default=v1.vbr_mtrh;var m2=function(T){},V0={System:ce,VbrMode:v1,Float:Ka,ShortBlock:x1,Util:pe,Arrays:Za,new_array_n:Da,new_byte:h2,new_double:f2,new_float:$a,new_float_n:qa,new_int:Ya,new_int_n:Ga,new_short_n:Pa,assert:m2},Pe,ba;function b2(){if(ba)return Pe;ba=1;var T=V0,Y=T.System,G=T.Util,D=T.Arrays,r0=T.new_float,U=W0();function K(){var q=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*G.SQRT2*.5/2384e-9,.017876148*G.SQRT2*.5/2384e-9,.003134727*G.SQRT2*.5/2384e-9,.002457142*G.SQRT2*.5/2384e-9,971317e-9*G.SQRT2*.5/2384e-9,218868e-9*G.SQRT2*.5/2384e-9,101566e-9*G.SQRT2*.5/2384e-9,13828e-9*G.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],Z=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],y=Z[U.SHORT_TYPE],O=Z[U.SHORT_TYPE],M=Z[U.SHORT_TYPE],a0=Z[U.SHORT_TYPE],H=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function I(d,t,e){for(var c=10,u=t+238-14-286,R=-15;R<0;R++){var f,v,h;f=q[c+-10],v=d[u+-224]*f,h=d[t+224]*f,f=q[c+-9],v+=d[u+-160]*f,h+=d[t+160]*f,f=q[c+-8],v+=d[u+-96]*f,h+=d[t+96]*f,f=q[c+-7],v+=d[u+-32]*f,h+=d[t+32]*f,f=q[c+-6],v+=d[u+32]*f,h+=d[t+-32]*f,f=q[c+-5],v+=d[u+96]*f,h+=d[t+-96]*f,f=q[c+-4],v+=d[u+160]*f,h+=d[t+-160]*f,f=q[c+-3],v+=d[u+224]*f,h+=d[t+-224]*f,f=q[c+-2],v+=d[t+-256]*f,h-=d[u+256]*f,f=q[c+-1],v+=d[t+-192]*f,h-=d[u+192]*f,f=q[c+0],v+=d[t+-128]*f,h-=d[u+128]*f,f=q[c+1],v+=d[t+-64]*f,h-=d[u+64]*f,f=q[c+2],v+=d[t+0]*f,h-=d[u+0]*f,f=q[c+3],v+=d[t+64]*f,h-=d[u+-64]*f,f=q[c+4],v+=d[t+128]*f,h-=d[u+-128]*f,f=q[c+5],v+=d[t+192]*f,h-=d[u+-192]*f,v*=q[c+6],f=h-v,e[30+R*2]=h+v,e[31+R*2]=q[c+7]*f,c+=18,t--,u++}{var v,h,s,o;h=d[t+-16]*q[c+-10],v=d[t+-32]*q[c+-2],h+=(d[t+-48]-d[t+16])*q[c+-9],v+=d[t+-96]*q[c+-1],h+=(d[t+-80]+d[t+48])*q[c+-8],v+=d[t+-160]*q[c+0],h+=(d[t+-112]-d[t+80])*q[c+-7],v+=d[t+-224]*q[c+1],h+=(d[t+-144]+d[t+112])*q[c+-6],v-=d[t+32]*q[c+2],h+=(d[t+-176]-d[t+144])*q[c+-5],v-=d[t+96]*q[c+3],h+=(d[t+-208]+d[t+176])*q[c+-4],v-=d[t+160]*q[c+4],h+=(d[t+-240]-d[t+208])*q[c+-3],v-=d[t+224],s=v-h,o=v+h,h=e[14],v=e[15]-h,e[31]=o+h,e[30]=s+v,e[15]=s-v,e[14]=o-h}{var a;a=e[28]-e[0],e[0]+=e[28],e[28]=a*q[c+-2*18+7],a=e[29]-e[1],e[1]+=e[29],e[29]=a*q[c+-2*18+7],a=e[26]-e[2],e[2]+=e[26],e[26]=a*q[c+-4*18+7],a=e[27]-e[3],e[3]+=e[27],e[27]=a*q[c+-4*18+7],a=e[24]-e[4],e[4]+=e[24],e[24]=a*q[c+-6*18+7],a=e[25]-e[5],e[5]+=e[25],e[25]=a*q[c+-6*18+7],a=e[22]-e[6],e[6]+=e[22],e[22]=a*G.SQRT2,a=e[23]-e[7],e[7]+=e[23],e[23]=a*G.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],a=e[6],e[6]=e[31]-a,e[31]=e[31]+a,a=e[7],e[7]=e[30]-a,e[30]=e[30]+a,a=e[22],e[22]=e[15]-a,e[15]=e[15]+a,a=e[23],e[23]=e[14]-a,e[14]=e[14]+a,a=e[20]-e[8],e[8]+=e[20],e[20]=a*q[c+-10*18+7],a=e[21]-e[9],e[9]+=e[21],e[21]=a*q[c+-10*18+7],a=e[18]-e[10],e[10]+=e[18],e[18]=a*q[c+-12*18+7],a=e[19]-e[11],e[11]+=e[19],e[19]=a*q[c+-12*18+7],a=e[16]-e[12],e[12]+=e[16],e[16]=a*q[c+-14*18+7],a=e[17]-e[13],e[13]+=e[17],e[17]=a*q[c+-14*18+7],a=-e[20]+e[24],e[20]+=e[24],e[24]=a*q[c+-12*18+7],a=-e[21]+e[25],e[21]+=e[25],e[25]=a*q[c+-12*18+7],a=e[4]-e[8],e[4]+=e[8],e[8]=a*q[c+-12*18+7],a=e[5]-e[9],e[5]+=e[9],e[9]=a*q[c+-12*18+7],a=e[0]-e[12],e[0]+=e[12],e[12]=a*q[c+-4*18+7],a=e[1]-e[13],e[1]+=e[13],e[13]=a*q[c+-4*18+7],a=e[16]-e[28],e[16]+=e[28],e[28]=a*q[c+-4*18+7],a=-e[17]+e[29],e[17]+=e[29],e[29]=a*q[c+-4*18+7],a=G.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=a,a=G.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=a,a=G.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=a-e[18],a=G.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=a-e[19],a=e[2],e[19]-=e[3],e[3]-=a,e[2]=e[31]-a,e[31]+=a,a=e[3],e[11]-=e[19],e[18]-=a,e[3]=e[30]-a,e[30]+=a,a=e[18],e[27]-=e[11],e[19]-=a,e[18]=e[15]-a,e[15]+=a,a=e[19],e[10]-=a,e[19]=e[14]-a,e[14]+=a,a=e[10],e[11]-=a,e[10]=e[23]-a,e[23]+=a,a=e[11],e[26]-=a,e[11]=e[22]-a,e[22]+=a,a=e[26],e[27]-=a,e[26]=e[7]-a,e[7]+=a,a=e[27],e[27]=e[6]-a,e[6]+=a,a=G.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=a,a=G.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=a,a=G.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=a,a=G.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=a,a=-G.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=a-e[8],a=-G.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=a-e[9],a=-G.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=a-e[25],a=-G.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=a-e[24],a=e[24]-e[16],e[24]=a,a=e[20]-a,e[20]=a,a=e[28]-a,e[28]=a,a=e[25]-e[17],e[25]=a,a=e[21]-a,e[21]=a,a=e[29]-a,e[29]=a,a=e[17]-e[1],e[17]=a,a=e[9]-a,e[9]=a,a=e[25]-a,e[25]=a,a=e[5]-a,e[5]=a,a=e[21]-a,e[21]=a,a=e[13]-a,e[13]=a,a=e[29]-a,e[29]=a,a=e[1]-e[0],e[1]=a,a=e[16]-a,e[16]=a,a=e[17]-a,e[17]=a,a=e[8]-a,e[8]=a,a=e[9]-a,e[9]=a,a=e[24]-a,e[24]=a,a=e[25]-a,e[25]=a,a=e[4]-a,e[4]=a,a=e[5]-a,e[5]=a,a=e[20]-a,e[20]=a,a=e[21]-a,e[21]=a,a=e[12]-a,e[12]=a,a=e[13]-a,e[13]=a,a=e[28]-a,e[28]=a,a=e[29]-a,e[29]=a,a=e[0],e[0]+=e[31],e[31]-=a,a=e[1],e[1]+=e[30],e[30]-=a,a=e[16],e[16]+=e[15],e[15]-=a,a=e[17],e[17]+=e[14],e[14]-=a,a=e[8],e[8]+=e[23],e[23]-=a,a=e[9],e[9]+=e[22],e[22]-=a,a=e[24],e[24]+=e[7],e[7]-=a,a=e[25],e[25]+=e[6],e[6]-=a,a=e[4],e[4]+=e[27],e[27]-=a,a=e[5],e[5]+=e[26],e[26]-=a,a=e[20],e[20]+=e[11],e[11]-=a,a=e[21],e[21]+=e[10],e[10]-=a,a=e[12],e[12]+=e[19],e[19]-=a,a=e[13],e[13]+=e[18],e[18]-=a,a=e[28],e[28]+=e[3],e[3]-=a,a=e[29],e[29]+=e[2],e[2]-=a}}function n0(d,t){for(var e=0;e<3;e++){var c,u,R,f,v,h;f=d[t+2*3]*Z[U.SHORT_TYPE][0]-d[t+5*3],c=d[t+0*3]*Z[U.SHORT_TYPE][2]-d[t+3*3],u=f+c,R=f-c,f=d[t+5*3]*Z[U.SHORT_TYPE][0]+d[t+2*3],c=d[t+3*3]*Z[U.SHORT_TYPE][2]+d[t+0*3],v=f+c,h=-f+c,c=(d[t+1*3]*Z[U.SHORT_TYPE][1]-d[t+4*3])*2069978111953089e-26,f=(d[t+4*3]*Z[U.SHORT_TYPE][1]+d[t+1*3])*2069978111953089e-26,d[t+3*0]=u*190752519173728e-25+c,d[t+3*5]=-v*190752519173728e-25+f,R=R*.8660254037844387*1907525191737281e-26,v=v*.5*1907525191737281e-26+f,d[t+3*1]=R-v,d[t+3*2]=R+v,u=u*.5*1907525191737281e-26-c,h=h*.8660254037844387*1907525191737281e-26,d[t+3*3]=u+h,d[t+3*4]=u-h,t++}}function $(d,t,e){var c,u;{var R,f,v,h,s,o,a,i;R=e[17]-e[9],v=e[15]-e[11],h=e[14]-e[12],s=e[0]+e[8],o=e[1]+e[7],a=e[2]+e[6],i=e[3]+e[5],d[t+17]=s+a-i-(o-e[4]),u=(s+a-i)*O[19]+(o-e[4]),c=(R-v-h)*O[18],d[t+5]=c+u,d[t+6]=c-u,f=(e[16]-e[10])*O[18],o=o*O[19]+e[4],c=R*O[12]+f+v*O[13]+h*O[14],u=-s*O[16]+o-a*O[17]+i*O[15],d[t+1]=c+u,d[t+2]=c-u,c=R*O[13]-f-v*O[14]+h*O[12],u=-s*O[17]+o-a*O[15]+i*O[16],d[t+9]=c+u,d[t+10]=c-u,c=R*O[14]-f+v*O[12]-h*O[13],u=s*O[15]-o+a*O[16]-i*O[17],d[t+13]=c+u,d[t+14]=c-u}{var n,l,m,X,E,x,r,_;n=e[8]-e[0],m=e[6]-e[2],X=e[5]-e[3],E=e[17]+e[9],x=e[16]+e[10],r=e[15]+e[11],_=e[14]+e[12],d[t+0]=E+r+_+(x+e[13]),c=(E+r+_)*O[19]-(x+e[13]),u=(n-m+X)*O[18],d[t+11]=c+u,d[t+12]=c-u,l=(e[7]-e[1])*O[18],x=e[13]-x*O[19],c=E*O[15]-x+r*O[16]+_*O[17],u=n*O[14]+l+m*O[12]+X*O[13],d[t+3]=c+u,d[t+4]=c-u,c=-E*O[17]+x-r*O[15]-_*O[16],u=n*O[13]+l-m*O[14]-X*O[12],d[t+7]=c+u,d[t+8]=c-u,c=-E*O[16]+x-r*O[17]-_*O[15],u=n*O[12]-l+m*O[13]-X*O[14],d[t+15]=c+u,d[t+16]=c-u}}this.mdct_sub48=function(d,t,e){for(var c=t,u=286,R=0;R<d.channels_out;R++){for(var f=0;f<d.mode_gr;f++){for(var v,h=d.l3_side.tt[f][R],s=h.xr,o=0,a=d.sb_sample[R][1-f],i=0,n=0;n<18/2;n++)for(I(c,u,a[i]),I(c,u+32,a[i+1]),i+=2,u+=64,v=1;v<32;v+=2)a[i-1][v]*=-1;for(v=0;v<32;v++,o+=18){var l=h.block_type,m=d.sb_sample[R][f],X=d.sb_sample[R][1-f];if(h.mixed_block_flag!=0&&v<2&&(l=0),d.amp_filter[v]<1e-12)D.fill(s,o+0,o+18,0);else{if(d.amp_filter[v]<1)for(var n=0;n<18;n++)X[n][H[v]]*=d.amp_filter[v];if(l==U.SHORT_TYPE){for(var n=-12/4;n<0;n++){var E=Z[U.SHORT_TYPE][n+3];s[o+n*3+9]=m[9+n][H[v]]*E-m[8-n][H[v]],s[o+n*3+18]=m[14-n][H[v]]*E+m[15+n][H[v]],s[o+n*3+10]=m[15+n][H[v]]*E-m[14-n][H[v]],s[o+n*3+19]=X[2-n][H[v]]*E+X[3+n][H[v]],s[o+n*3+11]=X[3+n][H[v]]*E-X[2-n][H[v]],s[o+n*3+20]=X[8-n][H[v]]*E+X[9+n][H[v]]}n0(s,o)}else{for(var x=r0(18),n=-36/4;n<0;n++){var r,_;r=Z[l][n+27]*X[n+9][H[v]]+Z[l][n+36]*X[8-n][H[v]],_=Z[l][n+9]*m[n+9][H[v]]-Z[l][n+18]*m[8-n][H[v]],x[n+9]=r-_*y[3+n+9],x[n+18]=r*y[3+n+9]+_}$(s,o,x)}}if(l!=U.SHORT_TYPE&&v!=0)for(var n=7;n>=0;--n){var L,p;L=s[o+n]*M[20+n]+s[o+-1-n]*a0[28+n],p=s[o+n]*a0[28+n]-s[o+-1-n]*M[20+n],s[o+-1-n]=L,s[o+n]=p}}}if(c=e,u=286,d.mode_gr==1)for(var s0=0;s0<18;s0++)Y.arraycopy(d.sb_sample[R][1][s0],0,d.sb_sample[R][0][s0],0,32)}}}return Pe=K,Pe}var De,ca;function Ua(){if(ca)return De;ca=1;var T=W0(),Y=V0,G=Y.System,D=Y.new_float,r0=Y.new_float_n;function U(){this.l=D(T.SBMAX_l),this.s=r0([T.SBMAX_s,3]);var K=this;this.assign=function(q){G.arraycopy(q.l,0,K.l,0,T.SBMAX_l);for(var Z=0;Z<T.SBMAX_s;Z++)for(var y=0;y<3;y++)K.s[Z][y]=q.s[Z][y]}}return De=U,De}var Ze,da;function c2(){if(da)return Ze;da=1;var T=Ua();function Y(){this.thm=new T,this.en=new T}return Ze=Y,Ze}var Ke,Sa;function W0(){if(Sa)return Ke;Sa=1;var T=V0,Y=T.System,G=T.VbrMode,D=T.new_array_n,r0=T.new_float,U=T.new_float_n,K=T.new_int,q=T.assert;Z.ENCDELAY=576,Z.POSTDELAY=1152,Z.MDCTDELAY=48,Z.FFTOFFSET=224+Z.MDCTDELAY,Z.DECDELAY=528,Z.SBLIMIT=32,Z.CBANDS=64,Z.SBPSY_l=21,Z.SBPSY_s=12,Z.SBMAX_l=22,Z.SBMAX_s=13,Z.PSFB21=6,Z.PSFB12=6,Z.BLKSIZE=1024,Z.HBLKSIZE=Z.BLKSIZE/2+1,Z.BLKSIZE_s=256,Z.HBLKSIZE_s=Z.BLKSIZE_s/2+1,Z.NORM_TYPE=0,Z.START_TYPE=1,Z.SHORT_TYPE=2,Z.STOP_TYPE=3,Z.MPG_MD_LR_LR=0,Z.MPG_MD_LR_I=1,Z.MPG_MD_MS_LR=2,Z.MPG_MD_MS_I=3,Z.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function Z(){var y=b2(),O=c2(),M=Z.FFTOFFSET,a0=Z.MPG_MD_MS_LR,H=null;this.psy=null;var I=null,n0=null,$=null;this.setModules=function(u,R,f,v){H=u,this.psy=R,I=R,n0=v,$=f};var d=new y;function t(u){var R,f;if(u.ATH.useAdjust==0){u.ATH.adjust=1;return}if(f=u.loudness_sq[0][0],R=u.loudness_sq[1][0],u.channels_out==2?(f+=u.loudness_sq[0][1],R+=u.loudness_sq[1][1]):(f+=f,R+=R),u.mode_gr==2&&(f=Math.max(f,R)),f*=.5,f*=u.ATH.aaSensitivityP,f>.03125)u.ATH.adjust>=1?u.ATH.adjust=1:u.ATH.adjust<u.ATH.adjustLimit&&(u.ATH.adjust=u.ATH.adjustLimit),u.ATH.adjustLimit=1;else{var v=31.98*f+625e-6;u.ATH.adjust>=v?(u.ATH.adjust*=v*.075+.925,u.ATH.adjust<v&&(u.ATH.adjust=v)):u.ATH.adjustLimit>=v?u.ATH.adjust=v:u.ATH.adjust<u.ATH.adjustLimit&&(u.ATH.adjust=u.ATH.adjustLimit),u.ATH.adjustLimit=v}}function e(u){var R,f;for(q(0<=u.bitrate_index&&u.bitrate_index<16),q(0<=u.mode_ext&&u.mode_ext<4),u.bitrate_stereoMode_Hist[u.bitrate_index][4]++,u.bitrate_stereoMode_Hist[15][4]++,u.channels_out==2&&(u.bitrate_stereoMode_Hist[u.bitrate_index][u.mode_ext]++,u.bitrate_stereoMode_Hist[15][u.mode_ext]++),R=0;R<u.mode_gr;++R)for(f=0;f<u.channels_out;++f){var v=u.l3_side.tt[R][f].block_type|0;u.l3_side.tt[R][f].mixed_block_flag!=0&&(v=4),u.bitrate_blockType_Hist[u.bitrate_index][v]++,u.bitrate_blockType_Hist[u.bitrate_index][5]++,u.bitrate_blockType_Hist[15][v]++,u.bitrate_blockType_Hist[15][5]++}}function c(u,R){var f=u.internal_flags,v,h;if(f.lame_encode_frame_init==0){var s,o,a=r0(2014),i=r0(2014);for(f.lame_encode_frame_init=1,s=0,o=0;s<286+576*(1+f.mode_gr);++s)s<576*f.mode_gr?(a[s]=0,f.channels_out==2&&(i[s]=0)):(a[s]=R[0][o],f.channels_out==2&&(i[s]=R[1][o]),++o);for(h=0;h<f.mode_gr;h++)for(v=0;v<f.channels_out;v++)f.l3_side.tt[h][v].block_type=Z.SHORT_TYPE;d.mdct_sub48(f,a,i),q(576>=Z.FFTOFFSET),q(f.mf_size>=Z.BLKSIZE+u.framesize-Z.FFTOFFSET),q(f.mf_size>=512+u.framesize-32)}}this.lame_encode_mp3_frame=function(u,R,f,v,h,s){var o,a=D([2,2]);a[0][0]=new O,a[0][1]=new O,a[1][0]=new O,a[1][1]=new O;var i=D([2,2]);i[0][0]=new O,i[0][1]=new O,i[1][0]=new O,i[1][1]=new O;var n,l=[null,null],m=u.internal_flags,X=U([2,4]),E=[.5,.5],x=[[0,0],[0,0]],r=[[0,0],[0,0]],_,L,p;if(l[0]=R,l[1]=f,m.lame_encode_frame_init==0&&c(u,l),m.padding=0,(m.slot_lag-=m.frac_SpF)<0&&(m.slot_lag+=u.out_samplerate,m.padding=1),m.psymodel!=0){var s0,v0=[null,null],_0=0,i0=K(2);for(p=0;p<m.mode_gr;p++){for(L=0;L<m.channels_out;L++)v0[L]=l[L],_0=576+p*576-Z.FFTOFFSET;if(u.VBR==G.vbr_mtrh||u.VBR==G.vbr_mt?s0=I.L3psycho_anal_vbr(u,v0,_0,p,a,i,x[p],r[p],X[p],i0):s0=I.L3psycho_anal_ns(u,v0,_0,p,a,i,x[p],r[p],X[p],i0),s0!=0)return-4;for(u.mode==MPEGMode.JOINT_STEREO&&(E[p]=X[p][2]+X[p][3],E[p]>0&&(E[p]=X[p][3]/E[p])),L=0;L<m.channels_out;L++){var d0=m.l3_side.tt[p][L];d0.block_type=i0[L],d0.mixed_block_flag=0}}}else for(p=0;p<m.mode_gr;p++)for(L=0;L<m.channels_out;L++)m.l3_side.tt[p][L].block_type=Z.NORM_TYPE,m.l3_side.tt[p][L].mixed_block_flag=0,r[p][L]=x[p][L]=700;if(t(m),d.mdct_sub48(m,l[0],l[1]),m.mode_ext=Z.MPG_MD_LR_LR,u.force_ms)m.mode_ext=Z.MPG_MD_MS_LR;else if(u.mode==MPEGMode.JOINT_STEREO){var h0=0,t0=0;for(p=0;p<m.mode_gr;p++)for(L=0;L<m.channels_out;L++)h0+=r[p][L],t0+=x[p][L];if(h0<=1*t0){var B0=m.l3_side.tt[0],O0=m.l3_side.tt[m.mode_gr-1];B0[0].block_type==B0[1].block_type&&O0[0].block_type==O0[1].block_type&&(m.mode_ext=Z.MPG_MD_MS_LR)}}if(m.mode_ext==a0?(n=i,_=r):(n=a,_=x),u.analysis&&m.pinfo!=null)for(p=0;p<m.mode_gr;p++)for(L=0;L<m.channels_out;L++)m.pinfo.ms_ratio[p]=m.ms_ratio[p],m.pinfo.ms_ener_ratio[p]=E[p],m.pinfo.blocktype[p][L]=m.l3_side.tt[p][L].block_type,m.pinfo.pe[p][L]=_[p][L],Y.arraycopy(m.l3_side.tt[p][L].xr,0,m.pinfo.xr[p][L],0,576),m.mode_ext==a0&&(m.pinfo.ers[p][L]=m.pinfo.ers[p][L+2],Y.arraycopy(m.pinfo.energy[p][L+2],0,m.pinfo.energy[p][L],0,m.pinfo.energy[p][L].length));if(u.VBR==G.vbr_off||u.VBR==G.vbr_abr){var S0,I0;for(S0=0;S0<18;S0++)m.nsPsy.pefirbuf[S0]=m.nsPsy.pefirbuf[S0+1];for(I0=0,p=0;p<m.mode_gr;p++)for(L=0;L<m.channels_out;L++)I0+=_[p][L];for(m.nsPsy.pefirbuf[18]=I0,I0=m.nsPsy.pefirbuf[9],S0=0;S0<9;S0++)I0+=(m.nsPsy.pefirbuf[S0]+m.nsPsy.pefirbuf[18-S0])*Z.fircoef[S0];for(I0=670*5*m.mode_gr*m.channels_out/I0,p=0;p<m.mode_gr;p++)for(L=0;L<m.channels_out;L++)_[p][L]*=I0}if(m.iteration_loop.iteration_loop(u,_,E,n),H.format_bitstream(u),o=H.copy_buffer(m,v,h,s,1),u.bWriteVbrTag&&n0.addVbrFrame(u),u.analysis&&m.pinfo!=null){for(L=0;L<m.channels_out;L++){var T0;for(T0=0;T0<M;T0++)m.pinfo.pcmdata[L][T0]=m.pinfo.pcmdata[L][T0+u.framesize];for(T0=M;T0<1600;T0++)m.pinfo.pcmdata[L][T0]=l[L][T0-M]}$.set_frame_pinfo(u,n)}return e(m),o}}return Ke=Z,Ke}var Qa=V0,Ma=Qa.Util,Ra=Qa.new_float,P0=W0();function d2(){var T=Ra(P0.BLKSIZE),Y=Ra(P0.BLKSIZE_s/2),G=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function D(U,K,q){var Z=0,y,O,M;q<<=1;var a0=K+q;y=4;do{var H,I,n0,$,d,t,e;e=y>>1,$=y,d=y<<1,t=d+$,y=d<<1,O=K,M=O+e;do{var c,u,R,f;u=U[O+0]-U[O+$],c=U[O+0]+U[O+$],f=U[O+d]-U[O+t],R=U[O+d]+U[O+t],U[O+d]=c-R,U[O+0]=c+R,U[O+t]=u-f,U[O+$]=u+f,u=U[M+0]-U[M+$],c=U[M+0]+U[M+$],f=Ma.SQRT2*U[M+t],R=Ma.SQRT2*U[M+d],U[M+d]=c-R,U[M+0]=c+R,U[M+t]=u-f,U[M+$]=u+f,M+=y,O+=y}while(O<a0);for(I=G[Z+0],H=G[Z+1],n0=1;n0<e;n0++){var v,h;v=1-2*H*H,h=2*H*I,O=K+n0,M=K+$-n0;do{var s,o,a,c,u,i,R,n,f,l;o=h*U[O+$]-v*U[M+$],s=v*U[O+$]+h*U[M+$],u=U[O+0]-s,c=U[O+0]+s,i=U[M+0]-o,a=U[M+0]+o,o=h*U[O+t]-v*U[M+t],s=v*U[O+t]+h*U[M+t],f=U[O+d]-s,R=U[O+d]+s,l=U[M+d]-o,n=U[M+d]+o,o=H*R-I*l,s=I*R+H*l,U[O+d]=c-s,U[O+0]=c+s,U[M+t]=i-o,U[M+$]=i+o,o=I*n-H*f,s=H*n+I*f,U[M+d]=a-s,U[M+0]=a+s,U[O+t]=u-o,U[O+$]=u+o,M+=y,O+=y}while(O<a0);v=I,I=v*G[Z+0]-H*G[Z+1],H=v*G[Z+1]+H*G[Z+0]}Z+=2}while(y<q)}var r0=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(U,K,q,Z,y){for(var O=0;O<3;O++){var M=P0.BLKSIZE_s/2,a0=65535&576/3*(O+1),H=P0.BLKSIZE_s/8-1;do{var I,n0,$,d,t,e=r0[H<<2]&255;I=Y[e]*Z[q][y+e+a0],t=Y[127-e]*Z[q][y+e+a0+128],n0=I-t,I=I+t,$=Y[e+64]*Z[q][y+e+a0+64],t=Y[63-e]*Z[q][y+e+a0+192],d=$-t,$=$+t,M-=4,K[O][M+0]=I+$,K[O][M+2]=I-$,K[O][M+1]=n0+d,K[O][M+3]=n0-d,I=Y[e+1]*Z[q][y+e+a0+1],t=Y[126-e]*Z[q][y+e+a0+129],n0=I-t,I=I+t,$=Y[e+65]*Z[q][y+e+a0+65],t=Y[62-e]*Z[q][y+e+a0+193],d=$-t,$=$+t,K[O][M+P0.BLKSIZE_s/2+0]=I+$,K[O][M+P0.BLKSIZE_s/2+2]=I-$,K[O][M+P0.BLKSIZE_s/2+1]=n0+d,K[O][M+P0.BLKSIZE_s/2+3]=n0-d}while(--H>=0);D(K[O],M,P0.BLKSIZE_s/2)}},this.fft_long=function(U,K,q,Z,y){var O=P0.BLKSIZE/8-1,M=P0.BLKSIZE/2;do{var a0,H,I,n0,$,d=r0[O]&255;a0=T[d]*Z[q][y+d],$=T[d+512]*Z[q][y+d+512],H=a0-$,a0=a0+$,I=T[d+256]*Z[q][y+d+256],$=T[d+768]*Z[q][y+d+768],n0=I-$,I=I+$,M-=4,K[M+0]=a0+I,K[M+2]=a0-I,K[M+1]=H+n0,K[M+3]=H-n0,a0=T[d+1]*Z[q][y+d+1],$=T[d+513]*Z[q][y+d+513],H=a0-$,a0=a0+$,I=T[d+257]*Z[q][y+d+257],$=T[d+769]*Z[q][y+d+769],n0=I-$,I=I+$,K[M+P0.BLKSIZE/2+0]=a0+I,K[M+P0.BLKSIZE/2+2]=a0-I,K[M+P0.BLKSIZE/2+1]=H+n0,K[M+P0.BLKSIZE/2+3]=H-n0}while(--O>=0);D(K,M,P0.BLKSIZE/2)},this.init_fft=function(U){for(var K=0;K<P0.BLKSIZE;K++)T[K]=.42-.5*Math.cos(2*Math.PI*(K+.5)/P0.BLKSIZE)+.08*Math.cos(4*Math.PI*(K+.5)/P0.BLKSIZE);for(var K=0;K<P0.BLKSIZE_s/2;K++)Y[K]=.5*(1-Math.cos(2*Math.PI*(K+.5)/P0.BLKSIZE_s))}}var S2=d2,L1=V0,J1=L1.VbrMode,Aa=L1.Float,g1=L1.ShortBlock,e1=L1.Util,M2=L1.Arrays,D0=L1.new_float,h1=L1.new_float_n,F1=L1.new_int,R0=L1.assert,R2=S2,Q=W0();function A2(){var T=new R2,Y=2.302585092994046,G=2,D=16,r0=2,U=16,K=.34,q=1/(14752*14752)/(Q.BLKSIZE/2),Z=.01,y=.8,O=.6,M=.3,a0=3.5,H=21,I=.2302585093;function n0(b){return b}function $(b,S){for(var B=0,w=0;w<Q.BLKSIZE/2;++w)B+=b[w]*S.ATH.eql_w[w];return B*=q,B}function d(b,S,B,w,k,A,V,F,N,j,C){var W=b.internal_flags;if(N<2)T.fft_long(W,w[k],N,j,C),T.fft_short(W,A[V],N,j,C);else if(N==2){for(var l0=Q.BLKSIZE-1;l0>=0;--l0){var b0=w[k+0][l0],z=w[k+1][l0];w[k+0][l0]=(b0+z)*e1.SQRT2*.5,w[k+1][l0]=(b0-z)*e1.SQRT2*.5}for(var m0=2;m0>=0;--m0)for(var l0=Q.BLKSIZE_s-1;l0>=0;--l0){var b0=A[V+0][m0][l0],z=A[V+1][m0][l0];A[V+0][m0][l0]=(b0+z)*e1.SQRT2*.5,A[V+1][m0][l0]=(b0-z)*e1.SQRT2*.5}}S[0]=w[k+0][0],S[0]*=S[0];for(var l0=Q.BLKSIZE/2-1;l0>=0;--l0){var P=w[k+0][Q.BLKSIZE/2-l0],u0=w[k+0][Q.BLKSIZE/2+l0];S[Q.BLKSIZE/2-l0]=(P*P+u0*u0)*.5}for(var m0=2;m0>=0;--m0){B[m0][0]=A[V+0][m0][0],B[m0][0]*=B[m0][0];for(var l0=Q.BLKSIZE_s/2-1;l0>=0;--l0){var P=A[V+0][m0][Q.BLKSIZE_s/2-l0],u0=A[V+0][m0][Q.BLKSIZE_s/2+l0];B[m0][Q.BLKSIZE_s/2-l0]=(P*P+u0*u0)*.5}}{for(var A0=0,l0=11;l0<Q.HBLKSIZE;l0++)A0+=S[l0];W.tot_ener[N]=A0}if(b.analysis){for(var l0=0;l0<Q.HBLKSIZE;l0++)W.pinfo.energy[F][N][l0]=W.pinfo.energy_save[N][l0],W.pinfo.energy_save[N][l0]=S[l0];W.pinfo.pe[F][N]=W.pe[N]}b.athaa_loudapprox==2&&N<2&&(W.loudness_sq[F][N]=W.loudness_sq_save[N],W.loudness_sq_save[N]=$(S,W))}var t=8,e=23,c=15,u,R,f,v=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function h(){u=Math.pow(10,(t+1)/16),R=Math.pow(10,(e+1)/16),f=Math.pow(10,c/10)}var s=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],o=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],a=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function i(b,S,B,w,k,A){var V;if(S>b)if(S<b*R)V=S/b;else return b+S;else{if(b>=S*R)return b+S;V=b/S}if(b+=S,w+3<=6){if(V>=u)return b;var F=0|e1.FAST_LOG10_X(V,16);return b*o[F]}var F=0|e1.FAST_LOG10_X(V,16);if(S=k.ATH.cb_l[B]*k.ATH.adjust,b<f*S){if(b>S){var N,j;return N=1,F<=13&&(N=a[F]),j=e1.FAST_LOG10_X(b/S,10/15),b*((s[F]-N)*j+N)}return F>13?b:b*a[F]}return b*s[F]}var n=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function l(b,S,B){var w;if(b<0&&(b=0),S<0&&(S=0),b<=0)return S;if(S<=0)return b;if(S>b?w=S/b:w=b/S,-2<=B&&B<=2){if(w>=u)return b+S;var k=0|e1.FAST_LOG10_X(w,16);return(b+S)*n[k]}return w<R?b+S:(b<S&&(b=S),b)}function m(b,S){var B=b.internal_flags;if(B.channels_out>1){for(var w=0;w<Q.SBMAX_l;w++){var k=B.thm[0].l[w],A=B.thm[1].l[w];B.thm[0].l[w]+=A*S,B.thm[1].l[w]+=k*S}for(var w=0;w<Q.SBMAX_s;w++)for(var V=0;V<3;V++){var k=B.thm[0].s[w][V],A=B.thm[1].s[w][V];B.thm[0].s[w][V]+=A*S,B.thm[1].s[w][V]+=k*S}}}function X(b){for(var S=0;S<Q.SBMAX_l;S++)if(!(b.thm[0].l[S]>1.58*b.thm[1].l[S]||b.thm[1].l[S]>1.58*b.thm[0].l[S])){var B=b.mld_l[S]*b.en[3].l[S],w=Math.max(b.thm[2].l[S],Math.min(b.thm[3].l[S],B));B=b.mld_l[S]*b.en[2].l[S];var k=Math.max(b.thm[3].l[S],Math.min(b.thm[2].l[S],B));b.thm[2].l[S]=w,b.thm[3].l[S]=k}for(var S=0;S<Q.SBMAX_s;S++)for(var A=0;A<3;A++)if(!(b.thm[0].s[S][A]>1.58*b.thm[1].s[S][A]||b.thm[1].s[S][A]>1.58*b.thm[0].s[S][A])){var B=b.mld_s[S]*b.en[3].s[S][A],w=Math.max(b.thm[2].s[S][A],Math.min(b.thm[3].s[S][A],B));B=b.mld_s[S]*b.en[2].s[S][A];var k=Math.max(b.thm[3].s[S][A],Math.min(b.thm[2].s[S][A],B));b.thm[2].s[S][A]=w,b.thm[3].s[S][A]=k}}function E(b,S,B){var w=S,k=Math.pow(10,B);S*=2,w*=2;for(var A=0;A<Q.SBMAX_l;A++){var V,F,N,j;if(j=b.ATH.cb_l[b.bm_l[A]]*k,V=Math.min(Math.max(b.thm[0].l[A],j),Math.max(b.thm[1].l[A],j)),F=Math.max(b.thm[2].l[A],j),N=Math.max(b.thm[3].l[A],j),V*S<F+N){var C=V*w/(F+N);F*=C,N*=C}b.thm[2].l[A]=Math.min(F,b.thm[2].l[A]),b.thm[3].l[A]=Math.min(N,b.thm[3].l[A])}k*=Q.BLKSIZE_s/Q.BLKSIZE;for(var A=0;A<Q.SBMAX_s;A++)for(var W=0;W<3;W++){var V,F,N,j;if(j=b.ATH.cb_s[b.bm_s[A]]*k,V=Math.min(Math.max(b.thm[0].s[A][W],j),Math.max(b.thm[1].s[A][W],j)),F=Math.max(b.thm[2].s[A][W],j),N=Math.max(b.thm[3].s[A][W],j),V*S<F+N){var C=V*S/(F+N);F*=C,N*=C}b.thm[2].s[A][W]=Math.min(b.thm[2].s[A][W],F),b.thm[3].s[A][W]=Math.min(b.thm[3].s[A][W],N)}}function x(b,S,B,w,k){var A,V,F=0,N=0;for(A=V=0;A<Q.SBMAX_s;++V,++A){for(var j=b.bo_s[A],C=b.npart_s,W=j<C?j:C;V<W;)R0(S[V]>=0),R0(B[V]>=0),F+=S[V],N+=B[V],V++;if(b.en[w].s[A][k]=F,b.thm[w].s[A][k]=N,V>=C){++A;break}R0(S[V]>=0),R0(B[V]>=0);{var l0=b.PSY.bo_s_weight[A],b0=1-l0;F=l0*S[V],N=l0*B[V],b.en[w].s[A][k]+=F,b.thm[w].s[A][k]+=N,F=b0*S[V],N=b0*B[V]}}for(;A<Q.SBMAX_s;++A)b.en[w].s[A][k]=0,b.thm[w].s[A][k]=0}function r(b,S,B,w){var k,A,V=0,F=0;for(k=A=0;k<Q.SBMAX_l;++A,++k){for(var N=b.bo_l[k],j=b.npart_l,C=N<j?N:j;A<C;)R0(S[A]>=0),R0(B[A]>=0),V+=S[A],F+=B[A],A++;if(b.en[w].l[k]=V,b.thm[w].l[k]=F,A>=j){++k;break}R0(S[A]>=0),R0(B[A]>=0);{var W=b.PSY.bo_l_weight[k],l0=1-W;V=W*S[A],F=W*B[A],b.en[w].l[k]+=V,b.thm[w].l[k]+=F,V=l0*S[A],F=l0*B[A]}}for(;k<Q.SBMAX_l;++k)b.en[w].l[k]=0,b.thm[w].l[k]=0}function _(b,S,B,w,k,A){var V=b.internal_flags,F,N;for(N=F=0;N<V.npart_s;++N){for(var j=0,C=V.numlines_s[N],W=0;W<C;++W,++F){var l0=S[A][F];j+=l0}B[N]=j}for(R0(N==V.npart_s),F=N=0;N<V.npart_s;N++){var b0=V.s3ind_s[N][0],z=V.s3_ss[F++]*B[b0];for(++b0;b0<=V.s3ind_s[N][1];)z+=V.s3_ss[F]*B[b0],++F,++b0;{var m0=r0*V.nb_s1[k][N];w[N]=Math.min(z,m0)}if(V.blocktype_old[k&1]==Q.SHORT_TYPE){var m0=U*V.nb_s2[k][N],P=w[N];w[N]=Math.min(m0,P)}V.nb_s2[k][N]=V.nb_s1[k][N],V.nb_s1[k][N]=z,R0(w[N]>=0)}for(;N<=Q.CBANDS;++N)B[N]=0,w[N]=0}function L(b,S,B,w){var k=b.internal_flags;b.short_blocks==g1.short_block_coupled&&!(S[0]!=0&&S[1]!=0)&&(S[0]=S[1]=0);for(var A=0;A<k.channels_out;A++)w[A]=Q.NORM_TYPE,b.short_blocks==g1.short_block_dispensed&&(S[A]=1),b.short_blocks==g1.short_block_forced&&(S[A]=0),S[A]!=0?(R0(k.blocktype_old[A]!=Q.START_TYPE),k.blocktype_old[A]==Q.SHORT_TYPE&&(w[A]=Q.STOP_TYPE)):(w[A]=Q.SHORT_TYPE,k.blocktype_old[A]==Q.NORM_TYPE&&(k.blocktype_old[A]=Q.START_TYPE),k.blocktype_old[A]==Q.STOP_TYPE&&(k.blocktype_old[A]=Q.SHORT_TYPE)),B[A]=k.blocktype_old[A],k.blocktype_old[A]=w[A]}function p(b,S,B){return B>=1?b:B<=0?S:S>0?Math.pow(b/S,B)*S:0}var s0=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function v0(b,S){for(var B=309.07,w=0;w<Q.SBMAX_s-1;w++)for(var k=0;k<3;k++){var A=b.thm.s[w][k];if(A>0){var V=A*S,F=b.en.s[w][k];F>V&&(F>V*1e10?B+=s0[w]*(10*Y):B+=s0[w]*e1.FAST_LOG10(F/V))}}return B}var _0=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function i0(b,S){for(var B=281.0575,w=0;w<Q.SBMAX_l-1;w++){var k=b.thm.l[w];if(k>0){var A=k*S,V=b.en.l[w];V>A&&(V>A*1e10?B+=_0[w]*(10*Y):B+=_0[w]*e1.FAST_LOG10(V/A))}}return B}function d0(b,S,B,w,k){var A,V;for(A=V=0;A<b.npart_l;++A){var F=0,N=0,j;for(j=0;j<b.numlines_l[A];++j,++V){var C=S[V];F+=C,N<C&&(N=C)}B[A]=F,w[A]=N,k[A]=F*b.rnumlines_l[A],R0(b.rnumlines_l[A]>=0),R0(B[A]>=0),R0(w[A]>=0),R0(k[A]>=0)}}function h0(b,S,B,w){var k=v.length-1,A=0,V=B[A]+B[A+1];if(V>0){var F=S[A];F<S[A+1]&&(F=S[A+1]),R0(b.numlines_l[A]+b.numlines_l[A+1]-1>0),V=20*(F*2-V)/(V*(b.numlines_l[A]+b.numlines_l[A+1]-1));var N=0|V;N>k&&(N=k),w[A]=N}else w[A]=0;for(A=1;A<b.npart_l-1;A++)if(V=B[A-1]+B[A]+B[A+1],V>0){var F=S[A-1];F<S[A]&&(F=S[A]),F<S[A+1]&&(F=S[A+1]),R0(b.numlines_l[A-1]+b.numlines_l[A]+b.numlines_l[A+1]-1>0),V=20*(F*3-V)/(V*(b.numlines_l[A-1]+b.numlines_l[A]+b.numlines_l[A+1]-1));var N=0|V;N>k&&(N=k),w[A]=N}else w[A]=0;if(R0(A==b.npart_l-1),V=B[A-1]+B[A],V>0){var F=S[A-1];F<S[A]&&(F=S[A]),R0(b.numlines_l[A-1]+b.numlines_l[A]-1>0),V=20*(F*2-V)/(V*(b.numlines_l[A-1]+b.numlines_l[A]-1));var N=0|V;N>k&&(N=k),w[A]=N}else w[A]=0;R0(A==b.npart_l-1)}var t0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(b,S,B,w,k,A,V,F,N,j){var C=b.internal_flags,W=h1([2,Q.BLKSIZE]),l0=h1([2,3,Q.BLKSIZE_s]),b0=D0(Q.CBANDS+1),z=D0(Q.CBANDS+1),m0=D0(Q.CBANDS+2),P=F1(2),u0=F1(2),A0,J,f0,g,c0,L0,o0,M0,E0=h1([2,576]),p0,i1=F1(Q.CBANDS+2),G0=F1(Q.CBANDS+2);for(M2.fill(G0,0),A0=C.channels_out,b.mode==MPEGMode.JOINT_STEREO&&(A0=4),b.VBR==J1.vbr_off?p0=C.ResvMax==0?0:C.ResvSize/C.ResvMax*.5:b.VBR==J1.vbr_rh||b.VBR==J1.vbr_mtrh||b.VBR==J1.vbr_mt?p0=.6:p0=1,J=0;J<C.channels_out;J++){var N0=S[J],J0=B+576-350-H+192;for(g=0;g<576;g++){var n1,_1;for(n1=N0[J0+g+10],_1=0,c0=0;c0<(H-1)/2-1;c0+=2)n1+=t0[c0]*(N0[J0+g+c0]+N0[J0+g+H-c0]),_1+=t0[c0+1]*(N0[J0+g+c0+1]+N0[J0+g+H-c0-1]);E0[J][g]=n1+_1}k[w][J].en.assign(C.en[J]),k[w][J].thm.assign(C.thm[J]),A0>2&&(A[w][J].en.assign(C.en[J+2]),A[w][J].thm.assign(C.thm[J+2]))}for(J=0;J<A0;J++){var m1,b1,j0=D0(12),R1=[0,0,0,0],z1=D0(12),ke=1,va,oa=D0(Q.CBANDS),ha=D0(Q.CBANDS),H0=[0,0,0,0],ua=D0(Q.HBLKSIZE),fa=h1([3,Q.HBLKSIZE_s]);for(R0(C.npart_s<=Q.CBANDS),R0(C.npart_l<=Q.CBANDS),g=0;g<3;g++)j0[g]=C.nsPsy.last_en_subshort[J][g+6],R0(C.nsPsy.last_en_subshort[J][g+4]>0),z1[g]=j0[g]/C.nsPsy.last_en_subshort[J][g+4],R1[0]+=j0[g];if(J==2)for(g=0;g<576;g++){var Xe,Fe;Xe=E0[0][g],Fe=E0[1][g],E0[0][g]=Xe+Fe,E0[1][g]=Xe-Fe}{var ma=E0[J&1],_e=0;for(g=0;g<9;g++){for(var v2=_e+64,U0=1;_e<v2;_e++)U0<Math.abs(ma[_e])&&(U0=Math.abs(ma[_e]));C.nsPsy.last_en_subshort[J][g]=j0[g+3]=U0,R1[1+g/3]+=U0,U0>j0[g+3-2]?(R0(j0[g+3-2]>0),U0=U0/j0[g+3-2]):j0[g+3-2]>U0*10?U0=j0[g+3-2]/(U0*10):U0=0,z1[g+3]=U0}}if(b.analysis){var Ce=z1[0];for(g=1;g<12;g++)Ce<z1[g]&&(Ce=z1[g]);C.pinfo.ers[w][J]=C.pinfo.ers_save[J],C.pinfo.ers_save[J]=Ce}for(va=J==3?C.nsPsy.attackthre_s:C.nsPsy.attackthre,g=0;g<12;g++)H0[g/3]==0&&z1[g]>va&&(H0[g/3]=g%3+1);for(g=1;g<4;g++){var Ye;R1[g-1]>R1[g]?(R0(R1[g]>0),Ye=R1[g-1]/R1[g]):(R0(R1[g-1]>0),Ye=R1[g]/R1[g-1]),Ye<1.7&&(H0[g]=0,g==1&&(H0[0]=0))}for(H0[0]!=0&&C.nsPsy.lastAttacks[J]!=0&&(H0[0]=0),(C.nsPsy.lastAttacks[J]==3||H0[0]+H0[1]+H0[2]+H0[3]!=0)&&(ke=0,H0[1]!=0&&H0[0]!=0&&(H0[1]=0),H0[2]!=0&&H0[1]!=0&&(H0[2]=0),H0[3]!=0&&H0[2]!=0&&(H0[3]=0)),J<2?u0[J]=ke:ke==0&&(u0[0]=u0[1]=0),N[J]=C.tot_ener[J],b1=l0,m1=W,d(b,ua,fa,m1,J&1,b1,J&1,w,J,S,B),d0(C,ua,b0,oa,ha),h0(C,oa,ha,i1),M0=0;M0<3;M0++){var $e,g0;for(_(b,fa,z,m0,J,M0),x(C,z,m0,J,M0),o0=0;o0<Q.SBMAX_s;o0++){if(g0=C.thm[J].s[o0][M0],g0*=y,H0[M0]>=2||H0[M0+1]==1){var le=M0!=0?M0-1:2,U0=p(C.thm[J].s[o0][le],g0,O*p0);g0=Math.min(g0,U0)}if(H0[M0]==1){var le=M0!=0?M0-1:2,U0=p(C.thm[J].s[o0][le],g0,M*p0);g0=Math.min(g0,U0)}else if(M0!=0&&H0[M0-1]==3||M0==0&&C.nsPsy.lastAttacks[J]==3){var le=M0!=2?M0+1:0,U0=p(C.thm[J].s[o0][le],g0,M*p0);g0=Math.min(g0,U0)}$e=j0[M0*3+3]+j0[M0*3+4]+j0[M0*3+5],j0[M0*3+5]*6<$e&&(g0*=.5,j0[M0*3+4]*6<$e&&(g0*=.5)),C.thm[J].s[o0][M0]=g0}}for(C.nsPsy.lastAttacks[J]=H0[2],L0=0,f0=0;f0<C.npart_l;f0++){for(var k1=C.s3ind[f0][0],qe=b0[k1]*v[i1[k1]],X1=C.s3_ll[L0++]*qe;++k1<=C.s3ind[f0][1];)qe=b0[k1]*v[i1[k1]],X1=i(X1,C.s3_ll[L0++]*qe,k1,k1-f0,C);X1*=.158489319246111,C.blocktype_old[J&1]==Q.SHORT_TYPE?m0[f0]=X1:m0[f0]=p(Math.min(X1,Math.min(G*C.nb_1[J][f0],D*C.nb_2[J][f0])),X1,p0),C.nb_2[J][f0]=C.nb_1[J][f0],C.nb_1[J][f0]=X1}for(;f0<=Q.CBANDS;++f0)b0[f0]=0,m0[f0]=0;r(C,b0,m0,J)}if((b.mode==MPEGMode.STEREO||b.mode==MPEGMode.JOINT_STEREO)&&b.interChRatio>0&&m(b,b.interChRatio),b.mode==MPEGMode.JOINT_STEREO){var Ge;X(C),Ge=b.msfix,Math.abs(Ge)>0&&E(C,Ge,b.ATHlower*C.ATH.adjust)}for(L(b,u0,j,P),J=0;J<A0;J++){var ve,oe=0,de,Se;J>1?(ve=F,oe=-2,de=Q.NORM_TYPE,(j[0]==Q.SHORT_TYPE||j[1]==Q.SHORT_TYPE)&&(de=Q.SHORT_TYPE),Se=A[w][J-2]):(ve=V,oe=0,de=j[J],Se=k[w][J]),de==Q.SHORT_TYPE?ve[oe+J]=v0(Se,C.masking_lower):ve[oe+J]=i0(Se,C.masking_lower),b.analysis&&(C.pinfo.pe[w][J]=ve[oe+J])}return 0};function B0(b,S,B,w,k,A,V,F){var N=b.internal_flags;if(w<2)T.fft_long(N,V[F],w,S,B);else if(w==2)for(var j=Q.BLKSIZE-1;j>=0;--j){var C=V[F+0][j],W=V[F+1][j];V[F+0][j]=(C+W)*e1.SQRT2*.5,V[F+1][j]=(C-W)*e1.SQRT2*.5}A[0]=V[F+0][0],A[0]*=A[0];for(var j=Q.BLKSIZE/2-1;j>=0;--j){var l0=V[F+0][Q.BLKSIZE/2-j],b0=V[F+0][Q.BLKSIZE/2+j];A[Q.BLKSIZE/2-j]=(l0*l0+b0*b0)*.5}{for(var z=0,j=11;j<Q.HBLKSIZE;j++)z+=A[j];N.tot_ener[w]=z}if(b.analysis){for(var j=0;j<Q.HBLKSIZE;j++)N.pinfo.energy[k][w][j]=N.pinfo.energy_save[w][j],N.pinfo.energy_save[w][j]=A[j];N.pinfo.pe[k][w]=N.pe[w]}}function O0(b,S,B,w,k,A,V,F){var N=b.internal_flags;if(k==0&&w<2&&T.fft_short(N,V[F],w,S,B),w==2)for(var j=Q.BLKSIZE_s-1;j>=0;--j){var C=V[F+0][k][j],W=V[F+1][k][j];V[F+0][k][j]=(C+W)*e1.SQRT2*.5,V[F+1][k][j]=(C-W)*e1.SQRT2*.5}A[k][0]=V[F+0][k][0],A[k][0]*=A[k][0];for(var j=Q.BLKSIZE_s/2-1;j>=0;--j){var l0=V[F+0][k][Q.BLKSIZE_s/2-j],b0=V[F+0][k][Q.BLKSIZE_s/2+j];A[k][Q.BLKSIZE_s/2-j]=(l0*l0+b0*b0)*.5}}function S0(b,S,B,w){var k=b.internal_flags;b.athaa_loudapprox==2&&B<2&&(k.loudness_sq[S][B]=k.loudness_sq_save[B],k.loudness_sq_save[B]=$(w,k))}var I0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function T0(b,S,B,w,k,A,V,F,N,j){for(var C=h1([2,576]),W=b.internal_flags,l0=W.channels_out,b0=b.mode==MPEGMode.JOINT_STEREO?4:l0,z=0;z<l0;z++){firbuf=S[z];for(var m0=B+576-350-H+192,P=0;P<576;P++){var u0,A0;u0=firbuf[m0+P+10],A0=0;for(var J=0;J<(H-1)/2-1;J+=2)u0+=I0[J]*(firbuf[m0+P+J]+firbuf[m0+P+H-J]),A0+=I0[J+1]*(firbuf[m0+P+J+1]+firbuf[m0+P+H-J-1]);C[z][P]=u0+A0}k[w][z].en.assign(W.en[z]),k[w][z].thm.assign(W.thm[z]),b0>2&&(A[w][z].en.assign(W.en[z+2]),A[w][z].thm.assign(W.thm[z+2]))}for(var z=0;z<b0;z++){var f0=D0(12),g=D0(12),c0=[0,0,0,0],L0=C[z&1],o0=0,M0=z==3?W.nsPsy.attackthre_s:W.nsPsy.attackthre,E0=1;if(z==2)for(var P=0,J=576;J>0;++P,--J){var p0=C[0][P],i1=C[1][P];C[0][P]=p0+i1,C[1][P]=p0-i1}for(var P=0;P<3;P++)g[P]=W.nsPsy.last_en_subshort[z][P+6],R0(W.nsPsy.last_en_subshort[z][P+4]>0),f0[P]=g[P]/W.nsPsy.last_en_subshort[z][P+4],c0[0]+=g[P];for(var P=0;P<9;P++){for(var G0=o0+64,N0=1;o0<G0;o0++)N0<Math.abs(L0[o0])&&(N0=Math.abs(L0[o0]));W.nsPsy.last_en_subshort[z][P]=g[P+3]=N0,c0[1+P/3]+=N0,N0>g[P+3-2]?(R0(g[P+3-2]>0),N0=N0/g[P+3-2]):g[P+3-2]>N0*10?N0=g[P+3-2]/(N0*10):N0=0,f0[P+3]=N0}for(var P=0;P<3;++P){var J0=g[P*3+3]+g[P*3+4]+g[P*3+5],n1=1;g[P*3+5]*6<J0&&(n1*=.5,g[P*3+4]*6<J0&&(n1*=.5)),F[z][P]=n1}if(b.analysis){for(var _1=f0[0],P=1;P<12;P++)_1<f0[P]&&(_1=f0[P]);W.pinfo.ers[w][z]=W.pinfo.ers_save[z],W.pinfo.ers_save[z]=_1}for(var P=0;P<12;P++)N[z][P/3]==0&&f0[P]>M0&&(N[z][P/3]=P%3+1);for(var P=1;P<4;P++){var m1=c0[P-1],b1=c0[P],j0=Math.max(m1,b1);j0<4e4&&m1<1.7*b1&&b1<1.7*m1&&(P==1&&N[z][0]<=N[z][P]&&(N[z][0]=0),N[z][P]=0)}N[z][0]<=W.nsPsy.lastAttacks[z]&&(N[z][0]=0),(W.nsPsy.lastAttacks[z]==3||N[z][0]+N[z][1]+N[z][2]+N[z][3]!=0)&&(E0=0,N[z][1]!=0&&N[z][0]!=0&&(N[z][1]=0),N[z][2]!=0&&N[z][1]!=0&&(N[z][2]=0),N[z][3]!=0&&N[z][2]!=0&&(N[z][3]=0)),z<2?j[z]=E0:E0==0&&(j[0]=j[1]=0),V[z]=W.tot_ener[z]}}function F0(b,S,B){if(B==0)for(var w=0;w<b.npart_s;w++)b.nb_s2[S][w]=b.nb_s1[S][w],b.nb_s1[S][w]=0}function K0(b,S){for(var B=0;B<b.npart_l;B++)b.nb_2[S][B]=b.nb_1[S][B],b.nb_1[S][B]=0}function M1(b,S,B,w){var k=v.length-1,A=0,V=B[A]+B[A+1];if(V>0){var F=S[A];F<S[A+1]&&(F=S[A+1]),R0(b.numlines_s[A]+b.numlines_s[A+1]-1>0),V=20*(F*2-V)/(V*(b.numlines_s[A]+b.numlines_s[A+1]-1));var N=0|V;N>k&&(N=k),w[A]=N}else w[A]=0;for(A=1;A<b.npart_s-1;A++)if(V=B[A-1]+B[A]+B[A+1],R0(A+1<b.npart_s),V>0){var F=S[A-1];F<S[A]&&(F=S[A]),F<S[A+1]&&(F=S[A+1]),R0(b.numlines_s[A-1]+b.numlines_s[A]+b.numlines_s[A+1]-1>0),V=20*(F*3-V)/(V*(b.numlines_s[A-1]+b.numlines_s[A]+b.numlines_s[A+1]-1));var N=0|V;N>k&&(N=k),w[A]=N}else w[A]=0;if(R0(A==b.npart_s-1),V=B[A-1]+B[A],V>0){var F=S[A-1];F<S[A]&&(F=S[A]),R0(b.numlines_s[A-1]+b.numlines_s[A]-1>0),V=20*(F*2-V)/(V*(b.numlines_s[A-1]+b.numlines_s[A]-1));var N=0|V;N>k&&(N=k),w[A]=N}else w[A]=0;R0(A==b.npart_s-1)}function o1(b,S,B,w,k,A){var V=b.internal_flags,F=new float[Q.CBANDS],N=D0(Q.CBANDS),j,C,W,l0=new int[Q.CBANDS];for(W=C=0;W<V.npart_s;++W){var b0=0,z=0,m0=V.numlines_s[W];for(j=0;j<m0;++j,++C){var P=S[A][C];b0+=P,z<P&&(z=P)}B[W]=b0,F[W]=z,N[W]=b0/m0,R0(N[W]>=0)}for(R0(W==V.npart_s);W<Q.CBANDS;++W)F[W]=0,N[W]=0;for(M1(V,F,N,l0),C=W=0;W<V.npart_s;W++){var u0=V.s3ind_s[W][0],A0=V.s3ind_s[W][1],J,f0,g,c0,L0;for(J=l0[u0],f0=1,c0=V.s3_ss[C]*B[u0]*v[l0[u0]],++C,++u0;u0<=A0;)J+=l0[u0],f0+=1,g=V.s3_ss[C]*B[u0]*v[l0[u0]],c0=l(c0,g,u0-W),++C,++u0;J=(1+2*J)/(2*f0),L0=v[J]*.5,c0*=L0,w[W]=c0,V.nb_s2[k][W]=V.nb_s1[k][W],V.nb_s1[k][W]=c0,g=F[W],g*=V.minval_s[W],g*=L0,w[W]>g&&(w[W]=g),V.masking_lower>1&&(w[W]*=V.masking_lower),w[W]>B[W]&&(w[W]=B[W]),V.masking_lower<1&&(w[W]*=V.masking_lower),R0(w[W]>=0)}for(;W<Q.CBANDS;++W)B[W]=0,w[W]=0}function z0(b,S,B,w,k){var A=D0(Q.CBANDS),V=D0(Q.CBANDS),F=F1(Q.CBANDS+2),N;d0(b,S,B,A,V),h0(b,A,V,F);var j=0;for(N=0;N<b.npart_l;N++){var C,W,l0,b0,z=b.s3ind[N][0],m0=b.s3ind[N][1],P=0,u0=0;for(P=F[z],u0+=1,W=b.s3_ll[j]*B[z]*v[F[z]],++j,++z;z<=m0;)P+=F[z],u0+=1,C=b.s3_ll[j]*B[z]*v[F[z]],b0=l(W,C,z-N),W=b0,++j,++z;if(P=(1+2*P)/(2*u0),l0=v[P]*.5,W*=l0,b.blocktype_old[k&1]==Q.SHORT_TYPE){var A0=G*b.nb_1[k][N];A0>0?w[N]=Math.min(W,A0):w[N]=Math.min(W,B[N]*M)}else{var J=D*b.nb_2[k][N],f0=G*b.nb_1[k][N],A0;J<=0&&(J=W),f0<=0&&(f0=W),b.blocktype_old[k&1]==Q.NORM_TYPE?A0=Math.min(f0,J):A0=f0,w[N]=Math.min(W,A0)}b.nb_2[k][N]=b.nb_1[k][N],b.nb_1[k][N]=W,C=A[N],C*=b.minval_l[N],C*=l0,w[N]>C&&(w[N]=C),b.masking_lower>1&&(w[N]*=b.masking_lower),w[N]>B[N]&&(w[N]=B[N]),b.masking_lower<1&&(w[N]*=b.masking_lower),R0(w[N]>=0)}for(;N<Q.CBANDS;++N)B[N]=0,w[N]=0}function f1(b,S){var B=b.internal_flags;b.short_blocks==g1.short_block_coupled&&!(S[0]!=0&&S[1]!=0)&&(S[0]=S[1]=0);for(var w=0;w<B.channels_out;w++)b.short_blocks==g1.short_block_dispensed&&(S[w]=1),b.short_blocks==g1.short_block_forced&&(S[w]=0)}function V1(b,S,B){for(var w=b.internal_flags,k=0;k<w.channels_out;k++){var A=Q.NORM_TYPE;S[k]!=0?(R0(w.blocktype_old[k]!=Q.START_TYPE),w.blocktype_old[k]==Q.SHORT_TYPE&&(A=Q.STOP_TYPE)):(A=Q.SHORT_TYPE,w.blocktype_old[k]==Q.NORM_TYPE&&(w.blocktype_old[k]=Q.START_TYPE),w.blocktype_old[k]==Q.STOP_TYPE&&(w.blocktype_old[k]=Q.SHORT_TYPE)),B[k]=w.blocktype_old[k],w.blocktype_old[k]=A}}function p1(b,S,B,w,k,A,V){for(var F=A*2,N=A>0?Math.pow(10,k):1,j,C,W=0;W<V;++W){var l0=b[2][W],b0=b[3][W],z=S[0][W],m0=S[1][W],P=S[2][W],u0=S[3][W];if(z<=1.58*m0&&m0<=1.58*z){var A0=B[W]*b0,J=B[W]*l0;C=Math.max(P,Math.min(u0,A0)),j=Math.max(u0,Math.min(P,J))}else C=P,j=u0;if(A>0){var f0,g,c0=w[W]*N;if(f0=Math.min(Math.max(z,c0),Math.max(m0,c0)),P=Math.max(C,c0),u0=Math.max(j,c0),g=P+u0,g>0&&f0*F<g){var L0=f0*F/g;P*=L0,u0*=L0}C=Math.min(P,C),j=Math.min(u0,j)}C>l0&&(C=l0),j>b0&&(j=b0),S[2][W]=C,S[3][W]=j}}this.L3psycho_anal_vbr=function(b,S,B,w,k,A,V,F,N,j){var C=b.internal_flags,W,l0,b0=D0(Q.HBLKSIZE),z=h1([3,Q.HBLKSIZE_s]),m0=h1([2,Q.BLKSIZE]),P=h1([2,3,Q.BLKSIZE_s]),u0=h1([4,Q.CBANDS]),A0=h1([4,Q.CBANDS]),J=h1([4,3]),f0=.6,g=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],c0=F1(2),L0=b.mode==MPEGMode.JOINT_STEREO?4:C.channels_out;T0(b,S,B,w,k,A,N,J,g,c0),f1(b,c0);{for(var o0=0;o0<L0;o0++){var M0=o0&1;W=m0,B0(b,S,B,o0,w,b0,W,M0),S0(b,w,o0,b0),c0[M0]!=0?z0(C,b0,u0[o0],A0[o0],o0):K0(C,o0)}c0[0]+c0[1]==2&&b.mode==MPEGMode.JOINT_STEREO&&p1(u0,A0,C.mld_cb_l,C.ATH.cb_l,b.ATHlower*C.ATH.adjust,b.msfix,C.npart_l);for(var o0=0;o0<L0;o0++){var M0=o0&1;c0[M0]!=0&&r(C,u0[o0],A0[o0],o0)}}{for(var E0=0;E0<3;E0++){for(var o0=0;o0<L0;++o0){var M0=o0&1;c0[M0]!=0?F0(C,o0,E0):(l0=P,O0(b,S,B,o0,E0,z,l0,M0),o1(b,z,u0[o0],A0[o0],o0,E0))}c0[0]+c0[1]==0&&b.mode==MPEGMode.JOINT_STEREO&&p1(u0,A0,C.mld_cb_s,C.ATH.cb_s,b.ATHlower*C.ATH.adjust,b.msfix,C.npart_s);for(var o0=0;o0<L0;++o0){var M0=o0&1;c0[M0]==0&&x(C,u0[o0],A0[o0],o0,E0)}}for(var o0=0;o0<L0;o0++){var M0=o0&1;if(c0[M0]==0)for(var p0=0;p0<Q.SBMAX_s;p0++){for(var i1=D0(3),E0=0;E0<3;E0++){var G0=C.thm[o0].s[p0][E0];if(G0*=y,g[o0][E0]>=2||g[o0][E0+1]==1){var N0=E0!=0?E0-1:2,J0=p(C.thm[o0].s[p0][N0],G0,O*f0);G0=Math.min(G0,J0)}else if(g[o0][E0]==1){var N0=E0!=0?E0-1:2,J0=p(C.thm[o0].s[p0][N0],G0,M*f0);G0=Math.min(G0,J0)}else if(E0!=0&&g[o0][E0-1]==3||E0==0&&C.nsPsy.lastAttacks[o0]==3){var N0=E0!=2?E0+1:0,J0=p(C.thm[o0].s[p0][N0],G0,M*f0);G0=Math.min(G0,J0)}G0*=J[o0][E0],i1[E0]=G0}for(var E0=0;E0<3;E0++)C.thm[o0].s[p0][E0]=i1[E0]}}}for(var o0=0;o0<L0;o0++)C.nsPsy.lastAttacks[o0]=g[o0][2];V1(b,c0,j);for(var o0=0;o0<L0;o0++){var n1,_1,m1,b1;o0>1?(n1=F,_1=-2,m1=Q.NORM_TYPE,(j[0]==Q.SHORT_TYPE||j[1]==Q.SHORT_TYPE)&&(m1=Q.SHORT_TYPE),b1=A[w][o0-2]):(n1=V,_1=0,m1=j[o0],b1=k[w][o0]),m1==Q.SHORT_TYPE?n1[_1+o0]=v0(b1,C.masking_lower):n1[_1+o0]=i0(b1,C.masking_lower),b.analysis&&(C.pinfo.pe[w][o0]=n1[_1+o0])}return 0};function t1(b,S){var B=b,w;return B>=0?w=-B*27:w=B*S,w<=-72?0:Math.exp(w*I)}function O1(b){var S=0,B=0;{var w=0,k,A;for(w=0;t1(w,b)>1e-20;w-=1);for(k=w,A=0;Math.abs(A-k)>1e-12;)w=(A+k)/2,t1(w,b)>0?A=w:k=w;S=k}{var w=0,k,A;for(w=0;t1(w,b)>1e-20;w+=1);for(k=0,A=w;Math.abs(A-k)>1e-12;)w=(A+k)/2,t1(w,b)>0?k=w:A=w;B=A}{var V=0,F=1e3,N;for(N=0;N<=F;++N){var w=S+N*(B-S)/F,j=t1(w,b);V+=j}{var C=(F+1)/(V*(B-S));return C}}}function T1(b){var S,B,w,k;return S=b,S>=0?S*=3:S*=1.5,S>=.5&&S<=2.5?(k=S-.5,B=8*(k*k-2*k)):B=0,S+=.474,w=15.811389+7.5*S-17.5*Math.sqrt(1+S*S),w<=-60?0:(S=Math.exp((B+w)*I),S/=.6609193,S)}function s1(b){return b<0&&(b=0),b=b*.001,13*Math.atan(.76*b)+3.5*Math.atan(b*b/(7.5*7.5))}function j1(b,S,B,w,k,A,V,F,N,j,C,W){var l0=D0(Q.CBANDS+1),b0=F/(W>15?2*576:2*192),z=F1(Q.HBLKSIZE),m0;F/=N;var P=0,u0=0;for(m0=0;m0<Q.CBANDS;m0++){var A0,J;for(A0=s1(F*P),l0[m0]=F*P,J=P;s1(F*J)-A0<K&&J<=N/2;J++);for(b[m0]=J-P,u0=m0+1;P<J;)R0(P<Q.HBLKSIZE),z[P++]=m0;if(P>N/2){P=N/2,++m0;break}}R0(m0<Q.CBANDS),l0[m0]=F*P;for(var f0=0;f0<W;f0++){var g,c0,L0,o0,M0;L0=j[f0],o0=j[f0+1],g=0|Math.floor(.5+C*(L0-.5)),g<0&&(g=0),c0=0|Math.floor(.5+C*(o0-.5)),c0>N/2&&(c0=N/2),B[f0]=(z[g]+z[c0])/2,S[f0]=z[c0];var E0=b0*o0;V[f0]=(E0-l0[S[f0]])/(l0[S[f0]+1]-l0[S[f0]]),V[f0]<0?V[f0]=0:V[f0]>1&&(V[f0]=1),M0=s1(F*j[f0]*C),M0=Math.min(M0,15.5)/15.5,A[f0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*M0))-2.5)}P=0;for(var p0=0;p0<u0;p0++){var i1=b[p0],A0,G0;A0=s1(F*P),G0=s1(F*(P+i1-1)),w[p0]=.5*(A0+G0),A0=s1(F*(P-.5)),G0=s1(F*(P+i1-.5)),k[p0]=G0-A0,P+=i1}return u0}function _a(b,S,B,w,k,A){var V=h1([Q.CBANDS,Q.CBANDS]),F,N=0;if(A)for(var j=0;j<S;j++)for(F=0;F<S;F++){var C=T1(B[j]-B[F])*w[F];V[j][F]=C*k[j]}else for(F=0;F<S;F++)for(var W=15+Math.min(21/B[F],12),l0=O1(W),j=0;j<S;j++){var C=l0*t1(B[j]-B[F],W)*w[F];V[j][F]=C*k[j]}for(var j=0;j<S;j++){for(F=0;F<S&&!(V[j][F]>0);F++);for(b[j][0]=F,F=S-1;F>0&&!(V[j][F]>0);F--);b[j][1]=F,N+=b[j][1]-b[j][0]+1}for(var b0=D0(N),z=0,j=0;j<S;j++)for(F=b[j][0];F<=b[j][1];F++)b0[z++]=V[j][F];return b0}function la(b){var S=s1(b);return S=Math.min(S,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*S))-2.5)}this.psymodel_init=function(b){var S=b.internal_flags,B,w=!0,k=13,A=24,V=0,F=0,N=-8.25,j=-4.5,C=D0(Q.CBANDS),W=D0(Q.CBANDS),l0=D0(Q.CBANDS),b0=b.out_samplerate;switch(b.experimentalZ){default:case 0:w=!0;break;case 1:w=!(b.VBR==J1.vbr_mtrh||b.VBR==J1.vbr_mt);break;case 2:w=!1;break;case 3:k=8,V=-1.75,F=-.0125,N=-8.25,j=-2.25;break}for(S.ms_ener_ratio_old=.25,S.blocktype_old[0]=S.blocktype_old[1]=Q.NORM_TYPE,B=0;B<4;++B){for(var P=0;P<Q.CBANDS;++P)S.nb_1[B][P]=1e20,S.nb_2[B][P]=1e20,S.nb_s1[B][P]=S.nb_s2[B][P]=1;for(var z=0;z<Q.SBMAX_l;z++)S.en[B].l[z]=1e20,S.thm[B].l[z]=1e20;for(var P=0;P<3;++P){for(var z=0;z<Q.SBMAX_s;z++)S.en[B].s[z][P]=1e20,S.thm[B].s[z][P]=1e20;S.nsPsy.lastAttacks[B]=0}for(var P=0;P<9;P++)S.nsPsy.last_en_subshort[B][P]=10}for(S.loudness_sq_save[0]=S.loudness_sq_save[1]=0,S.npart_l=j1(S.numlines_l,S.bo_l,S.bm_l,C,W,S.mld_l,S.PSY.bo_l_weight,b0,Q.BLKSIZE,S.scalefac_band.l,Q.BLKSIZE/(2*576),Q.SBMAX_l),R0(S.npart_l<Q.CBANDS),B=0;B<S.npart_l;B++){var m0=V;C[B]>=k&&(m0=F*(C[B]-k)/(A-k)+V*(A-C[B])/(A-k)),l0[B]=Math.pow(10,m0/10),S.numlines_l[B]>0?S.rnumlines_l[B]=1/S.numlines_l[B]:S.rnumlines_l[B]=0}S.s3_ll=_a(S.s3ind,S.npart_l,C,W,l0,w);var P=0;for(B=0;B<S.npart_l;B++){var u0;u0=Aa.MAX_VALUE;for(var A0=0;A0<S.numlines_l[B];A0++,P++){var J=b0*P/(1e3*Q.BLKSIZE),f0;f0=this.ATHformula(J*1e3,b)-20,f0=Math.pow(10,.1*f0),f0*=S.numlines_l[B],u0>f0&&(u0=f0)}S.ATH.cb_l[B]=u0,u0=-20+C[B]*20/10,u0>6&&(u0=100),u0<-15&&(u0=-15),u0-=8,S.minval_l[B]=Math.pow(10,u0/10)*S.numlines_l[B]}for(S.npart_s=j1(S.numlines_s,S.bo_s,S.bm_s,C,W,S.mld_s,S.PSY.bo_s_weight,b0,Q.BLKSIZE_s,S.scalefac_band.s,Q.BLKSIZE_s/(2*192),Q.SBMAX_s),R0(S.npart_s<Q.CBANDS),P=0,B=0;B<S.npart_s;B++){var u0,m0=N;C[B]>=k&&(m0=j*(C[B]-k)/(A-k)+N*(A-C[B])/(A-k)),l0[B]=Math.pow(10,m0/10),u0=Aa.MAX_VALUE;for(var A0=0;A0<S.numlines_s[B];A0++,P++){var J=b0*P/(1e3*Q.BLKSIZE_s),f0;f0=this.ATHformula(J*1e3,b)-20,f0=Math.pow(10,.1*f0),f0*=S.numlines_s[B],u0>f0&&(u0=f0)}S.ATH.cb_s[B]=u0,u0=-7+C[B]*7/12,C[B]>12&&(u0*=1+Math.log(1+u0)*3.1),C[B]<12&&(u0*=1+Math.log(1-u0)*2.3),u0<-15&&(u0=-15),u0-=8,S.minval_s[B]=Math.pow(10,u0/10)*S.numlines_s[B]}S.s3_ss=_a(S.s3ind_s,S.npart_s,C,W,l0,w),h(),T.init_fft(S),S.decay=Math.exp(-1*Y/(Z*b0/192));{var g;g=a0,b.exp_nspsytune&2&&(g=1),Math.abs(b.msfix)>0&&(g=b.msfix),b.msfix=g;for(var c0=0;c0<S.npart_l;c0++)S.s3ind[c0][1]>S.npart_l-1&&(S.s3ind[c0][1]=S.npart_l-1)}var L0=576*S.mode_gr/b0;if(S.ATH.decay=Math.pow(10,-12/10*L0),S.ATH.adjust=.01,S.ATH.adjustLimit=1,R0(S.bo_l[Q.SBMAX_l-1]<=S.npart_l),R0(S.bo_s[Q.SBMAX_s-1]<=S.npart_s),b.ATHtype!=-1){var J,o0=b.out_samplerate/Q.BLKSIZE,M0=0;for(J=0,B=0;B<Q.BLKSIZE/2;++B)J+=o0,S.ATH.eql_w[B]=1/Math.pow(10,this.ATHformula(J,b)/10),M0+=S.ATH.eql_w[B];for(M0=1/M0,B=Q.BLKSIZE/2;--B>=0;)S.ATH.eql_w[B]*=M0}{for(var c0=P=0;c0<S.npart_s;++c0)for(B=0;B<S.numlines_s[c0];++B)++P;for(var c0=P=0;c0<S.npart_l;++c0)for(B=0;B<S.numlines_l[c0];++B)++P}for(P=0,B=0;B<S.npart_l;B++){var J=b0*(P+S.numlines_l[B]/2)/(1*Q.BLKSIZE);S.mld_cb_l[B]=la(J),P+=S.numlines_l[B]}for(;B<Q.CBANDS;++B)S.mld_cb_l[B]=1;for(P=0,B=0;B<S.npart_s;B++){var J=b0*(P+S.numlines_s[B]/2)/(1*Q.BLKSIZE_s);S.mld_cb_s[B]=la(J),P+=S.numlines_s[B]}for(;B<Q.CBANDS;++B)S.mld_cb_s[B]=1;return 0};function W1(b,S){b<-.3&&(b=3410),b/=1e3,b=Math.max(.1,b);var B=3.64*Math.pow(b,-.8)-6.8*Math.exp(-.6*Math.pow(b-3.4,2))+6*Math.exp(-.15*Math.pow(b-8.7,2))+(.6+.04*S)*.001*Math.pow(b,4);return B}this.ATHformula=function(b,S){var B;switch(S.ATHtype){case 0:B=W1(b,9);break;case 1:B=W1(b,-1);break;case 2:B=W1(b,0);break;case 3:B=W1(b,1)+6;break;case 4:B=W1(b,S.ATHcurve);break;default:B=W1(b,0);break}return B}}var E2=A2;function S1(T){var Y=T;this.ordinal=function(){return Y}}S1.STEREO=new S1(0);S1.JOINT_STEREO=new S1(1);S1.DUAL_CHANNEL=new S1(2);S1.MONO=new S1(3);S1.NOT_SET=new S1(4);var ja=S1,B2=ja;function T2(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=B2.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}var y2=T2,w2=W0(),Wa={};Wa.SFBMAX=w2.SBMAX_s*3;var Ne=Wa,za=V0,I2=za.new_float,C1=za.new_int,Ue=Ne;function x2(){this.xr=I2(576),this.l3_enc=C1(576),this.scalefac=C1(Ue.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=C1(3),this.subblock_gain=C1(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=C1(Ue.SFBMAX),this.window=C1(Ue.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=C1(4),this.max_nonzero_coeff=0;var T=this;function Y(D){return new Int32Array(D)}function G(D){return new Float32Array(D)}this.assign=function(D){T.xr=G(D.xr),T.l3_enc=Y(D.l3_enc),T.scalefac=Y(D.scalefac),T.xrpow_max=D.xrpow_max,T.part2_3_length=D.part2_3_length,T.big_values=D.big_values,T.count1=D.count1,T.global_gain=D.global_gain,T.scalefac_compress=D.scalefac_compress,T.block_type=D.block_type,T.mixed_block_flag=D.mixed_block_flag,T.table_select=Y(D.table_select),T.subblock_gain=Y(D.subblock_gain),T.region0_count=D.region0_count,T.region1_count=D.region1_count,T.preflag=D.preflag,T.scalefac_scale=D.scalefac_scale,T.count1table_select=D.count1table_select,T.part2_length=D.part2_length,T.sfb_lmax=D.sfb_lmax,T.sfb_smin=D.sfb_smin,T.psy_lmax=D.psy_lmax,T.sfbmax=D.sfbmax,T.psymax=D.psymax,T.sfbdivide=D.sfbdivide,T.width=Y(D.width),T.window=Y(D.window),T.count1bits=D.count1bits,T.sfb_partition_table=D.sfb_partition_table.slice(0),T.slen=Y(D.slen),T.max_nonzero_coeff=D.max_nonzero_coeff}}var ta=x2,L2=V0,Ea=L2.new_int,p2=ta;function N2(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Ea(4),Ea(4)];for(var T=0;T<2;T++)for(var Y=0;Y<2;Y++)this.tt[T][Y]=new p2}var H2=N2,Ja=V0,Me=Ja.System,Re=Ja.new_int,Ae=W0();function V2(T,Y,G,D){this.l=Re(1+Ae.SBMAX_l),this.s=Re(1+Ae.SBMAX_s),this.psfb21=Re(1+Ae.PSFB21),this.psfb12=Re(1+Ae.PSFB12);var r0=this.l,U=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],Me.arraycopy(this.arrL,0,r0,0,Math.min(this.arrL.length,this.l.length)),Me.arraycopy(this.arrS,0,U,0,Math.min(this.arrS.length,this.s.length)),Me.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),Me.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}var ga=V2,sa=V0,Qe=sa.new_float,O2=sa.new_float_n,k2=sa.new_int,Ba=W0();function X2(){this.last_en_subshort=O2([4,9]),this.lastAttacks=k2(4),this.pefirbuf=Qe(19),this.longfact=Qe(Ba.SBMAX_l),this.shortfact=Qe(Ba.SBMAX_s),this.attackthre=0,this.attackthre_s=0}var F2=X2;function C2(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}var Y2=C2,re=V0,$2=re.new_byte,q2=re.new_double,u1=re.new_float,Y1=re.new_float_n,c1=re.new_int,Ee=re.new_int_n,G2=H2,P2=ga,D2=F2,Z2=Y2,Ta=Ua(),$0=W0(),K2=Ne;I1.MFSIZE=3*1152+$0.ENCDELAY-$0.MDCTDELAY;I1.MAX_HEADER_BUF=256;I1.MAX_BITS_PER_CHANNEL=4095;I1.MAX_BITS_PER_GRANULE=7680;I1.BPC=320;function I1(){var T=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=Y1([2,I1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new G2,this.ms_ratio=u1(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=c1(2),this.CurrentStep=c1(2),this.masking_lower=0,this.bv_scf=c1(576),this.pseudohalf=c1(K2.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*I1.BPC+1),this.itime=q2(2),this.sideinfo_len=0,this.sb_sample=Y1([2,2,18,$0.SBLIMIT]),this.amp_filter=u1(32);function Y(){this.write_timing=0,this.ptr=0,this.buf=$2(T)}this.header=new Array(I1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new P2,this.minval_l=u1($0.CBANDS),this.minval_s=u1($0.CBANDS),this.nb_1=Y1([4,$0.CBANDS]),this.nb_2=Y1([4,$0.CBANDS]),this.nb_s1=Y1([4,$0.CBANDS]),this.nb_s2=Y1([4,$0.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=u1(4),this.loudness_sq=Y1([2,2]),this.loudness_sq_save=u1(2),this.mld_l=u1($0.SBMAX_l),this.mld_s=u1($0.SBMAX_s),this.bm_l=c1($0.SBMAX_l),this.bo_l=c1($0.SBMAX_l),this.bm_s=c1($0.SBMAX_s),this.bo_s=c1($0.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=Ee([$0.CBANDS,2]),this.s3ind_s=Ee([$0.CBANDS,2]),this.numlines_s=c1($0.CBANDS),this.numlines_l=c1($0.CBANDS),this.rnumlines_l=u1($0.CBANDS),this.mld_cb_l=u1($0.CBANDS),this.mld_cb_s=u1($0.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=u1(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=c1(2),this.nsPsy=new D2,this.VBR_seek_table=new Z2,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=Ee([16,5]),this.bitrate_blockType_Hist=Ee([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var G=0;G<this.en.length;G++)this.en[G]=new Ta;for(var G=0;G<this.thm.length;G++)this.thm[G]=new Ta;for(var G=0;G<this.header.length;G++)this.header[G]=new Y}var He=I1,U2=V0,$1=U2.new_float,q1=W0();function Q2(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=$1(q1.SBMAX_l),this.s=$1(q1.SBMAX_s),this.psfb21=$1(q1.PSFB21),this.psfb12=$1(q1.PSFB12),this.cb_l=$1(q1.CBANDS),this.cb_s=$1(q1.CBANDS),this.eql_w=$1(q1.BLKSIZE/2)}var j2=Q2,e2=V0,a1=e2.System,ya=e2.Arrays;q0.STEPS_per_dB=100;q0.MAX_dB=120;q0.GAIN_NOT_ENOUGH_SAMPLES=-24601;q0.GAIN_ANALYSIS_ERROR=0;q0.GAIN_ANALYSIS_OK=1;q0.INIT_GAIN_ANALYSIS_ERROR=0;q0.INIT_GAIN_ANALYSIS_OK=1;q0.YULE_ORDER=10;q0.MAX_ORDER=q0.YULE_ORDER;q0.MAX_SAMP_FREQ=48e3;q0.RMS_WINDOW_TIME_NUMERATOR=1;q0.RMS_WINDOW_TIME_DENOMINATOR=20;q0.MAX_SAMPLES_PER_WINDOW=q0.MAX_SAMP_FREQ*q0.RMS_WINDOW_TIME_NUMERATOR/q0.RMS_WINDOW_TIME_DENOMINATOR+1;function q0(){var T=64.82,Y=.95,G=q0.RMS_WINDOW_TIME_NUMERATOR,D=q0.RMS_WINDOW_TIME_DENOMINATOR,r0=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],U=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function K(M,a0,H,I,n0,$){for(;n0--!=0;)H[I]=1e-10+M[a0+0]*$[0]-H[I-1]*$[1]+M[a0-1]*$[2]-H[I-2]*$[3]+M[a0-2]*$[4]-H[I-3]*$[5]+M[a0-3]*$[6]-H[I-4]*$[7]+M[a0-4]*$[8]-H[I-5]*$[9]+M[a0-5]*$[10]-H[I-6]*$[11]+M[a0-6]*$[12]-H[I-7]*$[13]+M[a0-7]*$[14]-H[I-8]*$[15]+M[a0-8]*$[16]-H[I-9]*$[17]+M[a0-9]*$[18]-H[I-10]*$[19]+M[a0-10]*$[20],++I,++a0}function q(M,a0,H,I,n0,$){for(;n0--!=0;)H[I]=M[a0+0]*$[0]-H[I-1]*$[1]+M[a0-1]*$[2]-H[I-2]*$[3]+M[a0-2]*$[4],++I,++a0}function Z(M,a0){for(var H=0;H<MAX_ORDER;H++)M.linprebuf[H]=M.lstepbuf[H]=M.loutbuf[H]=M.rinprebuf[H]=M.rstepbuf[H]=M.routbuf[H]=0;switch(0|a0){case 48e3:M.reqindex=0;break;case 44100:M.reqindex=1;break;case 32e3:M.reqindex=2;break;case 24e3:M.reqindex=3;break;case 22050:M.reqindex=4;break;case 16e3:M.reqindex=5;break;case 12e3:M.reqindex=6;break;case 11025:M.reqindex=7;break;case 8e3:M.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return M.sampleWindow=0|(a0*G+D-1)/D,M.lsum=0,M.rsum=0,M.totsamp=0,ya.ill(M.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(M,a0){return Z(M,a0)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(M.linpre=MAX_ORDER,M.rinpre=MAX_ORDER,M.lstep=MAX_ORDER,M.rstep=MAX_ORDER,M.lout=MAX_ORDER,M.rout=MAX_ORDER,ya.fill(M.B,0),INIT_GAIN_ANALYSIS_OK)};function y(M){return M*M}this.AnalyzeSamples=function(M,a0,H,I,n0,$,d){var t,e,c,u,R,f,v;if($==0)return GAIN_ANALYSIS_OK;switch(v=0,R=$,d){case 1:I=a0,n0=H;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for($<MAX_ORDER?(a1.arraycopy(a0,H,M.linprebuf,MAX_ORDER,$),a1.arraycopy(I,n0,M.rinprebuf,MAX_ORDER,$)):(a1.arraycopy(a0,H,M.linprebuf,MAX_ORDER,MAX_ORDER),a1.arraycopy(I,n0,M.rinprebuf,MAX_ORDER,MAX_ORDER));R>0;){f=R>M.sampleWindow-M.totsamp?M.sampleWindow-M.totsamp:R,v<MAX_ORDER?(t=M.linpre+v,e=M.linprebuf,c=M.rinpre+v,u=M.rinprebuf,f>MAX_ORDER-v&&(f=MAX_ORDER-v)):(t=H+v,e=a0,c=n0+v,u=I),K(e,t,M.lstepbuf,M.lstep+M.totsamp,f,r0[M.reqindex]),K(u,c,M.rstepbuf,M.rstep+M.totsamp,f,r0[M.reqindex]),q(M.lstepbuf,M.lstep+M.totsamp,M.loutbuf,M.lout+M.totsamp,f,U[M.reqindex]),q(M.rstepbuf,M.rstep+M.totsamp,M.routbuf,M.rout+M.totsamp,f,U[M.reqindex]),t=M.lout+M.totsamp,e=M.loutbuf,c=M.rout+M.totsamp,u=M.routbuf;for(var h=f%8;h--!=0;)M.lsum+=y(e[t++]),M.rsum+=y(u[c++]);for(h=f/8;h--!=0;)M.lsum+=y(e[t+0])+y(e[t+1])+y(e[t+2])+y(e[t+3])+y(e[t+4])+y(e[t+5])+y(e[t+6])+y(e[t+7]),t+=8,M.rsum+=y(u[c+0])+y(u[c+1])+y(u[c+2])+y(u[c+3])+y(u[c+4])+y(u[c+5])+y(u[c+6])+y(u[c+7]),c+=8;if(R-=f,v+=f,M.totsamp+=f,M.totsamp==M.sampleWindow){var s=q0.STEPS_per_dB*10*Math.log10((M.lsum+M.rsum)/M.totsamp*.5+1e-37),o=s<=0?0:0|s;o>=M.A.length&&(o=M.A.length-1),M.A[o]++,M.lsum=M.rsum=0,a1.arraycopy(M.loutbuf,M.totsamp,M.loutbuf,0,MAX_ORDER),a1.arraycopy(M.routbuf,M.totsamp,M.routbuf,0,MAX_ORDER),a1.arraycopy(M.lstepbuf,M.totsamp,M.lstepbuf,0,MAX_ORDER),a1.arraycopy(M.rstepbuf,M.totsamp,M.rstepbuf,0,MAX_ORDER),M.totsamp=0}if(M.totsamp>M.sampleWindow)return GAIN_ANALYSIS_ERROR}return $<MAX_ORDER?(a1.arraycopy(M.linprebuf,$,M.linprebuf,0,MAX_ORDER-$),a1.arraycopy(M.rinprebuf,$,M.rinprebuf,0,MAX_ORDER-$),a1.arraycopy(a0,H,M.linprebuf,MAX_ORDER-$,$),a1.arraycopy(I,n0,M.rinprebuf,MAX_ORDER-$,$)):(a1.arraycopy(a0,H+$-MAX_ORDER,M.linprebuf,0,MAX_ORDER),a1.arraycopy(I,n0+$-MAX_ORDER,M.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function O(M,a0){var H,I=0;for(H=0;H<a0;H++)I+=M[H];if(I==0)return GAIN_NOT_ENOUGH_SAMPLES;var n0=0|Math.ceil(I*(1-Y));for(H=a0;H-- >0&&!((n0-=M[H])<=0););return T-H/q0.STEPS_per_dB}this.GetTitleGain=function(M){for(var a0=O(M.A,M.A.length),H=0;H<M.A.length;H++)M.B[H]+=M.A[H],M.A[H]=0;for(var H=0;H<MAX_ORDER;H++)M.linprebuf[H]=M.lstepbuf[H]=M.loutbuf[H]=M.rinprebuf[H]=M.rstepbuf[H]=M.routbuf[H]=0;return M.totsamp=0,M.lsum=M.rsum=0,a0}}var a2=q0,r2=V0,ee=r2.new_float,wa=r2.new_int,r1=a2;function W2(){this.linprebuf=ee(r1.MAX_ORDER*2),this.linpre=0,this.lstepbuf=ee(r1.MAX_SAMPLES_PER_WINDOW+r1.MAX_ORDER),this.lstep=0,this.loutbuf=ee(r1.MAX_SAMPLES_PER_WINDOW+r1.MAX_ORDER),this.lout=0,this.rinprebuf=ee(r1.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=ee(r1.MAX_SAMPLES_PER_WINDOW+r1.MAX_ORDER),this.rstep=0,this.routbuf=ee(r1.MAX_SAMPLES_PER_WINDOW+r1.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=wa(0|r1.STEPS_per_dB*r1.MAX_dB),this.B=wa(0|r1.STEPS_per_dB*r1.MAX_dB)}var z2=W2;function J2(T){this.bits=T}var t2=J2,ia=V0,Ia=ia.new_float,g2=ia.new_int,xa=ia.assert,er=t2,La=W0(),ar=Ne,rr=He;function tr(T){var Y=T;this.quantize=Y,this.iteration_loop=function(G,D,r0,U){var K=G.internal_flags,q=Ia(ar.SFBMAX),Z=Ia(576),y=g2(2),O=0,M,a0=K.l3_side,H=new er(O);this.quantize.rv.ResvFrameBegin(G,H),O=H.bits;for(var I=0;I<K.mode_gr;I++){M=this.quantize.qupvt.on_pe(G,D,y,O,I,I),K.mode_ext==La.MPG_MD_MS_LR&&(this.quantize.ms_convert(K.l3_side,I),this.quantize.qupvt.reduce_side(y,r0[I],O,M));for(var n0=0;n0<K.channels_out;n0++){var $,d,t=a0.tt[I][n0];t.block_type!=La.SHORT_TYPE?($=0,d=K.PSY.mask_adjust-$):($=0,d=K.PSY.mask_adjust_short-$),K.masking_lower=Math.pow(10,d*.1),this.quantize.init_outer_loop(K,t),this.quantize.init_xrpow(K,t,Z)&&(this.quantize.qupvt.calc_xmin(G,U[I][n0],t,q),this.quantize.outer_loop(G,t,q,Z,n0,y[n0])),this.quantize.iteration_finish_one(K,I,n0),xa(t.part2_3_length<=rr.MAX_BITS_PER_CHANNEL),xa(t.part2_3_length<=y[n0])}}this.quantize.rv.ResvFrameEnd(K,O)}}var sr=tr;function y0(T,Y,G,D){this.xlen=T,this.linmax=Y,this.table=G,this.hlen=D}var e0={};e0.t1HB=[1,1,1,0];e0.t2HB=[1,2,1,3,1,1,3,2,0];e0.t3HB=[3,2,1,1,1,1,3,2,0];e0.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];e0.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];e0.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];e0.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];e0.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];e0.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];e0.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];e0.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];e0.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];e0.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];e0.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];e0.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];e0.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];e0.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];e0.t1l=[1,4,3,5];e0.t2l=[1,4,7,4,5,7,6,7,8];e0.t3l=[2,3,7,4,4,7,6,7,8];e0.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];e0.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];e0.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];e0.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];e0.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];e0.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];e0.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];e0.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];e0.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];e0.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];e0.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];e0.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];e0.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];e0.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];e0.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];e0.ht=[new y0(0,0,null,null),new y0(2,0,e0.t1HB,e0.t1l),new y0(3,0,e0.t2HB,e0.t2l),new y0(3,0,e0.t3HB,e0.t3l),new y0(0,0,null,null),new y0(4,0,e0.t5HB,e0.t5l),new y0(4,0,e0.t6HB,e0.t6l),new y0(6,0,e0.t7HB,e0.t7l),new y0(6,0,e0.t8HB,e0.t8l),new y0(6,0,e0.t9HB,e0.t9l),new y0(8,0,e0.t10HB,e0.t10l),new y0(8,0,e0.t11HB,e0.t11l),new y0(8,0,e0.t12HB,e0.t12l),new y0(16,0,e0.t13HB,e0.t13l),new y0(0,0,null,e0.t16_5l),new y0(16,0,e0.t15HB,e0.t15l),new y0(1,1,e0.t16HB,e0.t16l),new y0(2,3,e0.t16HB,e0.t16l),new y0(3,7,e0.t16HB,e0.t16l),new y0(4,15,e0.t16HB,e0.t16l),new y0(6,63,e0.t16HB,e0.t16l),new y0(8,255,e0.t16HB,e0.t16l),new y0(10,1023,e0.t16HB,e0.t16l),new y0(13,8191,e0.t16HB,e0.t16l),new y0(4,15,e0.t24HB,e0.t24l),new y0(5,31,e0.t24HB,e0.t24l),new y0(6,63,e0.t24HB,e0.t24l),new y0(7,127,e0.t24HB,e0.t24l),new y0(8,255,e0.t24HB,e0.t24l),new y0(9,511,e0.t24HB,e0.t24l),new y0(11,2047,e0.t24HB,e0.t24l),new y0(13,8191,e0.t24HB,e0.t24l),new y0(0,0,e0.t32HB,e0.t32l),new y0(0,0,e0.t33HB,e0.t33l)];e0.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];e0.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];e0.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];e0.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];e0.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];e0.scfsi_band=[0,6,11,16,21];var na=e0,y1=ga,te=V0,G1=te.VbrMode,Be=te.Float,je=te.Util,P1=te.new_float,ir=te.new_int,he=te.assert,Q0=W0(),nr=t2,l1=He;w1.Q_MAX=257;w1.Q_MAX2=116;w1.LARGE_BITS=1e5;w1.IXMAX_VAL=8206;function w1(){var T=null,Y=null,G=null;this.setModules=function(t,e,c){T=t,Y=e,G=c};function D(t){return M[t+w1.Q_MAX2]}this.IPOW20=function(t){return a0[t]};var r0=2220446049250313e-31,U=w1.IXMAX_VAL,K=U+2,q=w1.Q_MAX,Z=w1.Q_MAX2,y=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var O=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=O,this.sfBandIndex=[new y1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y1([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y1([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y1([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y1([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new y1([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var M=P1(q+Z+1),a0=P1(q),H=P1(K),I=P1(K);this.adj43=I;function n0(t,e){var c=G.ATHformula(e,t);return c-=y,c=Math.pow(10,c/10+t.ATHlower),c}function $(t){for(var e=t.internal_flags.ATH.l,c=t.internal_flags.ATH.psfb21,u=t.internal_flags.ATH.s,R=t.internal_flags.ATH.psfb12,f=t.internal_flags,v=t.out_samplerate,h=0;h<Q0.SBMAX_l;h++){var s=f.scalefac_band.l[h],o=f.scalefac_band.l[h+1];e[h]=Be.MAX_VALUE;for(var a=s;a<o;a++){var i=a*v/1152,n=n0(t,i);e[h]=Math.min(e[h],n)}}for(var h=0;h<Q0.PSFB21;h++){var s=f.scalefac_band.psfb21[h],o=f.scalefac_band.psfb21[h+1];c[h]=Be.MAX_VALUE;for(var a=s;a<o;a++){var i=a*v/1152,n=n0(t,i);c[h]=Math.min(c[h],n)}}for(var h=0;h<Q0.SBMAX_s;h++){var s=f.scalefac_band.s[h],o=f.scalefac_band.s[h+1];u[h]=Be.MAX_VALUE;for(var a=s;a<o;a++){var i=a*v/384,n=n0(t,i);u[h]=Math.min(u[h],n)}u[h]*=f.scalefac_band.s[h+1]-f.scalefac_band.s[h]}for(var h=0;h<Q0.PSFB12;h++){var s=f.scalefac_band.psfb12[h],o=f.scalefac_band.psfb12[h+1];R[h]=Be.MAX_VALUE;for(var a=s;a<o;a++){var i=a*v/384,n=n0(t,i);R[h]=Math.min(R[h],n)}R[h]*=f.scalefac_band.s[13]-f.scalefac_band.s[12]}if(t.noATH){for(var h=0;h<Q0.SBMAX_l;h++)e[h]=1e-20;for(var h=0;h<Q0.PSFB21;h++)c[h]=1e-20;for(var h=0;h<Q0.SBMAX_s;h++)u[h]=1e-20;for(var h=0;h<Q0.PSFB12;h++)R[h]=1e-20}f.ATH.floor=10*Math.log10(n0(t,-1))}this.iteration_init=function(t){var e=t.internal_flags,c=e.l3_side,u;if(e.iteration_init_init==0){for(e.iteration_init_init=1,c.main_data_begin=0,$(t),H[0]=0,u=1;u<K;u++)H[u]=Math.pow(u,4/3);for(u=0;u<K-1;u++)I[u]=u+1-Math.pow(.5*(H[u]+H[u+1]),.75);for(I[u]=.5,u=0;u<q;u++)a0[u]=Math.pow(2,(u-210)*-.1875);for(u=0;u<=q+Z;u++)M[u]=Math.pow(2,(u-210-Z)*.25);T.huffman_init(e);{var R,f,v,h;for(u=t.exp_nspsytune>>2&63,u>=32&&(u-=64),R=Math.pow(10,u/4/10),u=t.exp_nspsytune>>8&63,u>=32&&(u-=64),f=Math.pow(10,u/4/10),u=t.exp_nspsytune>>14&63,u>=32&&(u-=64),v=Math.pow(10,u/4/10),u=t.exp_nspsytune>>20&63,u>=32&&(u-=64),h=v*Math.pow(10,u/4/10),u=0;u<Q0.SBMAX_l;u++){var s;u<=6?s=R:u<=13?s=f:u<=20?s=v:s=h,e.nsPsy.longfact[u]=s}for(u=0;u<Q0.SBMAX_s;u++){var s;u<=5?s=R:u<=10?s=f:u<=11?s=v:s=h,e.nsPsy.shortfact[u]=s}}}},this.on_pe=function(t,e,c,u,R,f){var v=t.internal_flags,h=0,s,o=ir(2),a,i=new nr(h),n=Y.ResvMaxBits(t,u,i,f);h=i.bits;var l=h+n;for(l>l1.MAX_BITS_PER_GRANULE&&(l=l1.MAX_BITS_PER_GRANULE),s=0,a=0;a<v.channels_out;++a)c[a]=Math.min(l1.MAX_BITS_PER_CHANNEL,h/v.channels_out),o[a]=0|c[a]*e[R][a]/700-c[a],o[a]>u*3/4&&(o[a]=u*3/4),o[a]<0&&(o[a]=0),o[a]+c[a]>l1.MAX_BITS_PER_CHANNEL&&(o[a]=Math.max(0,l1.MAX_BITS_PER_CHANNEL-c[a])),s+=o[a];if(s>n)for(a=0;a<v.channels_out;++a)o[a]=n*o[a]/s;for(a=0;a<v.channels_out;++a)c[a]+=o[a],n-=o[a];for(s=0,a=0;a<v.channels_out;++a)s+=c[a];if(s>l1.MAX_BITS_PER_GRANULE){var m=0;for(a=0;a<v.channels_out;++a)c[a]*=l1.MAX_BITS_PER_GRANULE,c[a]/=s,m+=c[a]}return l},this.reduce_side=function(t,e,c,u){he(t[0]+t[1]<=l1.MAX_BITS_PER_GRANULE);var R=.33*(.5-e)/.5;R<0&&(R=0),R>.5&&(R=.5);var f=0|R*.5*(t[0]+t[1]);f>l1.MAX_BITS_PER_CHANNEL-t[0]&&(f=l1.MAX_BITS_PER_CHANNEL-t[0]),f<0&&(f=0),t[1]>=125&&(t[1]-f>125?(t[0]<c&&(t[0]+=f),t[1]-=f):(t[0]+=t[1]-125,t[1]=125)),f=t[0]+t[1],f>u&&(t[0]=u*t[0]/f,t[1]=u*t[1]/f),he(t[0]<=l1.MAX_BITS_PER_CHANNEL),he(t[1]<=l1.MAX_BITS_PER_CHANNEL),he(t[0]+t[1]<=l1.MAX_BITS_PER_GRANULE)},this.athAdjust=function(t,e,c){var u=90.30873362,R=94.82444863,f=je.FAST_LOG10_X(e,10),v=t*t,h=0;return f-=c,v>1e-20&&(h=1+je.FAST_LOG10_X(v,10/u)),h<0&&(h=0),f*=h,f+=c+u-R,Math.pow(10,.1*f)},this.calc_xmin=function(t,e,c,u){var R=0,f=t.internal_flags,v,h=0,s=0,o=f.ATH,a=c.xr,i=t.VBR==G1.vbr_mtrh?1:0,n=f.masking_lower;for((t.VBR==G1.vbr_mtrh||t.VBR==G1.vbr_mt)&&(n=1),v=0;v<c.psy_lmax;v++){var l,m,X,E,x,r;t.VBR==G1.vbr_rh||t.VBR==G1.vbr_mtrh?m=athAdjust(o.adjust,o.l[v],o.floor):m=o.adjust*o.l[v],x=c.width[v],X=m/x,E=r0,r=x>>1,l=0;do{var _,L;_=a[h]*a[h],l+=_,E+=_<X?_:X,h++,L=a[h]*a[h],l+=L,E+=L<X?L:X,h++}while(--r>0);if(l>m&&s++,v==Q0.SBPSY_l){var p=m*f.nsPsy.longfact[v];E<p&&(E=p)}if(i!=0&&(m=E),!t.ATHonly){var s0=e.en.l[v];if(s0>0){var p;p=l*e.thm.l[v]*n/s0,i!=0&&(p*=f.nsPsy.longfact[v]),m<p&&(m=p)}}i!=0?u[R++]=m:u[R++]=m*f.nsPsy.longfact[v]}var v0=575;if(c.block_type!=Q0.SHORT_TYPE)for(var _0=576;_0--!=0&&BitStream.EQ(a[_0],0);)v0=_0;c.max_nonzero_coeff=v0;for(var i0=c.sfb_smin;v<c.psymax;i0++,v+=3){var x,d0,h0;for(t.VBR==G1.vbr_rh||t.VBR==G1.vbr_mtrh?h0=athAdjust(o.adjust,o.s[i0],o.floor):h0=o.adjust*o.s[i0],x=c.width[v],d0=0;d0<3;d0++){var l=0,m,X,E,r=x>>1;X=h0/x,E=r0;do{var _,L;_=a[h]*a[h],l+=_,E+=_<X?_:X,h++,L=a[h]*a[h],l+=L,E+=L<X?L:X,h++}while(--r>0);if(l>h0&&s++,i0==Q0.SBPSY_s){var p=h0*f.nsPsy.shortfact[i0];E<p&&(E=p)}if(i!=0?m=E:m=h0,!t.ATHonly&&!t.ATHshort){var s0=e.en.s[i0][d0];if(s0>0){var p;p=l*e.thm.s[i0][d0]*n/s0,i!=0&&(p*=f.nsPsy.shortfact[i0]),m<p&&(m=p)}}i!=0?u[R++]=m:u[R++]=m*f.nsPsy.shortfact[i0]}t.useTemporal&&(u[R-3]>u[R-3+1]&&(u[R-3+1]+=(u[R-3]-u[R-3+1])*f.decay),u[R-3+1]>u[R-3+2]&&(u[R-3+2]+=(u[R-3+1]-u[R-3+2])*f.decay))}return s};function d(t){this.s=t}this.calc_noise_core=function(t,e,c,u){var R=0,f=e.s,v=t.l3_enc;if(f>t.count1)for(;c--!=0;){var h;h=t.xr[f],f++,R+=h*h,h=t.xr[f],f++,R+=h*h}else if(f>t.big_values){var s=P1(2);for(s[0]=0,s[1]=u;c--!=0;){var h;h=Math.abs(t.xr[f])-s[v[f]],f++,R+=h*h,h=Math.abs(t.xr[f])-s[v[f]],f++,R+=h*h}}else for(;c--!=0;){var h;h=Math.abs(t.xr[f])-H[v[f]]*u,f++,R+=h*h,h=Math.abs(t.xr[f])-H[v[f]]*u,f++,R+=h*h}return e.s=f,R},this.calc_noise=function(t,e,c,u,R){var f=0,v=0,h,s,o=0,a=0,i=0,n=-20,l=0,m=t.scalefac,X=0;for(u.over_SSD=0,h=0;h<t.psymax;h++){var E=t.global_gain-(m[X++]+(t.preflag!=0?O[h]:0)<<t.scalefac_scale+1)-t.subblock_gain[t.window[h]]*8,x=0;if(R!=null&&R.step[h]==E)x=R.noise[h],l+=t.width[h],c[f++]=x/e[v++],x=R.noise_log[h];else{var r=D(E);if(s=t.width[h]>>1,l+t.width[h]>t.max_nonzero_coeff){var _;_=t.max_nonzero_coeff-l+1,_>0?s=_>>1:s=0}var L=new d(l);x=this.calc_noise_core(t,L,s,r),l=L.s,R!=null&&(R.step[h]=E,R.noise[h]=x),x=c[f++]=x/e[v++],x=je.FAST_LOG10(Math.max(x,1e-20)),R!=null&&(R.noise_log[h]=x)}if(R!=null&&(R.global_gain=t.global_gain),i+=x,x>0){var p;p=Math.max(0|x*10+.5,1),u.over_SSD+=p*p,o++,a+=x}n=Math.max(n,x)}return u.over_count=o,u.tot_noise=i,u.over_noise=a,u.max_noise=n,o},this.set_pinfo=function(t,e,c,u,R){var f=t.internal_flags,v,h,s,o,a,i=e.scalefac_scale==0?.5:1,n=e.scalefac,l=P1(L3Side.SFBMAX),m=P1(L3Side.SFBMAX),X=new CalcNoiseResult;calc_xmin(t,c,e,l),calc_noise(e,l,m,X,null);var E=0;for(h=e.sfb_lmax,e.block_type!=Q0.SHORT_TYPE&&e.mixed_block_flag==0&&(h=22),v=0;v<h;v++){var x=f.scalefac_band.l[v],r=f.scalefac_band.l[v+1],_=r-x;for(o=0;E<r;E++)o+=e.xr[E]*e.xr[E];o/=_,a=1e15,f.pinfo.en[u][R][v]=a*o,f.pinfo.xfsf[u][R][v]=a*l[v]*m[v]/_,c.en.l[v]>0&&!t.ATHonly?o=o/c.en.l[v]:o=0,f.pinfo.thr[u][R][v]=a*Math.max(o*c.thm.l[v],f.ATH.l[v]),f.pinfo.LAMEsfb[u][R][v]=0,e.preflag!=0&&v>=11&&(f.pinfo.LAMEsfb[u][R][v]=-i*O[v]),v<Q0.SBPSY_l&&(he(n[v]>=0),f.pinfo.LAMEsfb[u][R][v]-=i*n[v])}if(e.block_type==Q0.SHORT_TYPE)for(h=v,v=e.sfb_smin;v<Q0.SBMAX_s;v++)for(var x=f.scalefac_band.s[v],r=f.scalefac_band.s[v+1],_=r-x,L=0;L<3;L++){for(o=0,s=x;s<r;s++)o+=e.xr[E]*e.xr[E],E++;o=Math.max(o/_,1e-20),a=1e15,f.pinfo.en_s[u][R][3*v+L]=a*o,f.pinfo.xfsf_s[u][R][3*v+L]=a*l[h]*m[h]/_,c.en.s[v][L]>0?o=o/c.en.s[v][L]:o=0,(t.ATHonly||t.ATHshort)&&(o=0),f.pinfo.thr_s[u][R][3*v+L]=a*Math.max(o*c.thm.s[v][L],f.ATH.s[v]),f.pinfo.LAMEsfb_s[u][R][3*v+L]=-2*e.subblock_gain[L],v<Q0.SBPSY_s&&(f.pinfo.LAMEsfb_s[u][R][3*v+L]-=i*n[h]),h++}f.pinfo.LAMEqss[u][R]=e.global_gain,f.pinfo.LAMEmainbits[u][R]=e.part2_3_length+e.part2_length,f.pinfo.LAMEsfbits[u][R]=e.part2_length,f.pinfo.over[u][R]=X.over_count,f.pinfo.max_noise[u][R]=X.max_noise*10,f.pinfo.over_noise[u][R]=X.over_noise*10,f.pinfo.tot_noise[u][R]=X.tot_noise*10,f.pinfo.over_SSD[u][R]=X.over_SSD}}var s2=w1,Ve=V0,_r=Ve.System,lr=Ve.Arrays,ue=Ve.new_int,Te=Ve.assert,k0=W0(),X0=na,vr=ta,D1=s2;function ra(){var T=null;this.qupvt=null,this.setModules=function(s){this.qupvt=s,T=s};function Y(s){this.bits=0|s}var G=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function D(s,o,a,i,n,l){var m=.5946/o;for(s=s>>1;s--!=0;)n[l++]=m>a[i++]?0:1,n[l++]=m>a[i++]?0:1}function r0(s,o,a,i,n,l){s=s>>1;var m=s%2;for(s=s>>1;s--!=0;){var X,E,x,r,_,L,p,s0;X=a[i++]*o,E=a[i++]*o,_=0|X,x=a[i++]*o,L=0|E,r=a[i++]*o,p=0|x,X+=T.adj43[_],s0=0|r,E+=T.adj43[L],n[l++]=0|X,x+=T.adj43[p],n[l++]=0|E,r+=T.adj43[s0],n[l++]=0|x,n[l++]=0|r}if(m!=0){var X,E,_,L;X=a[i++]*o,E=a[i++]*o,_=0|X,L=0|E,X+=T.adj43[_],E+=T.adj43[L],n[l++]=0|X,n[l++]=0|E}}function U(s,o,a,i,n){var l,m,X=0,E,x=0,r=0,_=0,L=o,p=0,s0=L,v0=0,_0=s,i0=0;for(E=n!=null&&i.global_gain==n.global_gain,i.block_type==k0.SHORT_TYPE?m=38:m=21,l=0;l<=m;l++){var d0=-1;if((E||i.block_type==k0.NORM_TYPE)&&(d0=i.global_gain-(i.scalefac[l]+(i.preflag!=0?T.pretab[l]:0)<<i.scalefac_scale+1)-i.subblock_gain[i.window[l]]*8),Te(i.width[l]>=0),E&&n.step[l]==d0)x!=0&&(r0(x,a,_0,i0,s0,v0),x=0),r!=0&&(D(r,a,_0,i0,s0,v0),r=0);else{var h0=i.width[l];if(X+i.width[l]>i.max_nonzero_coeff){var t0;t0=i.max_nonzero_coeff-X+1,lr.fill(o,i.max_nonzero_coeff,576,0),h0=t0,h0<0&&(h0=0),l=m+1}if(x==0&&r==0&&(s0=L,v0=p,_0=s,i0=_),n!=null&&n.sfb_count1>0&&l>=n.sfb_count1&&n.step[l]>0&&d0>=n.step[l]?(x!=0&&(r0(x,a,_0,i0,s0,v0),x=0,s0=L,v0=p,_0=s,i0=_),r+=h0):(r!=0&&(D(r,a,_0,i0,s0,v0),r=0,s0=L,v0=p,_0=s,i0=_),x+=h0),h0<=0){r!=0&&(D(r,a,_0,i0,s0,v0),r=0),x!=0&&(r0(x,a,_0,i0,s0,v0),x=0);break}}l<=m&&(p+=i.width[l],_+=i.width[l],X+=i.width[l])}x!=0&&(r0(x,a,_0,i0,s0,v0),x=0),r!=0&&(D(r,a,_0,i0,s0,v0),r=0)}function K(s,o,a){var i=0,n=0;do{var l=s[o++],m=s[o++];i<l&&(i=l),n<m&&(n=m)}while(o<a);return i<n&&(i=n),i}function q(s,o,a,i,n,l){var m=X0.ht[i].xlen*65536+X0.ht[n].xlen,X=0,E;do{var x=s[o++],r=s[o++];x!=0&&(x>14&&(x=15,X+=m),x*=16),r!=0&&(r>14&&(r=15,X+=m),x+=r),X+=X0.largetbl[x]}while(o<a);return E=X&65535,X>>=16,X>E&&(X=E,i=n),l.bits+=X,i}function Z(s,o,a,i){var n=0,l=X0.ht[1].hlen;do{var m=s[o+0]*2+s[o+1];o+=2,n+=l[m]}while(o<a);return i.bits+=n,1}function y(s,o,a,i,n){var l=0,m,X=X0.ht[i].xlen,E;i==2?E=X0.table23:E=X0.table56;do{var x=s[o+0]*X+s[o+1];o+=2,l+=E[x]}while(o<a);return m=l&65535,l>>=16,l>m&&(l=m,i++),n.bits+=l,i}function O(s,o,a,i,n){var l=0,m=0,X=0,E=X0.ht[i].xlen,x=X0.ht[i].hlen,r=X0.ht[i+1].hlen,_=X0.ht[i+2].hlen;do{var L=s[o+0]*E+s[o+1];o+=2,l+=x[L],m+=r[L],X+=_[L]}while(o<a);var p=i;return l>m&&(l=m,p++),l>X&&(l=X,p=i+2),n.bits+=l,p}var M=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function a0(s,o,a,i){var n=K(s,o,a);switch(n){case 0:return n;case 1:return Z(s,o,a,i);case 2:case 3:return y(s,o,a,M[n-1],i);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return O(s,o,a,M[n-1],i);default:if(n>D1.IXMAX_VAL)return i.bits=D1.LARGE_BITS,-1;n-=15;var l;for(l=24;l<32&&!(X0.ht[l].linmax>=n);l++);var m;for(m=l-8;m<24&&!(X0.ht[m].linmax>=n);m++);return q(s,o,a,m,l,i)}}this.noquant_count_bits=function(s,o,a){var i=o.l3_enc,n=Math.min(576,o.max_nonzero_coeff+2>>1<<1);for(a!=null&&(a.sfb_count1=0);n>1&&!(i[n-1]|i[n-2]);n-=2);o.count1=n;for(var l=0,m=0;n>3;n-=4){var X;if(((i[n-1]|i[n-2]|i[n-3]|i[n-4])&2147483647)>1)break;X=((i[n-4]*2+i[n-3])*2+i[n-2])*2+i[n-1],l+=X0.t32l[X],m+=X0.t33l[X]}var E=l;if(o.count1table_select=0,l>m&&(E=m,o.count1table_select=1),o.count1bits=E,o.big_values=n,n==0)return E;if(o.block_type==k0.SHORT_TYPE)l=3*s.scalefac_band.s[3],l>o.big_values&&(l=o.big_values),m=o.big_values;else if(o.block_type==k0.NORM_TYPE){if(l=o.region0_count=s.bv_scf[n-2],m=o.region1_count=s.bv_scf[n-1],Te(l+m+2<k0.SBPSY_l),m=s.scalefac_band.l[l+m+2],l=s.scalefac_band.l[l+1],m<n){var x=new Y(E);o.table_select[2]=a0(i,m,n,x),E=x.bits}}else o.region0_count=7,o.region1_count=k0.SBMAX_l-1-7-1,l=s.scalefac_band.l[8],m=n,l>m&&(l=m);if(l=Math.min(l,n),m=Math.min(m,n),0<l){var x=new Y(E);o.table_select[0]=a0(i,0,l,x),E=x.bits}if(l<m){var x=new Y(E);o.table_select[1]=a0(i,l,m,x),E=x.bits}if(s.use_best_huffman==2&&(o.part2_3_length=E,best_huffman_divide(s,o),E=o.part2_3_length),a!=null&&o.block_type==k0.NORM_TYPE){for(var r=0;s.scalefac_band.l[r]<o.big_values;)r++;a.sfb_count1=r}return E},this.count_bits=function(s,o,a,i){var n=a.l3_enc,l=D1.IXMAX_VAL/T.IPOW20(a.global_gain);if(a.xrpow_max>l)return D1.LARGE_BITS;if(U(o,n,T.IPOW20(a.global_gain),a,i),s.substep_shaping&2)for(var m=0,X=a.global_gain+a.scalefac_scale,E=.634521682242439/T.IPOW20(X),x=0;x<a.sfbmax;x++){var r=a.width[x];if(s.pseudohalf[x]==0)m+=r;else{var _;for(_=m,m+=r;_<m;++_)n[_]=o[_]>=E?n[_]:0}}return this.noquant_count_bits(s,a,i)};function H(s,o,a,i,n,l,m){for(var X=o.big_values,E=0;E<=22;E++)i[E]=D1.LARGE_BITS;for(var E=0;E<16;E++){var x=s.scalefac_band.l[E+1];if(x>=X)break;var r=0,_=new Y(r),L=a0(a,0,x,_);r=_.bits;for(var p=0;p<8;p++){var s0=s.scalefac_band.l[E+p+2];if(s0>=X)break;var v0=r;_=new Y(v0);var _0=a0(a,x,s0,_);v0=_.bits,i[E+p]>v0&&(i[E+p]=v0,n[E+p]=E,l[E+p]=L,m[E+p]=_0)}}}function I(s,o,a,i,n,l,m,X){for(var E=o.big_values,x=2;x<k0.SBMAX_l+1;x++){var r=s.scalefac_band.l[x];if(r>=E)break;var _=n[x-2]+o.count1bits;if(a.part2_3_length<=_)break;var L=new Y(_),p=a0(i,r,E,L);_=L.bits,!(a.part2_3_length<=_)&&(a.assign(o),a.part2_3_length=_,a.region0_count=l[x-2],a.region1_count=x-2-l[x-2],a.table_select[0]=m[x-2],a.table_select[1]=X[x-2],a.table_select[2]=p)}}this.best_huffman_divide=function(s,o){var a=new vr,i=o.l3_enc,n=ue(23),l=ue(23),m=ue(23),X=ue(23);if(!(o.block_type==k0.SHORT_TYPE&&s.mode_gr==1)){a.assign(o),o.block_type==k0.NORM_TYPE&&(H(s,o,i,n,l,m,X),I(s,a,o,i,n,l,m,X));var E=a.big_values;if(!(E==0||(i[E-2]|i[E-1])>1)&&(E=o.count1+2,!(E>576))){a.assign(o),a.count1=E;for(var x=0,r=0;E>a.big_values;E-=4){var _=((i[E-4]*2+i[E-3])*2+i[E-2])*2+i[E-1];x+=X0.t32l[_],r+=X0.t33l[_]}if(a.big_values=E,a.count1table_select=0,x>r&&(x=r,a.count1table_select=1),a.count1bits=x,a.block_type==k0.NORM_TYPE)I(s,a,o,i,n,l,m,X);else{if(a.part2_3_length=x,x=s.scalefac_band.l[8],x>E&&(x=E),x>0){var L=new Y(a.part2_3_length);a.table_select[0]=a0(i,0,x,L),a.part2_3_length=L.bits}if(E>x){var L=new Y(a.part2_3_length);a.table_select[1]=a0(i,x,E,L),a.part2_3_length=L.bits}o.part2_3_length>a.part2_3_length&&o.assign(a)}}}};var n0=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],$=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],d=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],t=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];ra.slen1_tab=d,ra.slen2_tab=t;function e(s,o){for(var a,i=o.tt[1][s],n=o.tt[0][s],l=0;l<X0.scfsi_band.length-1;l++){for(a=X0.scfsi_band[l];a<X0.scfsi_band[l+1]&&!(n.scalefac[a]!=i.scalefac[a]&&i.scalefac[a]>=0);a++);if(a==X0.scfsi_band[l+1]){for(a=X0.scfsi_band[l];a<X0.scfsi_band[l+1];a++)i.scalefac[a]=-1;o.scfsi[s][l]=1}}var m=0,X=0;for(a=0;a<11;a++)i.scalefac[a]!=-1&&(X++,m<i.scalefac[a]&&(m=i.scalefac[a]));for(var E=0,x=0;a<k0.SBPSY_l;a++)i.scalefac[a]!=-1&&(x++,E<i.scalefac[a]&&(E=i.scalefac[a]));for(var l=0;l<16;l++)if(m<n0[l]&&E<$[l]){var r=d[l]*X+t[l]*x;i.part2_length>r&&(i.part2_length=r,i.scalefac_compress=l)}}this.best_scalefac_store=function(s,o,a,i){var n=i.tt[o][a],l,m,X,E,x=0;for(X=0,l=0;l<n.sfbmax;l++){var r=n.width[l];for(X+=r,E=-r;E<0&&n.l3_enc[E+X]==0;E++);E==0&&(n.scalefac[l]=x=-2)}if(n.scalefac_scale==0&&n.preflag==0){var _=0;for(l=0;l<n.sfbmax;l++)n.scalefac[l]>0&&(_|=n.scalefac[l]);if(!(_&1)&&_!=0){for(l=0;l<n.sfbmax;l++)n.scalefac[l]>0&&(n.scalefac[l]>>=1);n.scalefac_scale=x=1}}if(n.preflag==0&&n.block_type!=k0.SHORT_TYPE&&s.mode_gr==2){for(l=11;l<k0.SBPSY_l&&!(n.scalefac[l]<T.pretab[l]&&n.scalefac[l]!=-2);l++);if(l==k0.SBPSY_l){for(l=11;l<k0.SBPSY_l;l++)n.scalefac[l]>0&&(n.scalefac[l]-=T.pretab[l]);n.preflag=x=1}}for(m=0;m<4;m++)i.scfsi[a][m]=0;for(s.mode_gr==2&&o==1&&i.tt[0][a].block_type!=k0.SHORT_TYPE&&i.tt[1][a].block_type!=k0.SHORT_TYPE&&(e(a,i),x=0),l=0;l<n.sfbmax;l++)n.scalefac[l]==-2&&(n.scalefac[l]=0);x!=0&&(s.mode_gr==2?this.scale_bitcount(n):this.scale_bitcount_lsf(s,n))};function c(s,o){for(var a=0;a<o;++a)if(s[a]<0)return!1;return!0}var u=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],R=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],f=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(s){var o,a,i=0,n=0,l,m=s.scalefac;if(Te(c(m,s.sfbmax)),s.block_type==k0.SHORT_TYPE)l=u,s.mixed_block_flag!=0&&(l=R);else if(l=f,s.preflag==0){for(a=11;a<k0.SBPSY_l&&!(m[a]<T.pretab[a]);a++);if(a==k0.SBPSY_l)for(s.preflag=1,a=11;a<k0.SBPSY_l;a++)m[a]-=T.pretab[a]}for(a=0;a<s.sfbdivide;a++)i<m[a]&&(i=m[a]);for(;a<s.sfbmax;a++)n<m[a]&&(n=m[a]);for(s.part2_length=D1.LARGE_BITS,o=0;o<16;o++)i<n0[o]&&n<$[o]&&s.part2_length>l[o]&&(s.part2_length=l[o],s.scalefac_compress=o);return s.part2_length==D1.LARGE_BITS};var v=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(s,o){var a,i,n,l,m,X,E,x,r=ue(4),_=o.scalefac;for(o.preflag!=0?a=2:a=0,E=0;E<4;E++)r[E]=0;if(o.block_type==k0.SHORT_TYPE){i=1;var L=T.nr_of_sfb_block[a][i];for(x=0,n=0;n<4;n++)for(l=L[n]/3,E=0;E<l;E++,x++)for(m=0;m<3;m++)_[x*3+m]>r[n]&&(r[n]=_[x*3+m])}else{i=0;var L=T.nr_of_sfb_block[a][i];for(x=0,n=0;n<4;n++)for(l=L[n],E=0;E<l;E++,x++)_[x]>r[n]&&(r[n]=_[x])}for(X=!1,n=0;n<4;n++)r[n]>v[a][n]&&(X=!0);if(!X){var p,s0,v0,_0;for(o.sfb_partition_table=T.nr_of_sfb_block[a][i],n=0;n<4;n++)o.slen[n]=h[r[n]];switch(p=o.slen[0],s0=o.slen[1],v0=o.slen[2],_0=o.slen[3],a){case 0:o.scalefac_compress=(p*5+s0<<4)+(v0<<2)+_0;break;case 1:o.scalefac_compress=400+(p*5+s0<<2)+v0;break;case 2:o.scalefac_compress=500+p*3+s0;break;default:_r.err.printf(`intensity stereo not implemented yet
`);break}}if(!X)for(Te(o.sfb_partition_table!=null),o.part2_length=0,n=0;n<4;n++)o.part2_length+=o.slen[n]*o.sfb_partition_table[n];return X};var h=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(s){for(var o=2;o<=576;o+=2){for(var a=0,i;s.scalefac_band.l[++a]<o;);for(i=G[a][0];s.scalefac_band.l[i+1]>o;)i--;for(i<0&&(i=G[a][0]),s.bv_scf[o-2]=i,i=G[a][1];s.scalefac_band.l[i+s.bv_scf[o-2]+2]>o;)i--;i<0&&(i=G[a][1]),s.bv_scf[o-1]=i}}}var i2=ra,se=V0,A1=se.System,or=se.Arrays,hr=se.new_byte,ur=se.new_float_n,fr=se.new_int,C0=se.assert,pa=i2,We=na,ye=W0(),Z1=He;Le.EQ=function(T,Y){return Math.abs(T)>Math.abs(Y)?Math.abs(T-Y)<=Math.abs(T)*1e-6:Math.abs(T-Y)<=Math.abs(Y)*1e-6};Le.NEQ=function(T,Y){return!Le.EQ(T,Y)};function Le(){var T=this,Y=32773,G=null,D=null,r0=null,U=null;this.setModules=function(v,h,s,o){G=v,D=h,r0=s,U=o};var K=null,q=0,Z=0,y=0;this.getframebits=function(v){var h=v.internal_flags,s;h.bitrate_index!=0?s=We.bitrate_table[v.version][h.bitrate_index]:s=v.brate;var o=0|(v.version+1)*72e3*s/v.out_samplerate+h.padding;return 8*o};function O(v){A1.arraycopy(v.header[v.w_ptr].buf,0,K,Z,v.sideinfo_len),Z+=v.sideinfo_len,q+=v.sideinfo_len*8,v.w_ptr=v.w_ptr+1&Z1.MAX_HEADER_BUF-1}function M(v,h,s){for(;s>0;){var o;y==0&&(y=8,Z++,C0(Z<Lame.LAME_MAXMP3BUFFER),C0(v.header[v.w_ptr].write_timing>=q),v.header[v.w_ptr].write_timing==q&&O(v),K[Z]=0),o=Math.min(s,y),s-=o,y-=o,K[Z]|=h>>s<<y,q+=o}}function a0(v,h,s){for(;s>0;){var o;y==0&&(y=8,Z++,C0(Z<Lame.LAME_MAXMP3BUFFER),K[Z]=0),o=Math.min(s,y),s-=o,y-=o,K[Z]|=h>>s<<y,q+=o}}function H(v,h){var s=v.internal_flags,o;if(h>=8&&(M(s,76,8),h-=8),h>=8&&(M(s,65,8),h-=8),h>=8&&(M(s,77,8),h-=8),h>=8&&(M(s,69,8),h-=8),h>=32){var a=r0.getLameShortVersion();if(h>=32)for(o=0;o<a.length&&h>=8;++o)h-=8,M(s,a.charAt(o),8)}for(;h>=1;h-=1)M(s,s.ancillary_flag,1),s.ancillary_flag^=v.disable_reservoir?0:1}function I(v,h,s){for(var o=v.header[v.h_ptr].ptr;s>0;){var a=Math.min(s,8-(o&7));s-=a,v.header[v.h_ptr].buf[o>>3]|=h>>s<<8-(o&7)-a,o+=a}v.header[v.h_ptr].ptr=o}function n0(v,h){v<<=8;for(var s=0;s<8;s++)v<<=1,h<<=1,(h^v)&65536&&(h^=Y);return h}this.CRC_writeheader=function(v,h){var s=65535;s=n0(h[2]&255,s),s=n0(h[3]&255,s);for(var o=6;o<v.sideinfo_len;o++)s=n0(h[o]&255,s);h[4]=byte(s>>8),h[5]=byte(s&255)};function $(v,h){var s=v.internal_flags,o,a,i;if(o=s.l3_side,s.header[s.h_ptr].ptr=0,or.fill(s.header[s.h_ptr].buf,0,s.sideinfo_len,0),v.out_samplerate<16e3?I(s,4094,12):I(s,4095,12),I(s,v.version,1),I(s,1,2),I(s,v.error_protection?0:1,1),I(s,s.bitrate_index,4),I(s,s.samplerate_index,2),I(s,s.padding,1),I(s,v.extension,1),I(s,v.mode.ordinal(),2),I(s,s.mode_ext,2),I(s,v.copyright,1),I(s,v.original,1),I(s,v.emphasis,2),v.error_protection&&I(s,0,16),v.version==1){for(C0(o.main_data_begin>=0),I(s,o.main_data_begin,9),s.channels_out==2?I(s,o.private_bits,3):I(s,o.private_bits,5),i=0;i<s.channels_out;i++){var n;for(n=0;n<4;n++)I(s,o.scfsi[i][n],1)}for(a=0;a<2;a++)for(i=0;i<s.channels_out;i++){var l=o.tt[a][i];I(s,l.part2_3_length+l.part2_length,12),I(s,l.big_values/2,9),I(s,l.global_gain,8),I(s,l.scalefac_compress,4),l.block_type!=ye.NORM_TYPE?(I(s,1,1),I(s,l.block_type,2),I(s,l.mixed_block_flag,1),l.table_select[0]==14&&(l.table_select[0]=16),I(s,l.table_select[0],5),l.table_select[1]==14&&(l.table_select[1]=16),I(s,l.table_select[1],5),I(s,l.subblock_gain[0],3),I(s,l.subblock_gain[1],3),I(s,l.subblock_gain[2],3)):(I(s,0,1),l.table_select[0]==14&&(l.table_select[0]=16),I(s,l.table_select[0],5),l.table_select[1]==14&&(l.table_select[1]=16),I(s,l.table_select[1],5),l.table_select[2]==14&&(l.table_select[2]=16),I(s,l.table_select[2],5),C0(0<=l.region0_count&&l.region0_count<16),C0(0<=l.region1_count&&l.region1_count<8),I(s,l.region0_count,4),I(s,l.region1_count,3)),I(s,l.preflag,1),I(s,l.scalefac_scale,1),I(s,l.count1table_select,1)}}else for(C0(o.main_data_begin>=0),I(s,o.main_data_begin,8),I(s,o.private_bits,s.channels_out),a=0,i=0;i<s.channels_out;i++){var l=o.tt[a][i];I(s,l.part2_3_length+l.part2_length,12),I(s,l.big_values/2,9),I(s,l.global_gain,8),I(s,l.scalefac_compress,9),l.block_type!=ye.NORM_TYPE?(I(s,1,1),I(s,l.block_type,2),I(s,l.mixed_block_flag,1),l.table_select[0]==14&&(l.table_select[0]=16),I(s,l.table_select[0],5),l.table_select[1]==14&&(l.table_select[1]=16),I(s,l.table_select[1],5),I(s,l.subblock_gain[0],3),I(s,l.subblock_gain[1],3),I(s,l.subblock_gain[2],3)):(I(s,0,1),l.table_select[0]==14&&(l.table_select[0]=16),I(s,l.table_select[0],5),l.table_select[1]==14&&(l.table_select[1]=16),I(s,l.table_select[1],5),l.table_select[2]==14&&(l.table_select[2]=16),I(s,l.table_select[2],5),C0(0<=l.region0_count&&l.region0_count<16),C0(0<=l.region1_count&&l.region1_count<8),I(s,l.region0_count,4),I(s,l.region1_count,3)),I(s,l.scalefac_scale,1),I(s,l.count1table_select,1)}v.error_protection&&CRC_writeheader(s,s.header[s.h_ptr].buf);{var m=s.h_ptr;C0(s.header[m].ptr==s.sideinfo_len*8),s.h_ptr=m+1&Z1.MAX_HEADER_BUF-1,s.header[s.h_ptr].write_timing=s.header[m].write_timing+h,s.h_ptr==s.w_ptr&&A1.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}function d(v,h){var s=We.ht[h.count1table_select+32],o,a=0,i=h.big_values,n=h.big_values;for(C0(h.count1table_select<2),o=(h.count1-h.big_values)/4;o>0;--o){var l=0,m=0,X;X=h.l3_enc[i+0],X!=0&&(m+=8,h.xr[n+0]<0&&l++),X=h.l3_enc[i+1],X!=0&&(m+=4,l*=2,h.xr[n+1]<0&&l++),X=h.l3_enc[i+2],X!=0&&(m+=2,l*=2,h.xr[n+2]<0&&l++),X=h.l3_enc[i+3],X!=0&&(m++,l*=2,h.xr[n+3]<0&&l++),i+=4,n+=4,M(v,l+s.table[m],s.hlen[m]),a+=s.hlen[m]}return a}function t(v,h,s,o,a){var i=We.ht[h],n=0;if(h==0)return n;for(var l=s;l<o;l+=2){var m=0,X=0,E=i.xlen,x=i.xlen,r=0,_=a.l3_enc[l],L=a.l3_enc[l+1];if(_!=0&&(a.xr[l]<0&&r++,m--),h>15){if(_>14){var p=_-15;C0(p<=i.linmax),r|=p<<1,X=E,_=15}if(L>14){var s0=L-15;C0(s0<=i.linmax),r<<=E,r|=s0,X+=E,L=15}x=16}L!=0&&(r<<=1,a.xr[l+1]<0&&r++,m--),_=_*x+L,X-=m,m+=i.hlen[_],M(v,i.table[_],m),M(v,r,X),n+=m+X}return n}function e(v,h){var s=3*v.scalefac_band.s[3];s>h.big_values&&(s=h.big_values);var o=t(v,h.table_select[0],0,s,h);return o+=t(v,h.table_select[1],s,h.big_values,h),o}function c(v,h){var s,o,a,i;s=h.big_values;var n=h.region0_count+1;return C0(n<v.scalefac_band.l.length),a=v.scalefac_band.l[n],n+=h.region1_count+1,C0(n<v.scalefac_band.l.length),i=v.scalefac_band.l[n],a>s&&(a=s),i>s&&(i=s),o=t(v,h.table_select[0],0,a,h),o+=t(v,h.table_select[1],a,i,h),o+=t(v,h.table_select[2],i,s,h),o}function u(v){var h,s,o,a,i=0,n=v.internal_flags,l=n.l3_side;if(v.version==1)for(h=0;h<2;h++)for(s=0;s<n.channels_out;s++){var m=l.tt[h][s],X=pa.slen1_tab[m.scalefac_compress],E=pa.slen2_tab[m.scalefac_compress];for(a=0,o=0;o<m.sfbdivide;o++)m.scalefac[o]!=-1&&(M(n,m.scalefac[o],X),a+=X);for(;o<m.sfbmax;o++)m.scalefac[o]!=-1&&(M(n,m.scalefac[o],E),a+=E);C0(a==m.part2_length),m.block_type==ye.SHORT_TYPE?a+=e(n,m):a+=c(n,m),a+=d(n,m),C0(a==m.part2_3_length+m.part2_length),i+=a}else for(h=0,s=0;s<n.channels_out;s++){var m=l.tt[h][s],x,r,_=0;if(C0(m.sfb_partition_table!=null),a=0,o=0,r=0,m.block_type==ye.SHORT_TYPE){for(;r<4;r++){var L=m.sfb_partition_table[r]/3,p=m.slen[r];for(x=0;x<L;x++,o++)M(n,Math.max(m.scalefac[o*3+0],0),p),M(n,Math.max(m.scalefac[o*3+1],0),p),M(n,Math.max(m.scalefac[o*3+2],0),p),_+=3*p}a+=e(n,m)}else{for(;r<4;r++){var L=m.sfb_partition_table[r],p=m.slen[r];for(x=0;x<L;x++,o++)M(n,Math.max(m.scalefac[o],0),p),_+=p}a+=c(n,m)}a+=d(n,m),C0(a==m.part2_3_length),C0(_==m.part2_length),i+=_+a}return i}function R(){this.total=0}function f(v,h){var s=v.internal_flags,o,a,i,n,l;return l=s.w_ptr,n=s.h_ptr-1,n==-1&&(n=Z1.MAX_HEADER_BUF-1),o=s.header[n].write_timing-q,h.total=o,o>=0&&(a=1+n-l,n<l&&(a=1+n-l+Z1.MAX_HEADER_BUF),o-=a*8*s.sideinfo_len),i=T.getframebits(v),o+=i,h.total+=i,h.total%8!=0?h.total=1+h.total/8:h.total=h.total/8,h.total+=Z+1,o<0&&A1.err.println(`strange error flushing buffer ... 
`),o}this.flush_bitstream=function(v){var h=v.internal_flags,s,o,a=h.h_ptr-1;if(a==-1&&(a=Z1.MAX_HEADER_BUF-1),s=h.l3_side,!((o=f(v,new R))<0)){if(H(v,o),C0(h.header[a].write_timing+this.getframebits(v)==q),h.ResvSize=0,s.main_data_begin=0,h.findReplayGain){var i=G.GetTitleGain(h.rgdata);C0(NEQ(i,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),h.RadioGain=Math.floor(i*10+.5)|0}h.findPeakSample&&(h.noclipGainChange=Math.ceil(Math.log10(h.PeakSample/32767)*20*10)|0,h.noclipGainChange>0&&(EQ(v.scale,1)||EQ(v.scale,0))?h.noclipScale=Math.floor(32767/h.PeakSample*100)/100:h.noclipScale=-1)}},this.add_dummy_byte=function(v,h,s){for(var o=v.internal_flags,a;s-- >0;)for(a0(o,h,8),a=0;a<Z1.MAX_HEADER_BUF;++a)o.header[a].write_timing+=8},this.format_bitstream=function(v){var h=v.internal_flags,s;s=h.l3_side;var o=this.getframebits(v);H(v,s.resvDrain_pre),$(v,o);var a=8*h.sideinfo_len;if(a+=u(v),H(v,s.resvDrain_post),a+=s.resvDrain_post,s.main_data_begin+=(o-a)/8,f(v,new R)!=h.ResvSize&&A1.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),s.main_data_begin*8!=h.ResvSize&&(A1.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*s.main_data_begin,h.ResvSize,s.resvDrain_post,s.resvDrain_pre,8*h.sideinfo_len,a-s.resvDrain_post-8*h.sideinfo_len,a,a%8,o),A1.err.println("This is a fatal error.  It has several possible causes:"),A1.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),A1.err.println(" 9%%  Your system is overclocked"),A1.err.println(" 1%%  bug in LAME encoding library"),h.ResvSize=s.main_data_begin*8),q>1e9){var i;for(i=0;i<Z1.MAX_HEADER_BUF;++i)h.header[i].write_timing-=q;q=0}return 0},this.copy_buffer=function(v,h,s,o,a){var i=Z+1;if(i<=0)return 0;if(o!=0&&i>o)return-1;if(A1.arraycopy(K,0,h,s,i),Z=-1,y=0,a!=0){var n=fr(1);if(n[0]=v.nMusicCRC,U.updateMusicCRC(n,h,s,i),v.nMusicCRC=n[0],i>0&&(v.VBR_seek_table.nBytesWritten+=i),v.decode_on_the_fly){for(var l=ur([2,1152]),m=i,X=-1,E;X!=0;)if(X=D.hip_decode1_unclipped(v.hip,h,s,m,l[0],l[1]),m=0,X==-1&&(X=0),X>0){if(v.findPeakSample){for(E=0;E<X;E++)l[0][E]>v.PeakSample?v.PeakSample=l[0][E]:-l[0][E]>v.PeakSample&&(v.PeakSample=-l[0][E]);if(v.channels_out>1)for(E=0;E<X;E++)l[1][E]>v.PeakSample?v.PeakSample=l[1][E]:-l[1][E]>v.PeakSample&&(v.PeakSample=-l[1][E])}if(v.findReplayGain&&G.AnalyzeSamples(v.rgdata,l[0],0,l[1],0,X,v.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return i},this.init_bit_stream_w=function(v){K=hr(Lame.LAME_MAXMP3BUFFER),v.h_ptr=v.w_ptr=0,v.header[v.h_ptr].write_timing=0,Z=-1,y=0,q=0}}var n2=Le,Q1=V0,mr=Q1.System,x0=Q1.VbrMode,ze=Q1.ShortBlock,K1=Q1.new_float,Na=Q1.new_int_n,br=Q1.new_short_n,N1=Q1.assert,Je=E2,cr=y2,we=He,dr=j2,Sr=z2,Mr=sr,U1=n2,E1=na,Y0=W0();function Z0(){var T=this,Y=128*1024;Z0.V9=410,Z0.V8=420,Z0.V7=430,Z0.V6=440,Z0.V5=450,Z0.V4=460,Z0.V3=470,Z0.V2=480,Z0.V1=490,Z0.V0=500,Z0.R3MIX=1e3,Z0.STANDARD=1001,Z0.EXTREME=1002,Z0.INSANE=1003,Z0.STANDARD_FAST=1004,Z0.EXTREME_FAST=1005,Z0.MEDIUM=1006,Z0.MEDIUM_FAST=1007;var G=16384+Y;Z0.LAME_MAXMP3BUFFER=G;var D,r0,U,K,q,Z=new Je,y,O,M;this.enc=new Y0,this.setModules=function(r,_,L,p,s0,v0,_0,i0,d0){D=r,r0=_,U=L,K=p,q=s0,y=v0,O=i0,M=d0,this.enc.setModules(r0,Z,K,y)};function a0(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=K1(Y0.SBMAX_l),this.bo_s_weight=K1(Y0.SBMAX_s)}function H(){this.lowerlimit=0}function I(r,_){this.lowpass=_}var n0=4294479419;function $(r){var _;return r.class_id=n0,_=r.internal_flags=new we,r.mode=MPEGMode.NOT_SET,r.original=1,r.in_samplerate=44100,r.num_channels=2,r.num_samples=-1,r.bWriteVbrTag=!0,r.quality=-1,r.short_blocks=null,_.subblock_gain=-1,r.lowpassfreq=0,r.highpassfreq=0,r.lowpasswidth=-1,r.highpasswidth=-1,r.VBR=x0.vbr_off,r.VBR_q=4,r.ATHcurve=-1,r.VBR_mean_bitrate_kbps=128,r.VBR_min_bitrate_kbps=0,r.VBR_max_bitrate_kbps=0,r.VBR_hard_min=0,_.VBR_min_bitrate=1,_.VBR_max_bitrate=13,r.quant_comp=-1,r.quant_comp_short=-1,r.msfix=-1,_.resample_ratio=1,_.OldValue[0]=180,_.OldValue[1]=180,_.CurrentStep[0]=4,_.CurrentStep[1]=4,_.masking_lower=1,_.nsPsy.attackthre=-1,_.nsPsy.attackthre_s=-1,r.scale=-1,r.athaa_type=-1,r.ATHtype=-1,r.athaa_loudapprox=-1,r.athaa_sensitivity=0,r.useTemporal=null,r.interChRatio=-1,_.mf_samples_to_encode=Y0.ENCDELAY+Y0.POSTDELAY,r.encoder_padding=0,_.mf_size=Y0.ENCDELAY-Y0.MDCTDELAY,r.findReplayGain=!1,r.decode_on_the_fly=!1,_.decode_on_the_fly=!1,_.findReplayGain=!1,_.findPeakSample=!1,_.RadioGain=0,_.AudiophileGain=0,_.noclipGainChange=0,_.noclipScale=-1,r.preset=0,r.write_id3tag_automatic=!0,0}this.lame_init=function(){var r=new cr;return $(r),r.lame_allocated_gfp=1,r};function d(r){return r>1?0:r<=0?1:Math.cos(Math.PI/2*r)}this.nearestBitrateFullIndex=function(r){var _=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],L=0,p=0,s0=0,v0=0;v0=_[16],s0=16,p=_[16],L=16;for(var _0=0;_0<16;_0++)if(Math.max(r,_[_0+1])!=r){v0=_[_0+1],s0=_0+1,p=_[_0],L=_0;break}return v0-r>r-p?L:s0};function t(r,_){var L=44100;return _>=48e3?L=48e3:_>=44100?L=44100:_>=32e3?L=32e3:_>=24e3?L=24e3:_>=22050?L=22050:_>=16e3?L=16e3:_>=12e3?L=12e3:_>=11025?L=11025:_>=8e3&&(L=8e3),r==-1?L:(r<=15960&&(L=44100),r<=15250&&(L=32e3),r<=11220&&(L=24e3),r<=9970&&(L=22050),r<=7230&&(L=16e3),r<=5420&&(L=12e3),r<=4510&&(L=11025),r<=3970&&(L=8e3),_<L?_>44100?48e3:_>32e3?44100:_>24e3?32e3:_>22050?24e3:_>16e3?22050:_>12e3?16e3:_>11025?12e3:_>8e3?11025:8e3:L)}function e(r,_){switch(r){case 44100:return _.version=1,0;case 48e3:return _.version=1,1;case 32e3:return _.version=1,2;case 22050:return _.version=0,0;case 24e3:return _.version=0,1;case 16e3:return _.version=0,2;case 11025:return _.version=0,0;case 12e3:return _.version=0,1;case 8e3:return _.version=0,2;default:return _.version=0,-1}}function c(r,_,L){L<16e3&&(_=2);for(var p=E1.bitrate_table[_][1],s0=2;s0<=14;s0++)E1.bitrate_table[_][s0]>0&&Math.abs(E1.bitrate_table[_][s0]-r)<Math.abs(p-r)&&(p=E1.bitrate_table[_][s0]);return p}function u(r,_,L){L<16e3&&(_=2);for(var p=0;p<=14;p++)if(E1.bitrate_table[_][p]>0&&E1.bitrate_table[_][p]==r)return p;return-1}function R(r,_){var L=[new I(8,2e3),new I(16,3700),new I(24,3900),new I(32,5500),new I(40,7e3),new I(48,7500),new I(56,1e4),new I(64,11e3),new I(80,13500),new I(96,15100),new I(112,15600),new I(128,17e3),new I(160,17500),new I(192,18600),new I(224,19400),new I(256,19700),new I(320,20500)],p=T.nearestBitrateFullIndex(_);r.lowerlimit=L[p].lowpass}function f(r){var _=r.internal_flags,L=32,p=-1;if(_.lowpass1>0){for(var s0=999,v0=0;v0<=31;v0++){var _0=v0/31;_0>=_.lowpass2&&(L=Math.min(L,v0)),_.lowpass1<_0&&_0<_.lowpass2&&(s0=Math.min(s0,v0))}s0==999?_.lowpass1=(L-.75)/31:_.lowpass1=(s0-.75)/31,_.lowpass2=L/31}if(_.highpass2>0&&_.highpass2<.9*(.75/31)&&(_.highpass1=0,_.highpass2=0,mr.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),_.highpass2>0){for(var i0=-1,v0=0;v0<=31;v0++){var _0=v0/31;_0<=_.highpass1&&(p=Math.max(p,v0)),_.highpass1<_0&&_0<_.highpass2&&(i0=Math.max(i0,v0))}_.highpass1=p/31,i0==-1?_.highpass2=(p+.75)/31:_.highpass2=(i0+.75)/31}for(var v0=0;v0<32;v0++){var d0,h0,_0=v0/31;_.highpass2>_.highpass1?d0=d((_.highpass2-_0)/(_.highpass2-_.highpass1+1e-20)):d0=1,_.lowpass2>_.lowpass1?h0=d((_0-_.lowpass1)/(_.lowpass2-_.lowpass1+1e-20)):h0=1,_.amp_filter[v0]=d0*h0}}function v(r){var _=r.internal_flags;switch(r.quality){default:case 9:_.psymodel=0,_.noise_shaping=0,_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.use_best_huffman=0,_.full_outer_loop=0;break;case 8:r.quality=7;case 7:_.psymodel=1,_.noise_shaping=0,_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.use_best_huffman=0,_.full_outer_loop=0;break;case 6:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=0,_.full_outer_loop=0;break;case 5:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=0,_.full_outer_loop=0;break;case 4:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=0,_.noise_shaping_stop=0,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 3:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.noise_shaping_amp=1,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 2:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=1,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 1:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=2,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break;case 0:_.psymodel=1,_.noise_shaping==0&&(_.noise_shaping=1),_.substep_shaping==0&&(_.substep_shaping=2),_.noise_shaping_amp=2,_.noise_shaping_stop=1,_.subblock_gain==-1&&(_.subblock_gain=1),_.use_best_huffman=1,_.full_outer_loop=0;break}}function h(r){var _=r.internal_flags;r.frameNum=0,r.write_id3tag_automatic&&O.id3tag_write_v2(r),_.bitrate_stereoMode_Hist=Na([16,5]),_.bitrate_blockType_Hist=Na([16,6]),_.PeakSample=0,r.bWriteVbrTag&&y.InitVbrTag(r)}this.lame_init_params=function(r){var _=r.internal_flags;if(_.Class_ID=0,_.ATH==null&&(_.ATH=new dr),_.PSY==null&&(_.PSY=new a0),_.rgdata==null&&(_.rgdata=new Sr),_.channels_in=r.num_channels,_.channels_in==1&&(r.mode=MPEGMode.MONO),_.channels_out=r.mode==MPEGMode.MONO?1:2,_.mode_ext=Y0.MPG_MD_MS_LR,r.mode==MPEGMode.MONO&&(r.force_ms=!1),r.VBR==x0.vbr_off&&r.VBR_mean_bitrate_kbps!=128&&r.brate==0&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==x0.vbr_off||r.VBR==x0.vbr_mtrh||r.VBR==x0.vbr_mt||(r.free_format=!1),r.VBR==x0.vbr_off&&r.brate==0&&U1.EQ(r.compression_ratio,0)&&(r.compression_ratio=11.025),r.VBR==x0.vbr_off&&r.compression_ratio>0&&(r.out_samplerate==0&&(r.out_samplerate=map2MP3Frequency(int(.97*r.in_samplerate))),r.brate=0|r.out_samplerate*16*_.channels_out/(1e3*r.compression_ratio),_.samplerate_index=e(r.out_samplerate,r),r.free_format||(r.brate=c(r.brate,r.version,r.out_samplerate))),r.out_samplerate!=0&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),r.lowpassfreq==0){var L=16e3;switch(r.VBR){case x0.vbr_off:{var p=new H;R(p,r.brate),L=p.lowerlimit;break}case x0.vbr_abr:{var p=new H;R(p,r.VBR_mean_bitrate_kbps),L=p.lowerlimit;break}case x0.vbr_rh:{var s0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var v0=s0[r.VBR_q],_0=s0[r.VBR_q+1],i0=r.VBR_q_frac;L=linear_int(v0,_0,i0)}else L=19500;break}default:{var s0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=r.VBR_q&&r.VBR_q<=9){var v0=s0[r.VBR_q],_0=s0[r.VBR_q+1],i0=r.VBR_q_frac;L=linear_int(v0,_0,i0)}else L=19500}}r.mode==MPEGMode.MONO&&(r.VBR==x0.vbr_off||r.VBR==x0.vbr_abr)&&(L*=1.5),r.lowpassfreq=L|0}if(r.out_samplerate==0&&(2*r.lowpassfreq>r.in_samplerate&&(r.lowpassfreq=r.in_samplerate/2),r.out_samplerate=t(r.lowpassfreq|0,r.in_samplerate)),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==x0.vbr_off&&(r.compression_ratio=r.out_samplerate*16*_.channels_out/(1e3*r.brate)),r.VBR==x0.vbr_abr&&(r.compression_ratio=r.out_samplerate*16*_.channels_out/(1e3*r.VBR_mean_bitrate_kbps)),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,_.findPeakSample=!1),_.findReplayGain=r.findReplayGain,_.decode_on_the_fly=r.decode_on_the_fly,_.decode_on_the_fly&&(_.findPeakSample=!0),_.findReplayGain&&D.InitGainAnalysis(_.rgdata,r.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return r.internal_flags=null,-6;switch(_.decode_on_the_fly&&!r.decode_only&&(_.hip!=null&&M.hip_decode_exit(_.hip),_.hip=M.hip_decode_init()),_.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*_.mode_gr,r.encoder_delay=Y0.ENCDELAY,_.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case x0.vbr_mt:case x0.vbr_rh:case x0.vbr_mtrh:{var d0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];r.compression_ratio=d0[r.VBR_q]}break;case x0.vbr_abr:r.compression_ratio=r.out_samplerate*16*_.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=r.out_samplerate*16*_.channels_out/(1e3*r.brate);break}if(r.mode==MPEGMode.NOT_SET&&(r.mode=MPEGMode.JOINT_STEREO),r.highpassfreq>0?(_.highpass1=2*r.highpassfreq,r.highpasswidth>=0?_.highpass2=2*(r.highpassfreq+r.highpasswidth):_.highpass2=1*2*r.highpassfreq,_.highpass1/=r.out_samplerate,_.highpass2/=r.out_samplerate):(_.highpass1=0,_.highpass2=0),r.lowpassfreq>0?(_.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?(_.lowpass1=2*(r.lowpassfreq-r.lowpasswidth),_.lowpass1<0&&(_.lowpass1=0)):_.lowpass1=1*2*r.lowpassfreq,_.lowpass1/=r.out_samplerate,_.lowpass2/=r.out_samplerate):(_.lowpass1=0,_.lowpass2=0),f(r),_.samplerate_index=e(r.out_samplerate,r),_.samplerate_index<0)return r.internal_flags=null,-1;if(r.VBR==x0.vbr_off){if(r.free_format)_.bitrate_index=0;else if(r.brate=c(r.brate,r.version,r.out_samplerate),_.bitrate_index=u(r.brate,r.version,r.out_samplerate),_.bitrate_index<=0)return r.internal_flags=null,-1}else _.bitrate_index=1;r.analysis&&(r.bWriteVbrTag=!1),_.pinfo!=null&&(r.bWriteVbrTag=!1),r0.init_bit_stream_w(_);for(var h0=_.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),t0=0;t0<Y0.SBMAX_l+1;t0++)_.scalefac_band.l[t0]=K.sfBandIndex[h0].l[t0];for(var t0=0;t0<Y0.PSFB21+1;t0++){var B0=(_.scalefac_band.l[22]-_.scalefac_band.l[21])/Y0.PSFB21,O0=_.scalefac_band.l[21]+t0*B0;_.scalefac_band.psfb21[t0]=O0}_.scalefac_band.psfb21[Y0.PSFB21]=576;for(var t0=0;t0<Y0.SBMAX_s+1;t0++)_.scalefac_band.s[t0]=K.sfBandIndex[h0].s[t0];for(var t0=0;t0<Y0.PSFB12+1;t0++){var B0=(_.scalefac_band.s[13]-_.scalefac_band.s[12])/Y0.PSFB12,O0=_.scalefac_band.s[12]+t0*B0;_.scalefac_band.psfb12[t0]=O0}_.scalefac_band.psfb12[Y0.PSFB12]=192,r.version==1?_.sideinfo_len=_.channels_out==1?21:36:_.sideinfo_len=_.channels_out==1?13:21,r.error_protection&&(_.sideinfo_len+=2),h(r),_.Class_ID=n0;{var S0;for(S0=0;S0<19;S0++)_.nsPsy.pefirbuf[S0]=700*_.mode_gr*_.channels_out;r.ATHtype==-1&&(r.ATHtype=4)}switch(N1(r.VBR_q<=9),N1(r.VBR_q>=0),r.VBR){case x0.vbr_mt:r.VBR=x0.vbr_mtrh;case x0.vbr_mtrh:{r.useTemporal==null&&(r.useTemporal=!1),U.apply_preset(r,500-r.VBR_q*10,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),_.PSY.mask_adjust=r.maskingadjust,_.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?_.sfb21_extra=!1:_.sfb21_extra=r.out_samplerate>44e3,_.iteration_loop=new VBRNewIterationLoop(q);break}case x0.vbr_rh:{U.apply_preset(r,500-r.VBR_q*10,0),_.PSY.mask_adjust=r.maskingadjust,_.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?_.sfb21_extra=!1:_.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),_.iteration_loop=new VBROldIterationLoop(q);break}default:{var I0;_.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),I0=r.VBR,I0==x0.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),U.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=I0,_.PSY.mask_adjust=r.maskingadjust,_.PSY.mask_adjust_short=r.maskingadjust_short,I0==x0.vbr_off?_.iteration_loop=new Mr(q):_.iteration_loop=new ABRIterationLoop(q);break}}if(N1(r.scale>=0),r.VBR!=x0.vbr_off){if(_.VBR_min_bitrate=1,_.VBR_max_bitrate=14,r.out_samplerate<16e3&&(_.VBR_max_bitrate=8),r.VBR_min_bitrate_kbps!=0&&(r.VBR_min_bitrate_kbps=c(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),_.VBR_min_bitrate=u(r.VBR_min_bitrate_kbps,r.version,r.out_samplerate),_.VBR_min_bitrate<0)||r.VBR_max_bitrate_kbps!=0&&(r.VBR_max_bitrate_kbps=c(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),_.VBR_max_bitrate=u(r.VBR_max_bitrate_kbps,r.version,r.out_samplerate),_.VBR_max_bitrate<0))return-1;r.VBR_min_bitrate_kbps=E1.bitrate_table[r.version][_.VBR_min_bitrate],r.VBR_max_bitrate_kbps=E1.bitrate_table[r.version][_.VBR_max_bitrate],r.VBR_mean_bitrate_kbps=Math.min(E1.bitrate_table[r.version][_.VBR_max_bitrate],r.VBR_mean_bitrate_kbps),r.VBR_mean_bitrate_kbps=Math.max(E1.bitrate_table[r.version][_.VBR_min_bitrate],r.VBR_mean_bitrate_kbps)}return r.tune&&(_.PSY.mask_adjust+=r.tune_value_a,_.PSY.mask_adjust_short+=r.tune_value_a),v(r),N1(r.scale>=0),r.athaa_type<0?_.ATH.useAdjust=3:_.ATH.useAdjust=r.athaa_type,_.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),r.short_blocks==null&&(r.short_blocks=ze.short_block_allowed),r.short_blocks==ze.short_block_allowed&&(r.mode==MPEGMode.JOINT_STEREO||r.mode==MPEGMode.STEREO)&&(r.short_blocks=ze.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=r.exp_nspsytune|1,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=Je.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=Je.NSATTACKTHRE_S),N1(r.scale>=0),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),r.useTemporal==null&&(r.useTemporal=!0),_.slot_lag=_.frac_SpF=0,r.VBR==x0.vbr_off&&(_.slot_lag=_.frac_SpF=(r.version+1)*72e3*r.brate%r.out_samplerate|0),K.iteration_init(r),Z.psymodel_init(r),N1(r.scale>=0),0};function s(r,_){(r.in_buffer_0==null||r.in_buffer_nsamples<_)&&(r.in_buffer_0=K1(_),r.in_buffer_1=K1(_),r.in_buffer_nsamples=_)}this.lame_encode_flush=function(r,_,L,p){var s0=r.internal_flags,v0=br([2,1152]),_0=0,i0,d0,h0,t0,B0=s0.mf_samples_to_encode-Y0.POSTDELAY,O0=o(r);if(s0.mf_samples_to_encode<1)return 0;for(i0=0,r.in_samplerate!=r.out_samplerate&&(B0+=16*r.out_samplerate/r.in_samplerate),h0=r.framesize-B0%r.framesize,h0<576&&(h0+=r.framesize),r.encoder_padding=h0,t0=(B0+h0)/r.framesize;t0>0&&_0>=0;){var S0=O0-s0.mf_size,I0=r.frameNum;S0*=r.in_samplerate,S0/=r.out_samplerate,S0>1152&&(S0=1152),S0<1&&(S0=1),d0=p-i0,p==0&&(d0=0),_0=this.lame_encode_buffer(r,v0[0],v0[1],S0,_,L,d0),L+=_0,i0+=_0,t0-=I0!=r.frameNum?1:0}if(s0.mf_samples_to_encode=0,_0<0||(d0=p-i0,p==0&&(d0=0),r0.flush_bitstream(r),_0=r0.copy_buffer(s0,_,L,d0,1),_0<0))return _0;if(L+=_0,i0+=_0,d0=p-i0,p==0&&(d0=0),r.write_id3tag_automatic){if(O.id3tag_write_v1(r),_0=r0.copy_buffer(s0,_,L,d0,0),_0<0)return _0;i0+=_0}return i0},this.lame_encode_buffer=function(r,_,L,p,s0,v0,_0){var i0=r.internal_flags,d0=[null,null];if(i0.Class_ID!=n0)return-3;if(p==0)return 0;s(i0,p),d0[0]=i0.in_buffer_0,d0[1]=i0.in_buffer_1;for(var h0=0;h0<p;h0++)d0[0][h0]=_[h0],i0.channels_in>1&&(d0[1][h0]=L[h0]);return a(r,d0[0],d0[1],p,s0,v0,_0)};function o(r){var _=Y0.BLKSIZE+r.framesize-Y0.FFTOFFSET;return _=Math.max(_,512+r.framesize-32),_}function a(r,_,L,p,s0,v0,_0){var i0=r.internal_flags,d0=0,h0,t0,B0,O0,S0,I0=[null,null],T0=[null,null];if(i0.Class_ID!=n0)return-3;if(p==0)return 0;if(S0=r0.copy_buffer(i0,s0,v0,_0,0),S0<0)return S0;if(v0+=S0,d0+=S0,T0[0]=_,T0[1]=L,U1.NEQ(r.scale,0)&&U1.NEQ(r.scale,1))for(t0=0;t0<p;++t0)T0[0][t0]*=r.scale,i0.channels_out==2&&(T0[1][t0]*=r.scale);if(U1.NEQ(r.scale_left,0)&&U1.NEQ(r.scale_left,1))for(t0=0;t0<p;++t0)T0[0][t0]*=r.scale_left;if(U1.NEQ(r.scale_right,0)&&U1.NEQ(r.scale_right,1))for(t0=0;t0<p;++t0)T0[1][t0]*=r.scale_right;if(r.num_channels==2&&i0.channels_out==1)for(t0=0;t0<p;++t0)T0[0][t0]=.5*(T0[0][t0]+T0[1][t0]),T0[1][t0]=0;O0=o(r),I0[0]=i0.mfbuf[0],I0[1]=i0.mfbuf[1];for(var F0=0;p>0;){var K0=[null,null],M1=0,o1=0;K0[0]=T0[0],K0[1]=T0[1];var z0=new n;if(x(r,I0,K0,F0,p,z0),M1=z0.n_in,o1=z0.n_out,i0.findReplayGain&&!i0.decode_on_the_fly&&D.AnalyzeSamples(i0.rgdata,I0[0],i0.mf_size,I0[1],i0.mf_size,o1,i0.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(p-=M1,F0+=M1,i0.channels_out==2,i0.mf_size+=o1,N1(i0.mf_size<=we.MFSIZE),i0.mf_samples_to_encode<1&&(i0.mf_samples_to_encode=Y0.ENCDELAY+Y0.POSTDELAY),i0.mf_samples_to_encode+=o1,i0.mf_size>=O0){var f1=_0-d0;if(_0==0&&(f1=0),h0=i(r,I0[0],I0[1],s0,v0,f1),h0<0)return h0;for(v0+=h0,d0+=h0,i0.mf_size-=r.framesize,i0.mf_samples_to_encode-=r.framesize,B0=0;B0<i0.channels_out;B0++)for(t0=0;t0<i0.mf_size;t0++)I0[B0][t0]=I0[B0][t0+r.framesize]}}return d0}function i(r,_,L,p,s0,v0){var _0=T.enc.lame_encode_mp3_frame(r,_,L,p,s0,v0);return r.frameNum++,_0}function n(){this.n_in=0,this.n_out=0}function l(){this.num_used=0}function m(r,_){return _!=0?m(_,r%_):r}function X(r,_,L){var p=Math.PI*_;r/=L,r<0&&(r=0),r>1&&(r=1);var s0=r-.5,v0=.42-.5*Math.cos(2*r*Math.PI)+.08*Math.cos(4*r*Math.PI);return Math.abs(s0)<1e-9?p/Math.PI:v0*Math.sin(L*p*s0)/(Math.PI*L*s0)}function E(r,_,L,p,s0,v0,_0,i0,d0){var h0=r.internal_flags,t0,B0=0,O0,S0=r.out_samplerate/m(r.out_samplerate,r.in_samplerate);S0>we.BPC&&(S0=we.BPC);var I0=Math.abs(h0.resample_ratio-Math.floor(.5+h0.resample_ratio))<1e-4?1:0,T0=1/h0.resample_ratio;T0>1&&(T0=1);var F0=31;F0%2==0&&--F0,F0+=I0;var K0=F0+1;if(h0.fill_buffer_resample_init==0){for(h0.inbuf_old[0]=K1(K0),h0.inbuf_old[1]=K1(K0),t0=0;t0<=2*S0;++t0)h0.blackfilt[t0]=K1(K0);for(h0.itime[0]=0,h0.itime[1]=0,B0=0;B0<=2*S0;B0++){var M1=0,o1=(B0-S0)/(2*S0);for(t0=0;t0<=F0;t0++)M1+=h0.blackfilt[B0][t0]=X(t0-o1,T0,F0);for(t0=0;t0<=F0;t0++)h0.blackfilt[B0][t0]/=M1}h0.fill_buffer_resample_init=1}var z0=h0.inbuf_old[d0];for(O0=0;O0<p;O0++){var f1,V1;if(f1=O0*h0.resample_ratio,B0=0|Math.floor(f1-h0.itime[d0]),F0+B0-F0/2>=_0)break;var o1=f1-h0.itime[d0]-(B0+.5*(F0%2));V1=0|Math.floor(o1*2*S0+S0+.5);var p1=0;for(t0=0;t0<=F0;++t0){var t1=0|t0+B0-F0/2,O1;O1=t1<0?z0[K0+t1]:s0[v0+t1],p1+=O1*h0.blackfilt[V1][t0]}_[L+O0]=p1}if(i0.num_used=Math.min(_0,F0+B0-F0/2),h0.itime[d0]+=i0.num_used-O0*h0.resample_ratio,i0.num_used>=K0)for(t0=0;t0<K0;t0++)z0[t0]=s0[v0+i0.num_used+t0-K0];else{var T1=K0-i0.num_used;for(t0=0;t0<T1;++t0)z0[t0]=z0[t0+i0.num_used];for(B0=0;t0<K0;++t0,++B0)z0[t0]=s0[v0+B0];N1(B0==i0.num_used)}return O0}function x(r,_,L,p,s0,v0){var _0=r.internal_flags;if(_0.resample_ratio<.9999||_0.resample_ratio>1.0001)for(var i0=0;i0<_0.channels_out;i0++){var d0=new l;v0.n_out=E(r,_[i0],_0.mf_size,r.framesize,L[i0],p,s0,d0,i0),v0.n_in=d0.num_used}else{v0.n_out=Math.min(r.framesize,s0),v0.n_in=v0.n_out;for(var h0=0;h0<v0.n_out;++h0)_[0][_0.mf_size+h0]=L[0][p+h0],_0.channels_out==2&&(_[1][_0.mf_size+h0]=L[1][p+h0])}}}var Rr=Z0,Ar=V0,B1=Ar.VbrMode;function Er(){function T(y,O,M,a0,H,I,n0,$,d,t,e,c,u,R,f){this.vbr_q=y,this.quant_comp=O,this.quant_comp_s=M,this.expY=a0,this.st_lrm=H,this.st_s=I,this.masking_adj=n0,this.masking_adj_short=$,this.ath_lower=d,this.ath_curve=t,this.ath_sensitivity=e,this.interch=c,this.safejoint=u,this.sfb21mod=R,this.msfix=f}function Y(y,O,M,a0,H,I,n0,$,d,t,e,c,u,R){this.quant_comp=O,this.quant_comp_s=M,this.safejoint=a0,this.nsmsfix=H,this.st_lrm=I,this.st_s=n0,this.nsbass=$,this.scale=d,this.masking_adj=t,this.ath_lower=e,this.ath_curve=c,this.interch=u,this.sfscale=R}var G;this.setModules=function(y){G=y};var D=[new T(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new T(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new T(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new T(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new T(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new T(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new T(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new T(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new T(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new T(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new T(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],r0=[new T(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new T(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new T(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new T(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new T(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new T(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new T(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new T(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new T(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new T(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new T(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function U(y,O,M){var a0=y.VBR==B1.vbr_rh?D:r0,H=y.VBR_q_frac,I=a0[O],n0=a0[O+1],$=I;I.st_lrm=I.st_lrm+H*(n0.st_lrm-I.st_lrm),I.st_s=I.st_s+H*(n0.st_s-I.st_s),I.masking_adj=I.masking_adj+H*(n0.masking_adj-I.masking_adj),I.masking_adj_short=I.masking_adj_short+H*(n0.masking_adj_short-I.masking_adj_short),I.ath_lower=I.ath_lower+H*(n0.ath_lower-I.ath_lower),I.ath_curve=I.ath_curve+H*(n0.ath_curve-I.ath_curve),I.ath_sensitivity=I.ath_sensitivity+H*(n0.ath_sensitivity-I.ath_sensitivity),I.interch=I.interch+H*(n0.interch-I.interch),I.msfix=I.msfix+H*(n0.msfix-I.msfix),Z(y,$.vbr_q),M!=0?y.quant_comp=$.quant_comp:Math.abs(y.quant_comp- -1)>0||(y.quant_comp=$.quant_comp),M!=0?y.quant_comp_short=$.quant_comp_s:Math.abs(y.quant_comp_short- -1)>0||(y.quant_comp_short=$.quant_comp_s),$.expY!=0&&(y.experimentalY=$.expY!=0),M!=0?y.internal_flags.nsPsy.attackthre=$.st_lrm:Math.abs(y.internal_flags.nsPsy.attackthre- -1)>0||(y.internal_flags.nsPsy.attackthre=$.st_lrm),M!=0?y.internal_flags.nsPsy.attackthre_s=$.st_s:Math.abs(y.internal_flags.nsPsy.attackthre_s- -1)>0||(y.internal_flags.nsPsy.attackthre_s=$.st_s),M!=0?y.maskingadjust=$.masking_adj:Math.abs(y.maskingadjust-0)>0||(y.maskingadjust=$.masking_adj),M!=0?y.maskingadjust_short=$.masking_adj_short:Math.abs(y.maskingadjust_short-0)>0||(y.maskingadjust_short=$.masking_adj_short),M!=0?y.ATHlower=-$.ath_lower/10:Math.abs(-y.ATHlower*10-0)>0||(y.ATHlower=-$.ath_lower/10),M!=0?y.ATHcurve=$.ath_curve:Math.abs(y.ATHcurve- -1)>0||(y.ATHcurve=$.ath_curve),M!=0?y.athaa_sensitivity=$.ath_sensitivity:Math.abs(y.athaa_sensitivity- -1)>0||(y.athaa_sensitivity=$.ath_sensitivity),$.interch>0&&(M!=0?y.interChRatio=$.interch:Math.abs(y.interChRatio- -1)>0||(y.interChRatio=$.interch)),$.safejoint>0&&(y.exp_nspsytune=y.exp_nspsytune|$.safejoint),$.sfb21mod>0&&(y.exp_nspsytune=y.exp_nspsytune|$.sfb21mod<<20),M!=0?y.msfix=$.msfix:Math.abs(y.msfix- -1)>0||(y.msfix=$.msfix),M==0&&(y.VBR_q=O,y.VBR_q_frac=H)}var K=[new Y(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new Y(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new Y(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new Y(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new Y(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new Y(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new Y(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new Y(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new Y(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new Y(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new Y(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new Y(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new Y(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new Y(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new Y(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new Y(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new Y(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function q(y,O,M){var a0=O,H=G.nearestBitrateFullIndex(O);if(y.VBR=B1.vbr_abr,y.VBR_mean_bitrate_kbps=a0,y.VBR_mean_bitrate_kbps=Math.min(y.VBR_mean_bitrate_kbps,320),y.VBR_mean_bitrate_kbps=Math.max(y.VBR_mean_bitrate_kbps,8),y.brate=y.VBR_mean_bitrate_kbps,y.VBR_mean_bitrate_kbps>320&&(y.disable_reservoir=!0),K[H].safejoint>0&&(y.exp_nspsytune=y.exp_nspsytune|2),K[H].sfscale>0&&(y.internal_flags.noise_shaping=2),Math.abs(K[H].nsbass)>0){var I=int(K[H].nsbass*4);I<0&&(I+=64),y.exp_nspsytune=y.exp_nspsytune|I<<2}return M!=0?y.quant_comp=K[H].quant_comp:Math.abs(y.quant_comp- -1)>0||(y.quant_comp=K[H].quant_comp),M!=0?y.quant_comp_short=K[H].quant_comp_s:Math.abs(y.quant_comp_short- -1)>0||(y.quant_comp_short=K[H].quant_comp_s),M!=0?y.msfix=K[H].nsmsfix:Math.abs(y.msfix- -1)>0||(y.msfix=K[H].nsmsfix),M!=0?y.internal_flags.nsPsy.attackthre=K[H].st_lrm:Math.abs(y.internal_flags.nsPsy.attackthre- -1)>0||(y.internal_flags.nsPsy.attackthre=K[H].st_lrm),M!=0?y.internal_flags.nsPsy.attackthre_s=K[H].st_s:Math.abs(y.internal_flags.nsPsy.attackthre_s- -1)>0||(y.internal_flags.nsPsy.attackthre_s=K[H].st_s),M!=0?y.scale=K[H].scale:Math.abs(y.scale- -1)>0||(y.scale=K[H].scale),M!=0?y.maskingadjust=K[H].masking_adj:Math.abs(y.maskingadjust-0)>0||(y.maskingadjust=K[H].masking_adj),K[H].masking_adj>0?M!=0?y.maskingadjust_short=K[H].masking_adj*.9:Math.abs(y.maskingadjust_short-0)>0||(y.maskingadjust_short=K[H].masking_adj*.9):M!=0?y.maskingadjust_short=K[H].masking_adj*1.1:Math.abs(y.maskingadjust_short-0)>0||(y.maskingadjust_short=K[H].masking_adj*1.1),M!=0?y.ATHlower=-K[H].ath_lower/10:Math.abs(-y.ATHlower*10-0)>0||(y.ATHlower=-K[H].ath_lower/10),M!=0?y.ATHcurve=K[H].ath_curve:Math.abs(y.ATHcurve- -1)>0||(y.ATHcurve=K[H].ath_curve),M!=0?y.interChRatio=K[H].interch:Math.abs(y.interChRatio- -1)>0||(y.interChRatio=K[H].interch),O}this.apply_preset=function(y,O,M){switch(O){case Lame.R3MIX:{O=Lame.V3,y.VBR=B1.vbr_mtrh;break}case Lame.MEDIUM:{O=Lame.V4,y.VBR=B1.vbr_rh;break}case Lame.MEDIUM_FAST:{O=Lame.V4,y.VBR=B1.vbr_mtrh;break}case Lame.STANDARD:{O=Lame.V2,y.VBR=B1.vbr_rh;break}case Lame.STANDARD_FAST:{O=Lame.V2,y.VBR=B1.vbr_mtrh;break}case Lame.EXTREME:{O=Lame.V0,y.VBR=B1.vbr_rh;break}case Lame.EXTREME_FAST:{O=Lame.V0,y.VBR=B1.vbr_mtrh;break}case Lame.INSANE:return O=320,y.preset=O,q(y,O,M),y.VBR=B1.vbr_off,O}switch(y.preset=O,O){case Lame.V9:return U(y,9,M),O;case Lame.V8:return U(y,8,M),O;case Lame.V7:return U(y,7,M),O;case Lame.V6:return U(y,6,M),O;case Lame.V5:return U(y,5,M),O;case Lame.V4:return U(y,4,M),O;case Lame.V3:return U(y,3,M),O;case Lame.V2:return U(y,2,M),O;case Lame.V1:return U(y,1,M),O;case Lame.V0:return U(y,0,M),O}return 8<=O&&O<=320?q(y,O,M):(y.preset=0,O)};function Z(y,O){var M=0;return 0>O&&(M=-1,O=0),9<O&&(M=-1,O=9),y.VBR_q=O,y.VBR_q_frac=0,M}}var Br=Er;function Tr(){this.setModules=function(T,Y){}}var yr=Tr;function wr(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}var Ir=wr,_2=V0,Ha=_2.new_float,xr=_2.new_int;function Lr(){this.global_gain=0,this.sfb_count1=0,this.step=xr(39),this.noise=Ha(39),this.noise_log=Ha(39)}var pr=Lr,ie=V0,H1=ie.System,Va=ie.VbrMode,ge=ie.Util,ae=ie.Arrays,fe=ie.new_float,me=ie.assert,Nr=yr,ea=Ir,Hr=pr,w0=W0(),Oa=ta,ka=Ne;function Vr(){var T;this.rv=null;var Y;this.qupvt=null;var G,D=new Nr,r0;this.setModules=function(d,t,e,c){T=d,Y=t,this.rv=t,G=e,this.qupvt=e,r0=c,D.setModules(G,r0)},this.ms_convert=function(d,t){for(var e=0;e<576;++e){var c=d.tt[t][0].xr[e],u=d.tt[t][1].xr[e];d.tt[t][0].xr[e]=(c+u)*(ge.SQRT2*.5),d.tt[t][1].xr[e]=(c-u)*(ge.SQRT2*.5)}};function U(d,t,e,c){c=0;for(var u=0;u<=e;++u){var R=Math.abs(d.xr[u]);c+=R,t[u]=Math.sqrt(R*Math.sqrt(R)),t[u]>d.xrpow_max&&(d.xrpow_max=t[u])}return c}this.init_xrpow=function(d,t,e){var c=0,u=0|t.max_nonzero_coeff;if(t.xrpow_max=0,ae.fill(e,u,576,0),c=U(t,e,u,c),c>1e-20){var R=0;d.substep_shaping&2&&(R=1);for(var f=0;f<t.psymax;f++)d.pseudohalf[f]=R;return!0}return ae.fill(t.l3_enc,0,576,0),!1};function K(d,t){var e=d.ATH,c=t.xr;if(t.block_type!=w0.SHORT_TYPE)for(var u=!1,R=w0.PSFB21-1;R>=0&&!u;R--){var f=d.scalefac_band.psfb21[R],v=d.scalefac_band.psfb21[R+1],h=G.athAdjust(e.adjust,e.psfb21[R],e.floor);d.nsPsy.longfact[21]>1e-12&&(h*=d.nsPsy.longfact[21]);for(var s=v-1;s>=f;s--)if(Math.abs(c[s])<h)c[s]=0;else{u=!0;break}}else for(var o=0;o<3;o++)for(var u=!1,R=w0.PSFB12-1;R>=0&&!u;R--){var f=d.scalefac_band.s[12]*3+(d.scalefac_band.s[13]-d.scalefac_band.s[12])*o+(d.scalefac_band.psfb12[R]-d.scalefac_band.psfb12[0]),v=f+(d.scalefac_band.psfb12[R+1]-d.scalefac_band.psfb12[R]),a=G.athAdjust(e.adjust,e.psfb12[R],e.floor);d.nsPsy.shortfact[12]>1e-12&&(a*=d.nsPsy.shortfact[12]);for(var s=v-1;s>=f;s--)if(Math.abs(c[s])<a)c[s]=0;else{u=!0;break}}}this.init_outer_loop=function(d,t){t.part2_3_length=0,t.big_values=0,t.count1=0,t.global_gain=210,t.scalefac_compress=0,t.table_select[0]=0,t.table_select[1]=0,t.table_select[2]=0,t.subblock_gain[0]=0,t.subblock_gain[1]=0,t.subblock_gain[2]=0,t.subblock_gain[3]=0,t.region0_count=0,t.region1_count=0,t.preflag=0,t.scalefac_scale=0,t.count1table_select=0,t.part2_length=0,t.sfb_lmax=w0.SBPSY_l,t.sfb_smin=w0.SBPSY_s,t.psy_lmax=d.sfb21_extra?w0.SBMAX_l:w0.SBPSY_l,t.psymax=t.psy_lmax,t.sfbmax=t.sfb_lmax,t.sfbdivide=11;for(var e=0;e<w0.SBMAX_l;e++)t.width[e]=d.scalefac_band.l[e+1]-d.scalefac_band.l[e],t.window[e]=3;if(t.block_type==w0.SHORT_TYPE){var c=fe(576);t.sfb_smin=0,t.sfb_lmax=0,t.mixed_block_flag!=0&&(t.sfb_smin=3,t.sfb_lmax=d.mode_gr*2+4),t.psymax=t.sfb_lmax+3*((d.sfb21_extra?w0.SBMAX_s:w0.SBPSY_s)-t.sfb_smin),t.sfbmax=t.sfb_lmax+3*(w0.SBPSY_s-t.sfb_smin),t.sfbdivide=t.sfbmax-18,t.psy_lmax=t.sfb_lmax;var u=d.scalefac_band.l[t.sfb_lmax];H1.arraycopy(t.xr,0,c,0,576);for(var e=t.sfb_smin;e<w0.SBMAX_s;e++)for(var R=d.scalefac_band.s[e],f=d.scalefac_band.s[e+1],v=0;v<3;v++)for(var h=R;h<f;h++)t.xr[u++]=c[3*h+v];for(var s=t.sfb_lmax,e=t.sfb_smin;e<w0.SBMAX_s;e++)t.width[s]=t.width[s+1]=t.width[s+2]=d.scalefac_band.s[e+1]-d.scalefac_band.s[e],t.window[s]=0,t.window[s+1]=1,t.window[s+2]=2,s+=3}t.count1bits=0,t.sfb_partition_table=G.nr_of_sfb_block[0][0],t.slen[0]=0,t.slen[1]=0,t.slen[2]=0,t.slen[3]=0,t.max_nonzero_coeff=575,ae.fill(t.scalefac,0),K(d,t)};function q(d){this.ordinal=d}q.BINSEARCH_NONE=new q(0),q.BINSEARCH_UP=new q(1),q.BINSEARCH_DOWN=new q(2);function Z(d,t,e,c,u){var R,f=d.CurrentStep[c],v=!1,h=d.OldValue[c],s=q.BINSEARCH_NONE;for(t.global_gain=h,e-=t.part2_length;;){var o;if(R=r0.count_bits(d,u,t,null),f==1||R==e)break;R>e?(s==q.BINSEARCH_DOWN&&(v=!0),v&&(f/=2),s=q.BINSEARCH_UP,o=f):(s==q.BINSEARCH_UP&&(v=!0),v&&(f/=2),s=q.BINSEARCH_DOWN,o=-f),t.global_gain+=o,t.global_gain<0&&(t.global_gain=0,v=!0),t.global_gain>255&&(t.global_gain=255,v=!0)}for(me(t.global_gain>=0),me(t.global_gain<256);R>e&&t.global_gain<255;)t.global_gain++,R=r0.count_bits(d,u,t,null);return d.CurrentStep[c]=h-t.global_gain>=4?4:2,d.OldValue[c]=t.global_gain,t.part2_3_length=R,R}this.trancate_smallspectrums=function(d,t,e,c){var u=fe(ka.SFBMAX);if(!(!(d.substep_shaping&4)&&t.block_type==w0.SHORT_TYPE||d.substep_shaping&128)){G.calc_noise(t,e,u,new ea,null);for(var f=0;f<576;f++){var R=0;t.l3_enc[f]!=0&&(R=Math.abs(t.xr[f])),c[f]=R}var f=0,v=8;t.block_type==w0.SHORT_TYPE&&(v=6);do{var h,s,o,a,i=t.width[v];if(f+=i,!(u[v]>=1)&&(ae.sort(c,f-i,i),!BitStream.EQ(c[f-1],0))){h=(1-u[v])*e[v],s=0,a=0;do{var n;for(o=1;a+o<i&&!BitStream.NEQ(c[a+f-i],c[a+f+o-i]);o++);if(n=c[a+f-i]*c[a+f-i]*o,h<n){a!=0&&(s=c[a+f-i-1]);break}h-=n,a+=o}while(a<i);if(!BitStream.EQ(s,0))do Math.abs(t.xr[f-i])<=s&&(t.l3_enc[f-i]=0);while(--i>0)}}while(++v<t.psymax);t.part2_3_length=r0.noquant_count_bits(d,t,null)}};function y(d){for(var t=0;t<d.sfbmax;t++)if(d.scalefac[t]+d.subblock_gain[d.window[t]]==0)return!1;return!0}function O(d){return ge.FAST_LOG10(.368+.632*d*d*d)}function M(d,t){for(var e=1e-37,c=0;c<t.psymax;c++)e+=O(d[c]);return Math.max(1e-20,e)}function a0(d,t,e,c,u){var R;switch(d){default:case 9:{t.over_count>0?(R=e.over_SSD<=t.over_SSD,e.over_SSD==t.over_SSD&&(R=e.bits<t.bits)):R=e.max_noise<0&&e.max_noise*10+e.bits<=t.max_noise*10+t.bits;break}case 0:R=e.over_count<t.over_count||e.over_count==t.over_count&&e.over_noise<t.over_noise||e.over_count==t.over_count&&BitStream.EQ(e.over_noise,t.over_noise)&&e.tot_noise<t.tot_noise;break;case 8:e.max_noise=M(u,c);case 1:R=e.max_noise<t.max_noise;break;case 2:R=e.tot_noise<t.tot_noise;break;case 3:R=e.tot_noise<t.tot_noise&&e.max_noise<t.max_noise;break;case 4:R=e.max_noise<=0&&t.max_noise>.2||e.max_noise<=0&&t.max_noise<0&&t.max_noise>e.max_noise-.2&&e.tot_noise<t.tot_noise||e.max_noise<=0&&t.max_noise>0&&t.max_noise>e.max_noise-.2&&e.tot_noise<t.tot_noise+t.over_noise||e.max_noise>0&&t.max_noise>-.05&&t.max_noise>e.max_noise-.1&&e.tot_noise+e.over_noise<t.tot_noise+t.over_noise||e.max_noise>0&&t.max_noise>-.1&&t.max_noise>e.max_noise-.15&&e.tot_noise+e.over_noise+e.over_noise<t.tot_noise+t.over_noise+t.over_noise;break;case 5:R=e.over_noise<t.over_noise||BitStream.EQ(e.over_noise,t.over_noise)&&e.tot_noise<t.tot_noise;break;case 6:R=e.over_noise<t.over_noise||BitStream.EQ(e.over_noise,t.over_noise)&&(e.max_noise<t.max_noise||BitStream.EQ(e.max_noise,t.max_noise)&&e.tot_noise<=t.tot_noise);break;case 7:R=e.over_count<t.over_count||e.over_noise<t.over_noise;break}return t.over_count==0&&(R=R&&e.bits<t.bits),R}function H(d,t,e,c,u){var R=d.internal_flags,f;t.scalefac_scale==0?f=1.2968395546510096:f=1.6817928305074292;for(var v=0,h=0;h<t.sfbmax;h++)v<e[h]&&(v=e[h]);var s=R.noise_shaping_amp;switch(s==3&&(u?s=2:s=1),s){case 2:break;case 1:v>1?v=Math.pow(v,.5):v*=.95;break;case 0:default:v>1?v=1:v*=.95;break}for(var o=0,h=0;h<t.sfbmax;h++){var a=t.width[h],i;if(o+=a,!(e[h]<v)){if(R.substep_shaping&2&&(R.pseudohalf[h]=R.pseudohalf[h]==0?1:0,R.pseudohalf[h]==0&&R.noise_shaping_amp==2))return;for(t.scalefac[h]++,i=-a;i<0;i++)c[o+i]*=f,c[o+i]>t.xrpow_max&&(t.xrpow_max=c[o+i]);if(R.noise_shaping_amp==2)return}}}function I(d,t){for(var e=1.2968395546510096,c=0,u=0;u<d.sfbmax;u++){var R=d.width[u],f=d.scalefac[u];if(d.preflag!=0&&(f+=G.pretab[u]),c+=R,f&1){f++;for(var v=-R;v<0;v++)t[c+v]*=e,t[c+v]>d.xrpow_max&&(d.xrpow_max=t[c+v])}d.scalefac[u]=f>>1}d.preflag=0,d.scalefac_scale=1}function n0(d,t,e){var c,u=t.scalefac;for(c=0;c<t.sfb_lmax;c++)if(u[c]>=16)return!0;for(var R=0;R<3;R++){var f=0,v=0;for(c=t.sfb_lmax+R;c<t.sfbdivide;c+=3)f<u[c]&&(f=u[c]);for(;c<t.sfbmax;c+=3)v<u[c]&&(v=u[c]);if(!(f<16&&v<8)){if(t.subblock_gain[R]>=7)return!0;t.subblock_gain[R]++;var h=d.scalefac_band.l[t.sfb_lmax];for(c=t.sfb_lmax+R;c<t.sfbmax;c+=3){var s,o=t.width[c],a=u[c];if(a=a-(4>>t.scalefac_scale),a>=0){u[c]=a,h+=o*3;continue}u[c]=0;{var i=210+(a<<t.scalefac_scale+1);s=G.IPOW20(i)}h+=o*(R+1);for(var n=-o;n<0;n++)e[h+n]*=s,e[h+n]>t.xrpow_max&&(t.xrpow_max=e[h+n]);h+=o*(3-R-1)}{var s=G.IPOW20(202);h+=t.width[c]*(R+1);for(var n=-t.width[c];n<0;n++)e[h+n]*=s,e[h+n]>t.xrpow_max&&(t.xrpow_max=e[h+n])}}}return!1}function $(d,t,e,c,u){var R=d.internal_flags;H(d,t,e,c,u);var f=y(t);return f?!1:(R.mode_gr==2?f=r0.scale_bitcount(t):f=r0.scale_bitcount_lsf(R,t),f?(R.noise_shaping>1&&(ae.fill(R.pseudohalf,0),t.scalefac_scale==0?(I(t,c),f=!1):t.block_type==w0.SHORT_TYPE&&R.subblock_gain>0&&(f=n0(R,t,c)||y(t))),f||(R.mode_gr==2?f=r0.scale_bitcount(t):f=r0.scale_bitcount_lsf(R,t)),!f):!0)}this.outer_loop=function(d,t,e,c,u,R){var f=d.internal_flags,v=new Oa,h=fe(576),s=fe(ka.SFBMAX),o=new ea,a,i=new Hr,n=9999999,l=!1,m=!1,X=0;if(Z(f,t,R,u,c),f.noise_shaping==0)return 100;G.calc_noise(t,e,s,o,i),o.bits=t.part2_3_length,v.assign(t);var E=0;for(H1.arraycopy(c,0,h,0,576);!l;){do{var x=new ea,r,_=255;if(f.substep_shaping&2?r=20:r=3,f.sfb21_extra&&(s[v.sfbmax]>1||v.block_type==w0.SHORT_TYPE&&(s[v.sfbmax+1]>1||s[v.sfbmax+2]>1))||!$(d,v,s,c,m))break;v.scalefac_scale!=0&&(_=254);var L=R-v.part2_length;if(L<=0)break;for(;(v.part2_3_length=r0.count_bits(f,c,v,i))>L&&v.global_gain<=_;)v.global_gain++;if(v.global_gain>_)break;if(o.over_count==0){for(;(v.part2_3_length=r0.count_bits(f,c,v,i))>n&&v.global_gain<=_;)v.global_gain++;if(v.global_gain>_)break}if(G.calc_noise(v,e,s,x,i),x.bits=v.part2_3_length,t.block_type!=w0.SHORT_TYPE?a=d.quant_comp:a=d.quant_comp_short,a=a0(a,o,x,v,s)?1:0,a!=0)n=t.part2_3_length,o=x,t.assign(v),E=0,H1.arraycopy(c,0,h,0,576);else if(f.full_outer_loop==0&&(++E>r&&o.over_count==0||f.noise_shaping_amp==3&&m&&E>30||f.noise_shaping_amp==3&&m&&v.global_gain-X>15))break}while(v.global_gain+v.scalefac_scale<255);f.noise_shaping_amp==3?m?l=!0:(v.assign(t),H1.arraycopy(h,0,c,0,576),E=0,X=v.global_gain,m=!0):l=!0}return me(t.global_gain+t.scalefac_scale<=255),d.VBR==Va.vbr_rh||d.VBR==Va.vbr_mtrh?H1.arraycopy(h,0,c,0,576):f.substep_shaping&1&&trancate_smallspectrums(f,t,e,c),o.over_count},this.iteration_finish_one=function(d,t,e){var c=d.l3_side,u=c.tt[t][e];r0.best_scalefac_store(d,t,e,c),d.use_best_huffman==1&&r0.best_huffman_divide(d,u),Y.ResvAdjust(d,u)},this.VBR_encode_granule=function(d,t,e,c,u,R,f){var v=d.internal_flags,h=new Oa,s=fe(576),o=f,a=f+1,i=(f+R)/2,n,l,m=0,X=v.sfb21_extra;me(o<=LameInternalFlags.MAX_BITS_PER_CHANNEL),ae.fill(h.l3_enc,0);do i>o-42?v.sfb21_extra=!1:v.sfb21_extra=X,l=outer_loop(d,t,e,c,u,i),l<=0?(m=1,a=t.part2_3_length,h.assign(t),H1.arraycopy(c,0,s,0,576),f=a-32,n=f-R,i=(f+R)/2):(R=i+32,n=f-R,i=(f+R)/2,m!=0&&(m=2,t.assign(h),H1.arraycopy(s,0,c,0,576)));while(n>12);v.sfb21_extra=X,m==2&&H1.arraycopy(h.l3_enc,0,t.l3_enc,0,576),me(t.part2_3_length<=o)},this.get_framebits=function(d,t){var e=d.internal_flags;e.bitrate_index=e.VBR_min_bitrate;var c=T.getframebits(d);e.bitrate_index=1,c=T.getframebits(d);for(var u=1;u<=e.VBR_max_bitrate;u++){e.bitrate_index=u;var R=new MeanBits(c);t[u]=Y.ResvFrameBegin(d,R),c=R.bits}},this.VBR_old_prepare=function(d,t,e,c,u,R,f,v,h){var s=d.internal_flags,o,a=0,i=1,n=0;s.bitrate_index=s.VBR_max_bitrate;var l=Y.ResvFrameBegin(d,new MeanBits(0))/s.mode_gr;get_framebits(d,R);for(var m=0;m<s.mode_gr;m++){var X=G.on_pe(d,t,v[m],l,m,0);s.mode_ext==w0.MPG_MD_MS_LR&&(ms_convert(s.l3_side,m),G.reduce_side(v[m],e[m],l,X));for(var E=0;E<s.channels_out;++E){var x=s.l3_side.tt[m][E];x.block_type!=w0.SHORT_TYPE?(a=1.28/(1+Math.exp(3.5-t[m][E]/300))-.05,o=s.PSY.mask_adjust-a):(a=2.56/(1+Math.exp(3.5-t[m][E]/300))-.14,o=s.PSY.mask_adjust_short-a),s.masking_lower=Math.pow(10,o*.1),init_outer_loop(s,x),h[m][E]=G.calc_xmin(d,c[m][E],x,u[m][E]),h[m][E]!=0&&(i=0),f[m][E]=126,n+=v[m][E]}}for(var m=0;m<s.mode_gr;m++)for(var E=0;E<s.channels_out;E++)n>R[s.VBR_max_bitrate]&&(v[m][E]*=R[s.VBR_max_bitrate],v[m][E]/=n),f[m][E]>v[m][E]&&(f[m][E]=v[m][E]);return i},this.bitpressure_strategy=function(d,t,e,c){for(var u=0;u<d.mode_gr;u++)for(var R=0;R<d.channels_out;R++){for(var f=d.l3_side.tt[u][R],v=t[u][R],h=0,s=0;s<f.psy_lmax;s++)v[h++]*=1+.029*s*s/w0.SBMAX_l/w0.SBMAX_l;if(f.block_type==w0.SHORT_TYPE)for(var s=f.sfb_smin;s<w0.SBMAX_s;s++)v[h++]*=1+.029*s*s/w0.SBMAX_s/w0.SBMAX_s,v[h++]*=1+.029*s*s/w0.SBMAX_s/w0.SBMAX_s,v[h++]*=1+.029*s*s/w0.SBMAX_s/w0.SBMAX_s;c[u][R]=0|Math.max(e[u][R],.9*c[u][R])}},this.VBR_new_prepare=function(d,t,e,c,u,R){var f=d.internal_flags,v=1,h=0,s=0,o;if(d.free_format){f.bitrate_index=0;var a=new MeanBits(h);o=Y.ResvFrameBegin(d,a),h=a.bits,u[0]=o}else{f.bitrate_index=f.VBR_max_bitrate;var a=new MeanBits(h);Y.ResvFrameBegin(d,a),h=a.bits,get_framebits(d,u),o=u[f.VBR_max_bitrate]}for(var i=0;i<f.mode_gr;i++){G.on_pe(d,t,R[i],h,i,0),f.mode_ext==w0.MPG_MD_MS_LR&&ms_convert(f.l3_side,i);for(var n=0;n<f.channels_out;++n){var l=f.l3_side.tt[i][n];f.masking_lower=Math.pow(10,f.PSY.mask_adjust*.1),init_outer_loop(f,l),G.calc_xmin(d,e[i][n],l,c[i][n])!=0&&(v=0),s+=R[i][n]}}for(var i=0;i<f.mode_gr;i++)for(var n=0;n<f.channels_out;n++)s>o&&(R[i][n]*=o,R[i][n]/=s);return v},this.calc_target_bits=function(d,t,e,c,u,R){var f=d.internal_flags,v=f.l3_side,h,s,o,a,i=0;f.bitrate_index=f.VBR_max_bitrate;var n=new MeanBits(i);for(R[0]=Y.ResvFrameBegin(d,n),i=n.bits,f.bitrate_index=1,i=T.getframebits(d)-f.sideinfo_len*8,u[0]=i/(f.mode_gr*f.channels_out),i=d.VBR_mean_bitrate_kbps*d.framesize*1e3,f.substep_shaping&1&&(i*=1.09),i/=d.out_samplerate,i-=f.sideinfo_len*8,i/=f.mode_gr*f.channels_out,h=.93+.07*(11-d.compression_ratio)/(11-5.5),h<.9&&(h=.9),h>1&&(h=1),s=0;s<f.mode_gr;s++){var l=0;for(o=0;o<f.channels_out;o++){if(c[s][o]=int(h*i),t[s][o]>700){var m=int((t[s][o]-700)/1.4),X=v.tt[s][o];c[s][o]=int(h*i),X.block_type==w0.SHORT_TYPE&&m<i/2&&(m=i/2),m>i*3/2?m=i*3/2:m<0&&(m=0),c[s][o]+=m}c[s][o]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(c[s][o]=LameInternalFlags.MAX_BITS_PER_CHANNEL),l+=c[s][o]}if(l>LameInternalFlags.MAX_BITS_PER_GRANULE)for(o=0;o<f.channels_out;++o)c[s][o]*=LameInternalFlags.MAX_BITS_PER_GRANULE,c[s][o]/=l}if(f.mode_ext==w0.MPG_MD_MS_LR)for(s=0;s<f.mode_gr;s++)G.reduce_side(c[s],e[s],i*f.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(a=0,s=0;s<f.mode_gr;s++)for(o=0;o<f.channels_out;o++)c[s][o]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(c[s][o]=LameInternalFlags.MAX_BITS_PER_CHANNEL),a+=c[s][o];if(a>R[0])for(s=0;s<f.mode_gr;s++)for(o=0;o<f.channels_out;o++)c[s][o]*=R[0],c[s][o]/=a}}var Or=Vr,kr=V0,Xa=kr.assert;function Xr(){var T;this.setModules=function(Y){T=Y},this.ResvFrameBegin=function(Y,G){var D=Y.internal_flags,r0,U=D.l3_side,K=T.getframebits(Y);G.bits=(K-D.sideinfo_len*8)/D.mode_gr;var q=8*256*D.mode_gr-8;Y.brate>320?r0=8*int(Y.brate*1e3/(Y.out_samplerate/1152)/8+.5):(r0=8*1440,Y.strict_ISO&&(r0=8*int(32e4/(Y.out_samplerate/1152)/8+.5))),D.ResvMax=r0-K,D.ResvMax>q&&(D.ResvMax=q),(D.ResvMax<0||Y.disable_reservoir)&&(D.ResvMax=0);var Z=G.bits*D.mode_gr+Math.min(D.ResvSize,D.ResvMax);return Z>r0&&(Z=r0),Xa(D.ResvMax%8==0),Xa(D.ResvMax>=0),U.resvDrain_pre=0,D.pinfo!=null&&(D.pinfo.mean_bits=G.bits/2,D.pinfo.resvsize=D.ResvSize),Z},this.ResvMaxBits=function(Y,G,D,r0){var U=Y.internal_flags,K,q=U.ResvSize,Z=U.ResvMax;r0!=0&&(q+=G),U.substep_shaping&1&&(Z*=.9),D.bits=G,q*10>Z*9?(K=q-Z*9/10,D.bits+=K,U.substep_shaping|=128):(K=0,U.substep_shaping&=127,!Y.disable_reservoir&&!(U.substep_shaping&1)&&(D.bits-=.1*G));var y=q<U.ResvMax*6/10?q:U.ResvMax*6/10;return y-=K,y<0&&(y=0),y},this.ResvAdjust=function(Y,G){Y.ResvSize-=G.part2_3_length+G.part2_length},this.ResvFrameEnd=function(Y,G){var D,r0=Y.l3_side;Y.ResvSize+=G*Y.mode_gr;var U=0;r0.resvDrain_post=0,r0.resvDrain_pre=0,(D=Y.ResvSize%8)!=0&&(U+=D),D=Y.ResvSize-U-Y.ResvMax,D>0&&(U+=D);{var K=Math.min(r0.main_data_begin*8,U)/8;r0.resvDrain_pre+=8*K,U-=8*K,Y.ResvSize-=8*K,r0.main_data_begin-=K}r0.resvDrain_post+=U,Y.ResvSize-=U}}var Fr=Xr;function Cr(){var T="http://www.mp3dev.org/",Y=3,G=98,D=4,r0=0,U=93;this.getLameVersion=function(){return Y+"."+G+"."+D},this.getLameShortVersion=function(){return Y+"."+G+"."+D},this.getLameVeryShortVersion=function(){return"LAME"+Y+"."+G+"r"},this.getPsyVersion=function(){return r0+"."+U},this.getLameUrl=function(){return T},this.getLameOsBitness=function(){return"32bits"}}var Yr=Cr,ne=V0,$r=ne.System,aa=ne.VbrMode,Fa=ne.ShortBlock,qr=ne.Arrays,Ie=ne.new_byte,Gr=ne.assert;be.NUMTOCENTRIES=100;be.MAXFRAMESIZE=2880;function be(){var T,Y,G;this.setModules=function(i,n,l){T=i,Y=n,G=l};var D=1,r0=2,U=4,K=8,q=be.NUMTOCENTRIES,Z=be.MAXFRAMESIZE,y=q+4+4+4+4+4,O=y+9+1+1+8+1+1+3+1+1+2+4+2+2,M=128,a0=64,H=32,I=null,n0="Xing",$="Info",d=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function t(i,n){if(i.nVbrNumFrames++,i.sum+=n,i.seen++,!(i.seen<i.want)&&(i.pos<i.size&&(i.bag[i.pos]=i.sum,i.pos++,i.seen=0),i.pos==i.size)){for(var l=1;l<i.size;l+=2)i.bag[l/2]=i.bag[l];i.want*=2,i.pos/=2}}function e(i,n){if(!(i.pos<=0))for(var l=1;l<q;++l){var m=l/q,X,E,x=0|Math.floor(m*i.pos);x>i.pos-1&&(x=i.pos-1),X=i.bag[x],E=i.sum;var r=0|256*X/E;r>255&&(r=255),n[l]=255&r}}this.addVbrFrame=function(i){var n=i.internal_flags,l=Tables.bitrate_table[i.version][n.bitrate_index];Gr(n.VBR_seek_table.bag!=null),t(n.VBR_seek_table,l)};function c(i,n){var l=i[n+0]&255;return l<<=8,l|=i[n+1]&255,l<<=8,l|=i[n+2]&255,l<<=8,l|=i[n+3]&255,l}function u(i,n,l){i[n+0]=255&(l>>24&255),i[n+1]=255&(l>>16&255),i[n+2]=255&(l>>8&255),i[n+3]=255&(l&255)}function R(i,n,l){i[n+0]=255&(l>>8&255),i[n+1]=255&(l&255)}function f(i,n){return new String(i,n,n0.length(),I).equals(n0)||new String(i,n,$.length(),I).equals($)}function v(i,n,l){return 255&(i<<n|l&~(-1<<n))}function h(i,n){var l=i.internal_flags;n[0]=v(n[0],8,255),n[1]=v(n[1],3,7),n[1]=v(n[1],1,i.out_samplerate<16e3?0:1),n[1]=v(n[1],1,i.version),n[1]=v(n[1],2,1),n[1]=v(n[1],1,i.error_protection?0:1),n[2]=v(n[2],4,l.bitrate_index),n[2]=v(n[2],2,l.samplerate_index),n[2]=v(n[2],1,0),n[2]=v(n[2],1,i.extension),n[3]=v(n[3],2,i.mode.ordinal()),n[3]=v(n[3],2,l.mode_ext),n[3]=v(n[3],1,i.copyright),n[3]=v(n[3],1,i.original),n[3]=v(n[3],2,i.emphasis),n[0]=255;var m=255&(n[1]&241),X;i.version==1?X=M:i.out_samplerate<16e3?X=H:X=a0,i.VBR==aa.vbr_off&&(X=i.brate);var E;i.free_format?E=0:E=255&16*T.BitrateIndex(X,i.version,i.out_samplerate),i.version==1?(n[1]=255&(m|10),m=255&(n[2]&13),n[2]=255&(E|m)):(n[1]=255&(m|2),m=255&(n[2]&13),n[2]=255&(E|m))}this.getVbrTag=function(i){var n=new VBRTagData,l=0;n.flags=0;var m=i[l+1]>>3&1,X=i[l+2]>>2&3,E=i[l+3]>>6&3,x=i[l+2]>>4&15;if(x=Tables.bitrate_table[m][x],i[l+1]>>4==14?n.samprate=Tables.samplerate_table[2][X]:n.samprate=Tables.samplerate_table[m][X],m!=0?E!=3?l+=36:l+=21:E!=3?l+=21:l+=13,!f(i,l))return null;l+=4,n.hId=m;var r=n.flags=c(i,l);if(l+=4,r&D&&(n.frames=c(i,l),l+=4),r&r0&&(n.bytes=c(i,l),l+=4),r&U){if(n.toc!=null)for(var _=0;_<q;_++)n.toc[_]=i[l+_];l+=q}n.vbrScale=-1,r&K&&(n.vbrScale=c(i,l),l+=4),n.headersize=(m+1)*72e3*x/n.samprate,l+=21;var L=i[l+0]<<4;L+=i[l+1]>>4;var p=(i[l+1]&15)<<8;return p+=i[l+2]&255,(L<0||L>3e3)&&(L=-1),(p<0||p>3e3)&&(p=-1),n.encDelay=L,n.encPadding=p,n},this.InitVbrTag=function(i){var n=i.internal_flags,l;i.version==1?l=M:i.out_samplerate<16e3?l=H:l=a0,i.VBR==aa.vbr_off&&(l=i.brate);var m=(i.version+1)*72e3*l/i.out_samplerate,X=n.sideinfo_len+O;if(n.VBR_seek_table.TotalFrameSize=m,m<X||m>Z){i.bWriteVbrTag=!1;return}n.VBR_seek_table.nVbrNumFrames=0,n.VBR_seek_table.nBytesWritten=0,n.VBR_seek_table.sum=0,n.VBR_seek_table.seen=0,n.VBR_seek_table.want=1,n.VBR_seek_table.pos=0,n.VBR_seek_table.bag==null&&(n.VBR_seek_table.bag=new int[400],n.VBR_seek_table.size=400);var E=Ie(Z);h(i,E);for(var x=n.VBR_seek_table.TotalFrameSize,r=0;r<x;++r)Y.add_dummy_byte(i,E[r]&255,1)};function s(i,n){var l=n^i;return n=n>>8^d[l&255],n}this.updateMusicCRC=function(i,n,l,m){for(var X=0;X<m;++X)i[0]=s(n[l+X],i[0])};function o(i,n,l,m,X){var E=i.internal_flags,x=0,r=i.encoder_delay,_=i.encoder_padding,L=100-10*i.VBR_q-i.quality,p=G.getLameVeryShortVersion(),s0,v0=0,_0,i0=[1,5,3,2,4,0,3],d0=0|(i.lowpassfreq/100+.5>255?255:i.lowpassfreq/100+.5),h0=0,t0=0,B0=0,O0=i.internal_flags.noise_shaping,S0=0,I0=0,T0=0,F0=0,K0=0,M1=(i.exp_nspsytune&1)!=0,o1=(i.exp_nspsytune&2)!=0,z0=!1,f1=!1,V1=i.internal_flags.nogap_total,p1=i.internal_flags.nogap_current,t1=i.ATHtype,O1=0,T1;switch(i.VBR){case vbr_abr:T1=i.VBR_mean_bitrate_kbps;break;case vbr_off:T1=i.brate;break;default:T1=i.VBR_min_bitrate_kbps}switch(i.VBR.ordinal()<i0.length?s0=i0[i.VBR.ordinal()]:s0=0,_0=16*v0+s0,E.findReplayGain&&(E.RadioGain>510&&(E.RadioGain=510),E.RadioGain<-510&&(E.RadioGain=-510),t0=8192,t0|=3072,E.RadioGain>=0?t0|=E.RadioGain:(t0|=512,t0|=-E.RadioGain)),E.findPeakSample&&(h0=Math.abs(0|E.PeakSample/32767*Math.pow(2,23)+.5)),V1!=-1&&(p1>0&&(f1=!0),p1<V1-1&&(z0=!0)),O1=t1+((M1?1:0)<<4)+((o1?1:0)<<5)+((z0?1:0)<<6)+((f1?1:0)<<7),L<0&&(L=0),i.mode){case MONO:S0=0;break;case STEREO:S0=1;break;case DUAL_CHANNEL:S0=2;break;case JOINT_STEREO:i.force_ms?S0=4:S0=3;break;case NOT_SET:default:S0=7;break}i.in_samplerate<=32e3?T0=0:i.in_samplerate==48e3?T0=2:i.in_samplerate>48e3?T0=3:T0=1,(i.short_blocks==Fa.short_block_forced||i.short_blocks==Fa.short_block_dispensed||i.lowpassfreq==-1&&i.highpassfreq==-1||i.scale_left<i.scale_right||i.scale_left>i.scale_right||i.disable_reservoir&&i.brate<320||i.noATH||i.ATHonly||t1==0||i.in_samplerate<=32e3)&&(I0=1),F0=O0+(S0<<2)+(I0<<5)+(T0<<6),K0=E.nMusicCRC,u(l,m+x,L),x+=4;for(var s1=0;s1<9;s1++)l[m+x+s1]=255&p.charAt(s1);x+=9,l[m+x]=255&_0,x++,l[m+x]=255&d0,x++,u(l,m+x,h0),x+=4,R(l,m+x,t0),x+=2,R(l,m+x,B0),x+=2,l[m+x]=255&O1,x++,T1>=255?l[m+x]=255:l[m+x]=255&T1,x++,l[m+x]=255&r>>4,l[m+x+1]=255&(r<<4)+(_>>8),l[m+x+2]=255&_,x+=3,l[m+x]=255&F0,x++,l[m+x++]=0,R(l,m+x,i.preset),x+=2,u(l,m+x,n),x+=4,R(l,m+x,K0),x+=2;for(var j1=0;j1<x;j1++)X=s(l[m+j1],X);return R(l,m+x,X),x+=2,x}function a(i){i.seek(0);var n=Ie(10);i.readFully(n);var l;return new String(n,"ISO-8859-1").startsWith("ID3")?l=0:l=((n[6]&127)<<21|(n[7]&127)<<14|(n[8]&127)<<7|n[9]&127)+n.length,l}this.getLameTagFrame=function(i,n){var l=i.internal_flags;if(!i.bWriteVbrTag||l.Class_ID!=Lame.LAME_ID||l.VBR_seek_table.pos<=0)return 0;if(n.length<l.VBR_seek_table.TotalFrameSize)return l.VBR_seek_table.TotalFrameSize;qr.fill(n,0,l.VBR_seek_table.TotalFrameSize,0),h(i,n);var m=Ie(q);if(i.free_format)for(var X=1;X<q;++X)m[X]=255&255*X/100;else e(l.VBR_seek_table,m);var E=l.sideinfo_len;i.error_protection&&(E-=2),i.VBR==aa.vbr_off?(n[E++]=255&$.charAt(0),n[E++]=255&$.charAt(1),n[E++]=255&$.charAt(2),n[E++]=255&$.charAt(3)):(n[E++]=255&n0.charAt(0),n[E++]=255&n0.charAt(1),n[E++]=255&n0.charAt(2),n[E++]=255&n0.charAt(3)),u(n,E,D+r0+U+K),E+=4,u(n,E,l.VBR_seek_table.nVbrNumFrames),E+=4;var x=l.VBR_seek_table.nBytesWritten+l.VBR_seek_table.TotalFrameSize;u(n,E,0|x),E+=4,$r.arraycopy(m,0,n,E,m.length),E+=m.length,i.error_protection&&Y.CRC_writeheader(l,n);for(var r=0,X=0;X<E;X++)r=s(n[X],r);return E+=o(i,x,n,E,r),l.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(i,n){var l=i.internal_flags;if(l.VBR_seek_table.pos<=0||(n.seek(n.length()),n.length()==0))return-1;var m=a(n);n.seek(m);var X=Ie(Z),E=getLameTagFrame(i,X);return E>X.length?-1:(E<1||n.write(X,0,E),0)}}var Pr=be,l2=V0,Ca=l2.new_byte,Dr=l2.assert,Zr=Rr,Kr=Br,Ur=a2,Qr=s2,jr=Or,Wr=i2,zr=Fr,Jr=ja,gr=n2;W0();var et=Yr,at=Pr;function rt(){this.setModules=function(T,Y){}}function tt(){this.setModules=function(T,Y,G){}}function st(){}function it(){this.setModules=function(T,Y){}}function nt(T,Y,G){arguments.length!=3&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),T=1,Y=44100,G=128);var D=new Zr,r0=new rt,U=new Ur,K=new gr,q=new Kr,Z=new Qr,y=new jr,O=new at,M=new et,a0=new it,H=new zr,I=new Wr,n0=new tt,$=new st;D.setModules(U,K,q,Z,y,O,M,a0,$),K.setModules(U,$,M,O),a0.setModules(K,M),q.setModules(D),y.setModules(K,H,Z,I),Z.setModules(I,H,D.enc.psy),H.setModules(K),I.setModules(Z),O.setModules(D,K,M),r0.setModules(n0,$),n0.setModules(M,a0,q);var d=D.lame_init();d.num_channels=T,d.in_samplerate=Y,d.brate=G,d.mode=Jr.STEREO,d.quality=3,d.bWriteVbrTag=!1,d.disable_reservoir=!0,d.write_id3tag_automatic=!1,D.lame_init_params(d);var t=1152,e=0|1.25*t+7200,c=Ca(e);this.encodeBuffer=function(u,R){T==1&&(R=u),Dr(u.length==R.length),u.length>t&&(t=u.length,e=0|1.25*t+7200,c=Ca(e));var f=D.lame_encode_buffer(d,u,R,u.length,c,0,e);return new Int8Array(c.subarray(0,f))},this.flush=function(){var u=D.lame_encode_flush(d,c,0,e);return new Int8Array(c.subarray(0,u))}}function d1(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Oe(T){return T.charCodeAt(0)<<24|T.charCodeAt(1)<<16|T.charCodeAt(2)<<8|T.charCodeAt(3)}d1.RIFF=Oe("RIFF");d1.WAVE=Oe("WAVE");d1.fmt_=Oe("fmt ");d1.data=Oe("data");d1.readHeader=function(T){var Y=new d1,G=T.getUint32(0,!1);if(d1.RIFF==G&&(T.getUint32(4,!0),d1.WAVE==T.getUint32(8,!1)&&d1.fmt_==T.getUint32(12,!1))){var D=T.getUint32(16,!0),r0=20;switch(D){case 16:case 18:Y.channels=T.getUint16(r0+2,!0),Y.sampleRate=T.getUint32(r0+4,!0);break;default:throw"extended fmt chunk not implemented"}r0+=D;for(var U=d1.data,K=0;U!=G&&(G=T.getUint32(r0,!1),K=T.getUint32(r0+4,!0),U!=G);)r0+=K+8;return Y.dataLen=K,Y.dataOffset=r0+8,Y}};var _t=xe.Mp3Encoder=nt,lt=xe.WavHeader=d1;const vt=o2({__proto__:null,Mp3Encoder:_t,WavHeader:lt,default:xe},[xe]);export{vt as i};
